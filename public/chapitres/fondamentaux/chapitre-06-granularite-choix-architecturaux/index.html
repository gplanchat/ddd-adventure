<!doctype html><html lang=fr-fr><head><script src="/livereload.js?mindelay=10&amp;v=2&amp;port=1313&amp;path=livereload" data-no-instant defer></script><meta charset=utf-8><title>Chapitre 6 : Granularit√© des Choix Architecturaux | DDD Adventure</title><meta name=robots content="noindex"><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="Comprendre comment choisir l'architecture au bon niveau pour maintenir la coh√©rence et √©viter la surcharge cognitive"><meta name=keywords content="Documentation,Hugo,Hugo Theme,Bootstrap"><meta name=author content="Colin Wilson - Lotus Labs"><meta name=email content="support@aigis.uk"><meta name=website content="https://lotusdocs.dev"><meta name=Version content="v0.1.0"><link rel=icon href=http://localhost:1313/favicon.ico sizes=any><link rel=icon type=image/svg+xml href=http://localhost:1313/favicon.svg><link rel=apple-touch-icon sizes=180x180 href=http://localhost:1313/apple-touch-icon.png><link rel=icon type=image/png sizes=32x32 href=http://localhost:1313/favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=http://localhost:1313/favicon-16x16.png><link rel=manifest crossorigin=use-credentials href=http://localhost:1313/site.webmanifest><meta property="og:title" content="Chapitre 6 : Granularit√© des Choix Architecturaux"><meta property="og:description" content="Comprendre comment choisir l'architecture au bon niveau pour maintenir la coh√©rence et √©viter la surcharge cognitive"><meta property="og:type" content="article"><meta property="og:url" content="http://localhost:1313/chapitres/fondamentaux/chapitre-06-granularite-choix-architecturaux/"><meta property="og:image" content="http://localhost:1313/opengraph/card-base-2_hu_f725ce9f30268554.png"><meta property="article:section" content="chapitres"><meta property="article:published_time" content="2024-12-19T00:00:00+00:00"><meta property="article:modified_time" content="2024-12-19T00:00:00+00:00"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="http://localhost:1313/opengraph/card-base-2_hu_f725ce9f30268554.png"><meta name=twitter:title content="Chapitre 6 : Granularit√© des Choix Architecturaux"><meta name=twitter:description content="Comprendre comment choisir l'architecture au bon niveau pour maintenir la coh√©rence et √©viter la surcharge cognitive"><link rel=alternate type=application/atom+xml title="Atom feed for DDD Adventure" href=/index.xml><script type=text/javascript src=http://localhost:1313/docs/js/flexsearch.bundle.js></script><link rel=stylesheet href=/docs/scss/style.css crossorigin=anonymous></head><body><div class=content><div class="page-wrapper toggled"><nav id=sidebar class=sidebar-wrapper><div class=sidebar-brand><a href=/ aria-label=HomePage alt=HomePage><svg id="Layer_1" viewBox="0 0 250 250"><path d="m143 39.5c-18 0-18 18-18 18s0-18-18-18H22c-2.76.0-5 2.24-5 5v143c0 2.76 2.24 5 5 5h76c7.2.0 8.64 11.52 8.93 16.13.07 1.05.95 1.87 2 1.87h32.14c1.06.0 1.94-.82 2-1.87.29-4.61 1.73-16.13 8.93-16.13h76c2.76.0 5-2.24 5-5V44.5c0-2.76-2.24-5-5-5h-85zM206 163c0 1.38-1.12 2.5-2.5 2.5H143c-18 0-18 18-18 18s0-18-18-18H46.5c-1.38.0-2.5-1.12-2.5-2.5V69c0-1.38 1.12-2.5 2.5-2.5H98c7.2.0 8.64 11.52 8.93 16.13.07 1.05.95 1.87 2 1.87h32.14c1.06.0 1.94-.82 2-1.87.29-4.61 1.73-16.13 8.93-16.13h51.5c1.38.0 2.5 1.12 2.5 2.5v94z" style="fill:#06f"/></svg></a></div><div class=sidebar-content style="height:calc(100% - 131px)"><ul class=sidebar-menu><li class="sidebar-dropdown no-icon current active"><button class=btn>
Chapitres Fondamentaux</button><div class="sidebar-submenu d-block"><ul><li class=no-icon><a class=sidebar-nested-link href=http://localhost:1313/chapitres/fondamentaux/chapitre-01-introduction-event-storming-ddd/>Chapitre 1 : Introduction au Domain-Driven Design et Event Storming</a></li><li class=no-icon><a class=sidebar-nested-link href=http://localhost:1313/chapitres/fondamentaux/chapitre-02-impact-mapping/>Chapitre 2 : L'Impact Mapping - Aligner le Produit sur les Objectifs Business</a></li><li class=no-icon><a class=sidebar-nested-link href=http://localhost:1313/chapitres/fondamentaux/chapitre-03-atelier-event-storming/>Chapitre 3 : L'Atelier Event Storming - Guide Pratique</a></li><li class=no-icon><a class=sidebar-nested-link href=http://localhost:1313/chapitres/fondamentaux/chapitre-04-example-mapping/>Chapitre 4 : L'Example Mapping - D√©tailer les R√®gles M√©tier</a></li><li class=no-icon><a class=sidebar-nested-link href=http://localhost:1313/chapitres/fondamentaux/chapitre-05-complexite-accidentelle-essentielle/>Chapitre 5 : Complexit√© Accidentelle vs Essentielle - Le Choix Architectural</a></li><li class="current no-icon"><a class=sidebar-nested-link href=http://localhost:1313/chapitres/fondamentaux/chapitre-06-granularite-choix-architecturaux/>Chapitre 6 : Granularit√© des Choix Architecturaux</a></li><li class=no-icon><a class=sidebar-nested-link href=http://localhost:1313/chapitres/fondamentaux/chapitre-07-modeles-riches-vs-anemiques/>Chapitre 7 : Mod√®les Riches vs Mod√®les An√©miques</a></li><li class=no-icon><a class=sidebar-nested-link href=http://localhost:1313/chapitres/fondamentaux/chapitre-08-architecture-evenementielle/>Chapitre 8 : Architecture √âv√©nementielle</a></li><li class=no-icon><a class=sidebar-nested-link href=http://localhost:1313/chapitres/fondamentaux/chapitre-09-repositories-persistance/>Chapitre 9 : Repositories et Persistance</a></li><li class=no-icon><a class=sidebar-nested-link href=http://localhost:1313/chapitres/fondamentaux/chapitre-10-choix-type-stockage/>Chapitre 15 : Choix du Type de Stockage</a></li></ul></div></li><li class="sidebar-dropdown no-icon"><button class=btn>
Chapitres Optionnels</button><div class=sidebar-submenu><ul><li class=no-icon><a class=sidebar-nested-link href=http://localhost:1313/chapitres/optionnels/chapitre-13-architecture-cqrs/>Chapitre 15 : Architecture CQRS avec API Platform</a></li><li class=no-icon><a class=sidebar-nested-link href=http://localhost:1313/chapitres/optionnels/chapitre-12-architecture-cqs/>Chapitre 15 : Architecture CQS - Command Query Separation</a></li><li class=no-icon><a class=sidebar-nested-link href=http://localhost:1313/chapitres/optionnels/chapitre-11-event-sourcing/>Chapitre 15 : Event Sourcing - La Source de V√©rit√©</a></li><li class=no-icon><a class=sidebar-nested-link href=http://localhost:1313/chapitres/optionnels/chapitre-14-cqrs-event-sourcing-combines/>Chapitre 15 : CQRS + Event Sourcing Combin√©s</a></li><li class=no-icon><a class=sidebar-nested-link href=http://localhost:1313/chapitres/optionnels/chapitre-15-projections-event-sourcing/>Chapitre 15 : Projections Event Sourcing</a></li></ul></div></li><li class="sidebar-dropdown no-icon"><button class=btn>
Chapitres de Stockage</button><div class=sidebar-submenu><ul><li class="sidebar-dropdown nested no-icon"><button class=btn>
Stockage SQL</button><div class=sidebar-submenu><ul><li class=no-icon><a class=sidebar-nested-link href=http://localhost:1313/chapitres/stockage/sql/chapitre-16-stockage-sql-classique/>Chapitre 16 : Stockage SQL - Approche Classique</a></li><li class=no-icon><a class=sidebar-nested-link href=http://localhost:1313/chapitres/stockage/sql/chapitre-17-stockage-sql-cqs/>Chapitre 17 : Stockage SQL - Approche CQS</a></li><li class=no-icon><a class=sidebar-nested-link href=http://localhost:1313/chapitres/stockage/sql/chapitre-18-stockage-sql-cqrs/>Chapitre 18 : Stockage SQL - Approche CQRS</a></li><li class=no-icon><a class=sidebar-nested-link href=http://localhost:1313/chapitres/stockage/sql/chapitre-19-stockage-sql-event-sourcing/>Chapitre 19 : Stockage SQL - Event Sourcing Seul</a></li><li class=no-icon><a class=sidebar-nested-link href=http://localhost:1313/chapitres/stockage/sql/chapitre-20-stockage-sql-event-sourcing-cqs/>Chapitre 58 : Stockage SQL - Event Sourcing + CQS</a></li><li class=no-icon><a class=sidebar-nested-link href=http://localhost:1313/chapitres/stockage/sql/chapitre-21-stockage-sql-event-sourcing-cqrs/>Chapitre 59 : Stockage SQL - Event Sourcing + CQRS</a></li></ul></div></li><li class="sidebar-dropdown nested no-icon"><button class=btn>
Stockage API</button><div class=sidebar-submenu><ul><li class=no-icon><a class=sidebar-nested-link href=http://localhost:1313/chapitres/stockage/api/chapitre-26-stockage-api-event-sourcing-cqs/>Chapitre 26 : Stockage API - Event Sourcing + CQS</a></li><li class=no-icon><a class=sidebar-nested-link href=http://localhost:1313/chapitres/stockage/api/chapitre-27-stockage-api-event-sourcing-cqrs/>Chapitre 27 : Stockage API - Event Sourcing + CQRS</a></li><li class=no-icon><a class=sidebar-nested-link href=http://localhost:1313/chapitres/stockage/api/chapitre-22-stockage-api-classique/>Chapitre 60 : Stockage API - Approche Classique</a></li><li class=no-icon><a class=sidebar-nested-link href=http://localhost:1313/chapitres/stockage/api/chapitre-23-stockage-api-cqs/>Chapitre 61 : Stockage API - Approche CQS</a></li><li class=no-icon><a class=sidebar-nested-link href=http://localhost:1313/chapitres/stockage/api/chapitre-24-stockage-api-cqrs/>Chapitre 62 : Stockage API - Approche CQRS</a></li><li class=no-icon><a class=sidebar-nested-link href=http://localhost:1313/chapitres/stockage/api/chapitre-25-stockage-api-event-sourcing/>Chapitre 63 : Stockage API - Event Sourcing Seul</a></li></ul></div></li><li class="sidebar-dropdown nested no-icon"><button class=btn>
Stockage MongoDB</button><div class=sidebar-submenu><ul><li class=no-icon><a class=sidebar-nested-link href=http://localhost:1313/chapitres/stockage/mongodb/chapitre-28-stockage-mongodb-classique/>Chapitre 28 : Stockage MongoDB - Approche Classique</a></li><li class=no-icon><a class=sidebar-nested-link href=http://localhost:1313/chapitres/stockage/mongodb/chapitre-29-stockage-mongodb-cqs/>Chapitre 29 : Stockage MongoDB - Approche CQS</a></li><li class=no-icon><a class=sidebar-nested-link href=http://localhost:1313/chapitres/stockage/mongodb/chapitre-30-stockage-mongodb-cqrs/>Chapitre 30 : Stockage MongoDB - Approche CQRS</a></li><li class=no-icon><a class=sidebar-nested-link href=http://localhost:1313/chapitres/stockage/mongodb/chapitre-31-stockage-mongodb-event-sourcing/>Chapitre 31 : Stockage MongoDB - Event Sourcing</a></li><li class=no-icon><a class=sidebar-nested-link href=http://localhost:1313/chapitres/stockage/mongodb/chapitre-32-stockage-mongodb-event-sourcing-cqs/>Stockage MongoDB - Event Sourcing + CQS</a></li><li class=no-icon><a class=sidebar-nested-link href=http://localhost:1313/chapitres/stockage/mongodb/chapitre-33-stockage-mongodb-event-sourcing-cqrs/>Stockage MongoDB - Event Sourcing + CQRS</a></li></ul></div></li><li class="sidebar-dropdown nested no-icon"><button class=btn>
Stockage ElasticSearch</button><div class=sidebar-submenu><ul><li class=no-icon><a class=sidebar-nested-link href=http://localhost:1313/chapitres/stockage/elasticsearch/chapitre-34-stockage-elasticsearch-classique/>Stockage ElasticSearch - Approche Classique</a></li><li class=no-icon><a class=sidebar-nested-link href=http://localhost:1313/chapitres/stockage/elasticsearch/chapitre-35-stockage-elasticsearch-cqs/>Stockage ElasticSearch - CQS</a></li><li class=no-icon><a class=sidebar-nested-link href=http://localhost:1313/chapitres/stockage/elasticsearch/chapitre-36-stockage-elasticsearch-cqrs/>Stockage ElasticSearch - CQRS</a></li><li class=no-icon><a class=sidebar-nested-link href=http://localhost:1313/chapitres/stockage/elasticsearch/chapitre-37-stockage-elasticsearch-event-sourcing/>Stockage ElasticSearch - Event Sourcing</a></li><li class=no-icon><a class=sidebar-nested-link href=http://localhost:1313/chapitres/stockage/elasticsearch/chapitre-38-stockage-elasticsearch-event-sourcing-cqs/>Stockage ElasticSearch - Event Sourcing + CQS</a></li><li class=no-icon><a class=sidebar-nested-link href=http://localhost:1313/chapitres/stockage/elasticsearch/chapitre-39-stockage-elasticsearch-event-sourcing-cqrs/>Stockage ElasticSearch - Event Sourcing + CQRS</a></li></ul></div></li><li class="sidebar-dropdown nested no-icon"><button class=btn>
Stockage In-Memory</button><div class=sidebar-submenu><ul><li class=no-icon><a class=sidebar-nested-link href=http://localhost:1313/chapitres/stockage/in-memory/chapitre-40-stockage-in-memory-classique/>Stockage In-Memory - Approche Classique</a></li><li class=no-icon><a class=sidebar-nested-link href=http://localhost:1313/chapitres/stockage/in-memory/chapitre-41-stockage-in-memory-cqs/>Stockage In-Memory - CQS</a></li><li class=no-icon><a class=sidebar-nested-link href=http://localhost:1313/chapitres/stockage/in-memory/chapitre-42-stockage-in-memory-cqrs/>Stockage In-Memory - CQRS</a></li><li class=no-icon><a class=sidebar-nested-link href=http://localhost:1313/chapitres/stockage/in-memory/chapitre-43-stockage-in-memory-event-sourcing/>Stockage In-Memory - Event Sourcing</a></li><li class=no-icon><a class=sidebar-nested-link href=http://localhost:1313/chapitres/stockage/in-memory/chapitre-44-stockage-in-memory-event-sourcing-cqs/>Stockage In-Memory - Event Sourcing + CQS</a></li><li class=no-icon><a class=sidebar-nested-link href=http://localhost:1313/chapitres/stockage/in-memory/chapitre-45-stockage-in-memory-event-sourcing-cqrs/>Stockage In-Memory - Event Sourcing + CQRS</a></li></ul></div></li><li class="sidebar-dropdown nested no-icon"><button class=btn>
Stockage Composite pilot√© par Temporal</button><div class=sidebar-submenu><ul><li class=no-icon><a class=sidebar-nested-link href=http://localhost:1313/chapitres/stockage/temporal/chapitre-46-stockage-temporal-classique/>Stockage Temporal - Approche Classique</a></li><li class=no-icon><a class=sidebar-nested-link href=http://localhost:1313/chapitres/stockage/temporal/chapitre-47-stockage-temporal-cqs/>Stockage Temporal - CQS</a></li><li class=no-icon><a class=sidebar-nested-link href=http://localhost:1313/chapitres/stockage/temporal/chapitre-48-stockage-temporal-cqrs/>Stockage Temporal - CQRS</a></li><li class=no-icon><a class=sidebar-nested-link href=http://localhost:1313/chapitres/stockage/temporal/chapitre-49-stockage-temporal-event-sourcing/>Stockage Temporal - Event Sourcing</a></li><li class=no-icon><a class=sidebar-nested-link href=http://localhost:1313/chapitres/stockage/temporal/chapitre-50-stockage-temporal-event-sourcing-cqs/>Stockage Temporal - Event Sourcing + CQS</a></li><li class=no-icon><a class=sidebar-nested-link href=http://localhost:1313/chapitres/stockage/temporal/chapitre-51-stockage-temporal-event-sourcing-cqrs/>Stockage Temporal - Event Sourcing + CQRS</a></li></ul></div></li><li class="sidebar-dropdown nested no-icon"><button class=btn>
Stockage Multi-sources</button><div class=sidebar-submenu><ul><li class=no-icon><a class=sidebar-nested-link href=http://localhost:1313/chapitres/stockage/multi-sources/chapitre-52-stockage-multi-sources-classique/>Stockage Multi-sources - Approche Classique</a></li><li class=no-icon><a class=sidebar-nested-link href=http://localhost:1313/chapitres/stockage/multi-sources/chapitre-53-stockage-multi-sources-cqs/>Stockage Multi-sources - CQS</a></li><li class=no-icon><a class=sidebar-nested-link href=http://localhost:1313/chapitres/stockage/multi-sources/chapitre-54-stockage-multi-sources-cqrs/>Stockage Multi-sources - CQRS</a></li><li class=no-icon><a class=sidebar-nested-link href=http://localhost:1313/chapitres/stockage/multi-sources/chapitre-55-stockage-multi-sources-event-sourcing/>Stockage Multi-sources avec Event Sourcing</a></li><li class=no-icon><a class=sidebar-nested-link href=http://localhost:1313/chapitres/stockage/multi-sources/chapitre-56-stockage-multi-sources-strategies-avancees/>Strat√©gies Avanc√©es de R√©plication Multi-sources</a></li><li class=no-icon><a class=sidebar-nested-link href=http://localhost:1313/chapitres/stockage/multi-sources/chapitre-57-stockage-multi-sources-resolution-conflits/>R√©solution de Conflits Multi-sources</a></li></ul></div></li></ul></div></li><li class="sidebar-dropdown no-icon"><button class=btn>
Chapitres Techniques</button><div class=sidebar-submenu><ul><li class=no-icon><a class=sidebar-nested-link href=http://localhost:1313/chapitres/techniques/chapitre-58-gestion-donnees-validation/>Chapitre 58 : Gestion des Donn√©es et Validation</a></li><li class=no-icon><a class=sidebar-nested-link href=http://localhost:1313/chapitres/techniques/chapitre-59-pagination-performance/>Chapitre 59 : Pagination et Performance</a></li><li class=no-icon><a class=sidebar-nested-link href=http://localhost:1313/chapitres/techniques/chapitre-60-gestion-erreurs-observabilite/>Chapitre 60 : Gestion d'Erreurs et Observabilit√©</a></li><li class=no-icon><a class=sidebar-nested-link href=http://localhost:1313/chapitres/techniques/chapitre-61-tests-qualite/>Chapitre 61 : Tests et Qualit√©</a></li></ul></div></li><li class="sidebar-dropdown no-icon"><button class=btn>
Chapitres Avanc√©s</button><div class=sidebar-submenu><ul><li class=no-icon><a class=sidebar-nested-link href=http://localhost:1313/chapitres/avances/chapitre-62-securite-autorisation/>Chapitre 62 : S√©curit√© et Autorisation - Prot√©ger votre API Platform</a></li><li class=no-icon><a class=sidebar-nested-link href=http://localhost:1313/chapitres/avances/chapitre-63-frontend-integration/>Chapitre 63 : Frontend et Int√©gration - Connecter votre Interface Utilisateur</a></li></ul></div></li></ul></div><ul class="sidebar-footer list-unstyled mb-0"></ul></nav><main class="page-content bg-transparent"><div id=top-header class="top-header d-print-none"><div class="header-bar d-flex justify-content-between"><div class="d-flex align-items-center"><a href=/ class="logo-icon me-3" aria-label=HomePage alt=HomePage><div class=small><svg id="Layer_1" viewBox="0 0 250 250"><path d="m143 39.5c-18 0-18 18-18 18s0-18-18-18H22c-2.76.0-5 2.24-5 5v143c0 2.76 2.24 5 5 5h76c7.2.0 8.64 11.52 8.93 16.13.07 1.05.95 1.87 2 1.87h32.14c1.06.0 1.94-.82 2-1.87.29-4.61 1.73-16.13 8.93-16.13h76c2.76.0 5-2.24 5-5V44.5c0-2.76-2.24-5-5-5h-85zM206 163c0 1.38-1.12 2.5-2.5 2.5H143c-18 0-18 18-18 18s0-18-18-18H46.5c-1.38.0-2.5-1.12-2.5-2.5V69c0-1.38 1.12-2.5 2.5-2.5H98c7.2.0 8.64 11.52 8.93 16.13.07 1.05.95 1.87 2 1.87h32.14c1.06.0 1.94-.82 2-1.87.29-4.61 1.73-16.13 8.93-16.13h51.5c1.38.0 2.5 1.12 2.5 2.5v94z" style="fill:#06f"/></svg></div><div class=big><svg id="Layer_1" viewBox="0 0 250 250"><path d="m143 39.5c-18 0-18 18-18 18s0-18-18-18H22c-2.76.0-5 2.24-5 5v143c0 2.76 2.24 5 5 5h76c7.2.0 8.64 11.52 8.93 16.13.07 1.05.95 1.87 2 1.87h32.14c1.06.0 1.94-.82 2-1.87.29-4.61 1.73-16.13 8.93-16.13h76c2.76.0 5-2.24 5-5V44.5c0-2.76-2.24-5-5-5h-85zM206 163c0 1.38-1.12 2.5-2.5 2.5H143c-18 0-18 18-18 18s0-18-18-18H46.5c-1.38.0-2.5-1.12-2.5-2.5V69c0-1.38 1.12-2.5 2.5-2.5H98c7.2.0 8.64 11.52 8.93 16.13.07 1.05.95 1.87 2 1.87h32.14c1.06.0 1.94-.82 2-1.87.29-4.61 1.73-16.13 8.93-16.13h51.5c1.38.0 2.5 1.12 2.5 2.5v94z" style="fill:#06f"/></svg></div></a><button id=close-sidebar class="btn btn-icon btn-soft">
<span class="material-icons size-20 menu-icon align-middle">menu</span>
</button>
<button id=flexsearch-button class="ms-3 btn btn-soft" data-bs-toggle=collapse data-bs-target=#FlexSearchCollapse aria-expanded=false aria-controls=FlexSearchCollapse>
<span class="material-icons size-20 menu-icon align-middle">search</span>
<span class="flexsearch-button-placeholder ms-1 me-2 d-none d-sm-block">Search</span><div class="d-none d-sm-block"><span class=flexsearch-button-keys><kbd class=flexsearch-button-cmd-key><svg width="44" height="15"><path d="M2.118 11.5A1.519 1.519.0 011 11.042 1.583 1.583.0 011 8.815a1.519 1.519.0 011.113-.458h.715V6.643h-.71A1.519 1.519.0 011 6.185 1.519 1.519.0 01.547 5.071 1.519 1.519.0 011 3.958 1.519 1.519.0 012.118 3.5a1.519 1.519.0 011.114.458A1.519 1.519.0 013.69 5.071v.715H5.4V5.071A1.564 1.564.0 016.976 3.5 1.564 1.564.0 018.547 5.071 1.564 1.564.0 016.976 6.643H6.261V8.357h.715a1.575 1.575.0 011.113 2.685 1.583 1.583.0 01-2.227.0A1.519 1.519.0 015.4 9.929V9.214H3.69v.715a1.519 1.519.0 01-.458 1.113A1.519 1.519.0 012.118 11.5zm0-.857a.714.714.0 00.715-.714V9.214H2.118a.715.715.0 100 1.429zm4.858.0a.715.715.0 100-1.429H6.261v.715a.714.714.0 00.715.714zM3.69 8.357H5.4V6.643H3.69zM2.118 5.786h.715V5.071a.714.714.0 00-.715-.714.715.715.0 00-.5 1.22A.686.686.0 002.118 5.786zm4.143.0h.715a.715.715.0 00.5-1.22.715.715.0 00-1.22.5z" fill="currentColor"/><path d="M12.4 11.475H11.344l3.879-7.95h1.056z" fill="currentColor"/><path d="M25.073 5.384l-.864.576a2.121 2.121.0 00-1.786-.923 2.207 2.207.0 00-2.266 2.326 2.206 2.206.0 002.266 2.325 2.1 2.1.0 001.782-.918l.84.617a3.108 3.108.0 01-2.622 1.293 3.217 3.217.0 01-3.349-3.317 3.217 3.217.0 013.349-3.317A3.046 3.046.0 0125.073 5.384z" fill="currentColor"/><path d="M30.993 5.142h-2.07v5.419H27.891V5.142h-2.07V4.164h5.172z" fill="currentColor"/><path d="M34.67 4.164c1.471.0 2.266.658 2.266 1.851.0 1.087-.832 1.809-2.134 1.855l2.107 2.691h-1.28L33.591 7.87H33.07v2.691H32.038v-6.4zm-1.6.969v1.8h1.572c.832.0 1.22-.3 1.22-.918s-.411-.882-1.22-.882z" fill="currentColor"/><path d="M42.883 10.561H38.31v-6.4h1.033V9.583h3.54z" fill="currentColor"/></svg>
</kbd><kbd class=flexsearch-button-key><svg width="15" height="15"><path d="M5.926 12.279H4.41L9.073 2.721H10.59z" fill="currentColor"/></svg></kbd></span></div></button></div><div class="d-flex align-items-center"><ul class="list-unstyled mb-0"><li class="list-inline-item mb-0"><a href=https://twitter.com/gplanchat alt=twitter rel="noopener noreferrer" target=_blank><div class="btn btn-icon btn-default border-0"><svg width="24" height="24" viewBox="0 0 24 24"><title>Twitter / X</title><path d="M.088.768l9.266 12.39L.029 23.231h2.1l8.163-8.819 6.6 8.819h7.142L14.242 10.145 22.921.768h-2.1L13.3 8.891 7.229.768zM3.174 2.314H6.455L20.942 21.685h-3.28z" fill="currentColor"/></svg></div></a></li></ul></div></div><div class=collapse id=FlexSearchCollapse><div class=flexsearch-container><div class=flexsearch-keymap><li><kbd class=flexsearch-button-cmd-key><svg width="15" height="15" aria-label="Arrow down" role="img"><g fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="1.2"><path d="M7.5 3.5v8m3-3-3 3-3-3"/></g></svg></kbd>
<kbd class=flexsearch-button-cmd-key><svg width="15" height="15" aria-label="Arrow up" role="img"><g fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="1.2"><path d="M7.5 11.5v-8m3 3-3-3-3 3"/></g></svg></kbd>
<span class=flexsearch-key-label>to navigate</span></li><li><kbd class=flexsearch-button-cmd-key><svg width="15" height="15" aria-label="Enter key" role="img"><g fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="1.2"><path d="M12 3.53088v3c0 1-1 2-2 2H4m3 3-3-3 3-3"/></g></svg></kbd>
<span class=flexsearch-key-label>to select</span></li><li><kbd class=flexsearch-button-cmd-key><svg width="15" height="15" aria-label="Escape key" role="img"><g fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="1.2"><path d="M13.6167 8.936c-.1065.3583-.6883.962-1.4875.962-.7993.0-1.653-.9165-1.653-2.1258v-.5678c0-1.2548.7896-2.1016 1.653-2.1016s1.3601.4778 1.4875 1.0724M9 6c-.1352-.4735-.7506-.9219-1.46-.8972-.7092.0246-1.344.57-1.344 1.2166s.4198.8812 1.3445.9805C8.465 7.3992 8.968 7.9337 9 8.5s-.454 1.398-1.4595 1.398C6.6593 9.898 6 9 5.963 8.4851m-1.4748.5368c-.2635.5941-.8099.876-1.5443.876s-1.7073-.6248-1.7073-2.204v-.4603c0-1.0416.721-2.131 1.7073-2.131.9864.0 1.6425 1.031 1.5443 2.2492h-2.956"/></g></svg></kbd>
<span class=flexsearch-key-label>to close</span></li></div><form class="flexsearch position-relative flex-grow-1 ms-2 me-2"><div class="d-flex flex-row"><input id=flexsearch class=form-control type=search placeholder=Search aria-label=Search autocomplete=off>
<button id=hideFlexsearch type=button class="ms-2 btn btn-soft">
cancel</button></div><div id=suggestions class="shadow rounded-1 d-none"></div></form></div></div></div><div class=container-fluid><div class=layout-spacing><div class="d-md-flex justify-content-between align-items-center"><nav aria-label=breadcrumb class="d-inline-block pb-2 mt-1 mt-sm-0"><ul id=breadcrumbs class="breadcrumb bg-transparent mb-0" itemscope itemtype=https://schema.org/BreadcrumbList><li class="breadcrumb-item text-capitalize active" aria-current=page itemprop=itemListElement itemscope itemtype=https://schema.org/ListItem><a itemprop=item href=/chapitres/><i class="material-icons size-20 align-text-bottom" itemprop=name>Home</i>
</a><meta itemprop=position content='1'></li><li class="breadcrumb-item text-capitalize" itemprop=itemListElement itemscope itemtype=https://schema.org/ListItem><a itemprop=item href=/chapitres/fondamentaux/><span itemprop=name>Chapitres Fondamentaux</span>
</a><meta itemprop=position content='2'></li><li class="breadcrumb-item text-capitalize active" itemprop=itemListElement itemscope itemtype=https://schema.org/ListItem><span itemprop=name>Chapitre 6 : Granularit√© des Choix Architecturaux</span>
<meta itemprop=position content='3'></li></ul></nav></div><div class="row flex-xl-nowrap"><div class="docs-toc col-xl-3 d-xl-block"><toc><div class="fw-bold text-uppercase mb-2">On this page</div><nav id=TableOfContents><ul><li><a href=#-objectif-de-ce-chapitre>üéØ Objectif de ce Chapitre</a><ul><li><a href=#mon-probl√®me--comment-choisir-larchitecture-au-bon-niveau->Mon Probl√®me : Comment Choisir l&rsquo;Architecture au Bon Niveau ?</a></li><li><a href=#la-granularit√©--mon-principe-de-coh√©rence>La Granularit√© : Mon Principe de Coh√©rence</a></li></ul></li><li><a href=#quest-ce-que-la-granularit√©-architecturale->Qu&rsquo;est-ce que la Granularit√© Architecturale ?</a><ul><li><a href=#le-concept-fondamental>Le Concept Fondamental</a></li><li><a href=#les-3-niveaux-de-granularit√©>Les 3 Niveaux de Granularit√©</a></li></ul></li><li><a href=#mon-processus-de-d√©cision-avec-gyroscops>Mon Processus de D√©cision avec Gyroscops</a><ul><li><a href=#√©tape-1--d√©finir-larchitecture-globale>√âtape 1 : D√©finir l&rsquo;Architecture Globale</a></li><li><a href=#√©tape-2--choisir-larchitecture-par-bounded-context>√âtape 2 : Choisir l&rsquo;Architecture par Bounded Context</a></li><li><a href=#√©tape-3--choisir-larchitecture-par-agr√©gat>√âtape 3 : Choisir l&rsquo;Architecture par Agr√©gat</a></li></ul></li><li><a href=#les-principes-de-coh√©rence>Les Principes de Coh√©rence</a><ul><li><a href=#1-principe-de-coh√©rence-globale>1. <strong>Principe de Coh√©rence Globale</strong></a></li><li><a href=#2-principe-de-coh√©rence-par-bounded-context>2. <strong>Principe de Coh√©rence par Bounded Context</strong></a></li><li><a href=#3-principe-de-coh√©rence-par-agr√©gat>3. <strong>Principe de Coh√©rence par Agr√©gat</strong></a></li></ul></li><li><a href=#les-pi√®ges-√†-√©viter>Les Pi√®ges √† √âviter</a><ul><li><a href=#1-uniformit√©-excessive>1. <strong>Uniformit√© Excessive</strong></a></li><li><a href=#2-incoh√©rence-excessive>2. <strong>Incoh√©rence Excessive</strong></a></li><li><a href=#3-granularit√©-inappropri√©e>3. <strong>Granularit√© Inappropri√©e</strong></a></li><li><a href=#4-ignorer-l>4. <strong>Ignorer l‚Äô√âvolution</strong></a></li></ul></li><li><a href=#l√©volution-de-la-granularit√©>L&rsquo;√âvolution de la Granularit√©</a><ul><li><a href=#phase-1--architecture-uniforme>Phase 1 : Architecture Uniforme</a></li><li><a href=#phase-2--diff√©renciation-par-bounded-context>Phase 2 : Diff√©renciation par Bounded Context</a></li><li><a href=#phase-3--diff√©renciation-par-agr√©gat>Phase 3 : Diff√©renciation par Agr√©gat</a></li><li><a href=#phase-4--architecture-hybride>Phase 4 : Architecture Hybride</a></li></ul></li><li><a href=#-impl√©mentation-concr√®te-dans-le-projet-gyroscops-cloud>üèóÔ∏è Impl√©mentation Concr√®te dans le Projet Gyroscops Cloud</a><ul><li><a href=#granularit√©-appliqu√©e-√†-gyroscops-cloud>Granularit√© Appliqu√©e √† Gyroscops Cloud</a></li><li><a href=#r√©f√©rences-aux-adr-du-projet-gyroscops-cloud>R√©f√©rences aux ADR du Projet Gyroscops Cloud</a></li></ul></li></ul></nav></toc></div><div class="docs-toc-mobile d-print-none d-xl-none"><button id=toc-dropdown-btn class="btn-secondary dropdown-toggle" type=button data-bs-toggle=dropdown data-bs-offset=0,0 aria-expanded=false>
Table of Contents</button><nav id=toc-mobile><ul class=dropdown-menu><li><a href=#-objectif-de-ce-chapitre>üéØ Objectif de ce Chapitre</a><ul><li><a href=#mon-probl√®me--comment-choisir-larchitecture-au-bon-niveau->Mon Probl√®me : Comment Choisir l&rsquo;Architecture au Bon Niveau ?</a></li><li><a href=#la-granularit√©--mon-principe-de-coh√©rence>La Granularit√© : Mon Principe de Coh√©rence</a></li></ul></li><li><a href=#quest-ce-que-la-granularit√©-architecturale->Qu&rsquo;est-ce que la Granularit√© Architecturale ?</a><ul><li><a href=#le-concept-fondamental>Le Concept Fondamental</a></li><li><a href=#les-3-niveaux-de-granularit√©>Les 3 Niveaux de Granularit√©</a></li></ul></li><li><a href=#mon-processus-de-d√©cision-avec-gyroscops>Mon Processus de D√©cision avec Gyroscops</a><ul><li><a href=#√©tape-1--d√©finir-larchitecture-globale>√âtape 1 : D√©finir l&rsquo;Architecture Globale</a></li><li><a href=#√©tape-2--choisir-larchitecture-par-bounded-context>√âtape 2 : Choisir l&rsquo;Architecture par Bounded Context</a></li><li><a href=#√©tape-3--choisir-larchitecture-par-agr√©gat>√âtape 3 : Choisir l&rsquo;Architecture par Agr√©gat</a></li></ul></li><li><a href=#les-principes-de-coh√©rence>Les Principes de Coh√©rence</a><ul><li><a href=#1-principe-de-coh√©rence-globale>1. <strong>Principe de Coh√©rence Globale</strong></a></li><li><a href=#2-principe-de-coh√©rence-par-bounded-context>2. <strong>Principe de Coh√©rence par Bounded Context</strong></a></li><li><a href=#3-principe-de-coh√©rence-par-agr√©gat>3. <strong>Principe de Coh√©rence par Agr√©gat</strong></a></li></ul></li><li><a href=#les-pi√®ges-√†-√©viter>Les Pi√®ges √† √âviter</a><ul><li><a href=#1-uniformit√©-excessive>1. <strong>Uniformit√© Excessive</strong></a></li><li><a href=#2-incoh√©rence-excessive>2. <strong>Incoh√©rence Excessive</strong></a></li><li><a href=#3-granularit√©-inappropri√©e>3. <strong>Granularit√© Inappropri√©e</strong></a></li><li><a href=#4-ignorer-l>4. <strong>Ignorer l‚Äô√âvolution</strong></a></li></ul></li><li><a href=#l√©volution-de-la-granularit√©>L&rsquo;√âvolution de la Granularit√©</a><ul><li><a href=#phase-1--architecture-uniforme>Phase 1 : Architecture Uniforme</a></li><li><a href=#phase-2--diff√©renciation-par-bounded-context>Phase 2 : Diff√©renciation par Bounded Context</a></li><li><a href=#phase-3--diff√©renciation-par-agr√©gat>Phase 3 : Diff√©renciation par Agr√©gat</a></li><li><a href=#phase-4--architecture-hybride>Phase 4 : Architecture Hybride</a></li></ul></li><li><a href=#-impl√©mentation-concr√®te-dans-le-projet-gyroscops-cloud>üèóÔ∏è Impl√©mentation Concr√®te dans le Projet Gyroscops Cloud</a><ul><li><a href=#granularit√©-appliqu√©e-√†-gyroscops-cloud>Granularit√© Appliqu√©e √† Gyroscops Cloud</a></li><li><a href=#r√©f√©rences-aux-adr-du-projet-gyroscops-cloud>R√©f√©rences aux ADR du Projet Gyroscops Cloud</a></li></ul></li></ul></nav></div><div class="docs-content col-12 col-xl-9 mt-0"><div class="mb-0 d-flex"><h1 class="content-title mb-0">Chapitre 6 : Granularit√© des Choix Architecturaux
<span class="badge bg-default fs-6 mb-1 align-middle">DRAFT</span></h1></div><div id=content class=main-content><div data-prismjs-copy data-prismjs-copy-success data-prismjs-copy-error><h2 id=-objectif-de-ce-chapitre>üéØ Objectif de ce Chapitre <a href=#-objectif-de-ce-chapitre class=anchor aria-hidden=true><i class="material-icons align-middle">link</i></a></h2><h3 id=mon-probl√®me--comment-choisir-larchitecture-au-bon-niveau->Mon Probl√®me : Comment Choisir l&rsquo;Architecture au Bon Niveau ? <a href=#mon-probl%c3%a8me--comment-choisir-larchitecture-au-bon-niveau- class=anchor aria-hidden=true><i class="material-icons align-middle">link</i></a></h3><p><strong>Voici ce qui s&rsquo;est pass√© avec Gyroscops</strong> : J&rsquo;avais compris la complexit√© et choisi les patterns appropri√©s. <strong>Parfait !</strong> J&rsquo;avais une vision claire de l&rsquo;architecture.</p><p><strong>Mais attendez&mldr;</strong> Quand j&rsquo;ai voulu appliquer ces patterns, j&rsquo;√©tais perdu. CQRS partout ? Event Sourcing pour tout ? Architecture classique pour certains composants ? Comment d√©cider au niveau de chaque composant ?</p><p><strong>Soudain, je r√©alisais que j&rsquo;appliquais les patterns de mani√®re uniforme !</strong> Il me fallait un cadre pour choisir l&rsquo;architecture au bon niveau de granularit√©.</p><h3 id=la-granularit√©--mon-principe-de-coh√©rence>La Granularit√© : Mon Principe de Coh√©rence <a href=#la-granularit%c3%a9--mon-principe-de-coh%c3%a9rence class=anchor aria-hidden=true><i class="material-icons align-middle">link</i></a></h3><p>La granularit√© des choix architecturaux m&rsquo;a permis de :</p><ul><li><strong>Choisir</strong> l&rsquo;architecture appropri√©e √† chaque niveau</li><li><strong>Maintenir</strong> la coh√©rence dans le syst√®me</li><li><strong>√âviter</strong> la surcharge cognitive</li><li><strong>Optimiser</strong> l&rsquo;effort de d√©veloppement</li></ul><h2 id=quest-ce-que-la-granularit√©-architecturale->Qu&rsquo;est-ce que la Granularit√© Architecturale ? <a href=#quest-ce-que-la-granularit%c3%a9-architecturale- class=anchor aria-hidden=true><i class="material-icons align-middle">link</i></a></h2><h3 id=le-concept-fondamental>Le Concept Fondamental <a href=#le-concept-fondamental class=anchor aria-hidden=true><i class="material-icons align-middle">link</i></a></h3><p>La granularit√© architecturale est le niveau auquel on applique les choix architecturaux. <strong>L&rsquo;id√©e</strong> : On peut choisir l&rsquo;architecture globalement, par Bounded Context, ou par Agr√©gat selon les besoins.</p><p><strong>Avec Gyroscops, voici comment j&rsquo;ai appliqu√© cette granularit√©</strong> :</p><h3 id=les-3-niveaux-de-granularit√©>Les 3 Niveaux de Granularit√© <a href=#les-3-niveaux-de-granularit%c3%a9 class=anchor aria-hidden=true><i class="material-icons align-middle">link</i></a></h3><h4 id=1-choix-globaux---larchitecture-g√©n√©rale>1. <strong>Choix Globaux</strong> - L&rsquo;Architecture G√©n√©rale <a href=#1-choix-globaux---larchitecture-g%c3%a9n%c3%a9rale class=anchor aria-hidden=true><i class="material-icons align-middle">link</i></a></h4><p><strong>Exemple concret avec Gyroscops</strong> :</p><ul><li><strong>Architecture g√©n√©rale</strong> : Microservices avec API Gateway</li><li><strong>Communication</strong> : √âv√©nements asynchrones</li><li><strong>Stockage</strong> : Bases de donn√©es par service</li><li><strong>D√©ploiement</strong> : Containers avec Kubernetes</li></ul><p><strong>Pourquoi c&rsquo;est important ?</strong> Les choix globaux d√©finissent l&rsquo;architecture g√©n√©rale du syst√®me.</p><h4 id=2-choix-par-bounded-context---larchitecture-par-domaine>2. <strong>Choix par Bounded Context</strong> - L&rsquo;Architecture par Domaine <a href=#2-choix-par-bounded-context---larchitecture-par-domaine class=anchor aria-hidden=true><i class="material-icons align-middle">link</i></a></h4><p><strong>Exemple concret avec Gyroscops</strong> :</p><ul><li><strong>Authentication</strong> : Architecture classique (CRUD simple)</li><li><strong>Accounting</strong> : CQRS avec Event Sourcing (r√®gles complexes)</li><li><strong>Cloud Management</strong> : Architecture classique (gestion d&rsquo;infrastructure)</li><li><strong>GenAI</strong> : Architecture √©v√©nementielle (traitement asynchrone)</li></ul><p><strong>Pourquoi c&rsquo;est crucial ?</strong> Chaque Bounded Context a ses propres besoins et contraintes.</p><h4 id=3-choix-par-agr√©gat---larchitecture-fine>3. <strong>Choix par Agr√©gat</strong> - L&rsquo;Architecture Fine <a href=#3-choix-par-agr%c3%a9gat---larchitecture-fine class=anchor aria-hidden=true><i class="material-icons align-middle">link</i></a></h4><p><strong>Exemple concret avec Gyroscops</strong> :</p><ul><li><strong>User</strong> : Architecture classique (CRUD simple)</li><li><strong>Payment</strong> : CQRS avec Event Sourcing (r√®gles complexes)</li><li><strong>Workflow</strong> : Architecture √©v√©nementielle (traitement asynchrone)</li><li><strong>Integration</strong> : Architecture classique (gestion d&rsquo;√©tat)</li></ul><p><strong>Pourquoi c&rsquo;est essentiel ?</strong> Chaque Agr√©gat a ses propres caract√©ristiques et besoins.</p><h2 id=mon-processus-de-d√©cision-avec-gyroscops>Mon Processus de D√©cision avec Gyroscops <a href=#mon-processus-de-d%c3%a9cision-avec-gyroscops class=anchor aria-hidden=true><i class="material-icons align-middle">link</i></a></h2><h3 id=√©tape-1--d√©finir-larchitecture-globale>√âtape 1 : D√©finir l&rsquo;Architecture Globale <a href=#%c3%a9tape-1--d%c3%a9finir-larchitecture-globale class=anchor aria-hidden=true><i class="material-icons align-middle">link</i></a></h3><p><strong>Voici comment j&rsquo;ai d√©fini l&rsquo;architecture globale de Gyroscops</strong> :</p><p><strong>Contraintes globales</strong> :</p><ul><li><strong>√âquipe</strong> : 8 d√©veloppeurs</li><li><strong>Performance</strong> : 1000 requ√™tes/seconde</li><li><strong>Disponibilit√©</strong> : 99.9%</li><li><strong>√âvolutivit√©</strong> : Croissance de 50% par an</li></ul><p><strong>Architecture globale choisie</strong> :</p><ul><li><strong>Microservices</strong> : √âquipe autonome, d√©ploiement ind√©pendant</li><li><strong>API Gateway</strong> : Point d&rsquo;entr√©e unique, s√©curit√© centralis√©e</li><li><strong>Event Bus</strong> : Communication asynchrone, d√©couplage</li><li><strong>Containers</strong> : D√©ploiement standardis√©, scalabilit√©</li></ul><p><strong>R√©sultat</strong> : Architecture globale coh√©rente et √©volutive.</p><h3 id=√©tape-2--choisir-larchitecture-par-bounded-context>√âtape 2 : Choisir l&rsquo;Architecture par Bounded Context <a href=#%c3%a9tape-2--choisir-larchitecture-par-bounded-context class=anchor aria-hidden=true><i class="material-icons align-middle">link</i></a></h3><p><strong>Voici comment j&rsquo;ai choisi l&rsquo;architecture de chaque Bounded Context</strong> :</p><h4 id=authentication-context>Authentication Context <a href=#authentication-context class=anchor aria-hidden=true><i class="material-icons align-middle">link</i></a></h4><p><strong>Caract√©ristiques</strong> :</p><ul><li>CRUD simple (inscription, connexion, profil)</li><li>R√®gles m√©tier basiques</li><li>Peu d&rsquo;int√©grations</li><li>√âquipe : 1 d√©veloppeur</li></ul><p><strong>Architecture choisie</strong> : Classique</p><ul><li>Mod√®le classique avec ORM</li><li>Base de donn√©es relationnelle</li><li>API REST simple</li></ul><p><strong>Justification</strong> : Complexit√© faible, pas besoin de patterns avanc√©s.</p><h4 id=accounting-context>Accounting Context <a href=#accounting-context class=anchor aria-hidden=true><i class="material-icons align-middle">link</i></a></h4><p><strong>Caract√©ristiques</strong> :</p><ul><li>R√®gles m√©tier tr√®s complexes</li><li>Audit complet n√©cessaire</li><li>Conformit√© r√©glementaire</li><li>√âquipe : 2 d√©veloppeurs</li></ul><p><strong>Architecture choisie</strong> : CQRS avec Event Sourcing</p><ul><li>S√©paration lecture/√©criture</li><li>Stockage des √©v√©nements</li><li>Projections multiples</li></ul><p><strong>Justification</strong> : Complexit√© √©lev√©e, audit critique.</p><h4 id=cloud-management-context>Cloud Management Context <a href=#cloud-management-context class=anchor aria-hidden=true><i class="material-icons align-middle">link</i></a></h4><p><strong>Caract√©ristiques</strong> :</p><ul><li>Gestion d&rsquo;infrastructure</li><li>R√®gles m√©tier moyennes</li><li>Int√©grations multiples</li><li>√âquipe : 2 d√©veloppeurs</li></ul><p><strong>Architecture choisie</strong> : Classique avec √©v√©nements</p><ul><li>Mod√®le classique avec ORM</li><li>Event Bus pour les notifications</li><li>Base de donn√©es relationnelle</li></ul><p><strong>Justification</strong> : Complexit√© moyenne, besoin d&rsquo;√©v√©nements.</p><h4 id=genai-context>GenAI Context <a href=#genai-context class=anchor aria-hidden=true><i class="material-icons align-middle">link</i></a></h4><p><strong>Caract√©ristiques</strong> :</p><ul><li>Traitement asynchrone</li><li>R√®gles m√©tier moyennes</li><li>Int√©grations multiples</li><li>√âquipe : 3 d√©veloppeurs</li></ul><p><strong>Architecture choisie</strong> : √âv√©nementielle</p><ul><li>Event Bus pour le traitement</li><li>Queues pour l&rsquo;asynchrone</li><li>Base de donn√©es relationnelle</li></ul><p><strong>Justification</strong> : Traitement asynchrone, besoin d&rsquo;√©v√©nements.</p><h3 id=√©tape-3--choisir-larchitecture-par-agr√©gat>√âtape 3 : Choisir l&rsquo;Architecture par Agr√©gat <a href=#%c3%a9tape-3--choisir-larchitecture-par-agr%c3%a9gat class=anchor aria-hidden=true><i class="material-icons align-middle">link</i></a></h3><p><strong>Voici comment j&rsquo;ai choisi l&rsquo;architecture de chaque Agr√©gat</strong> :</p><h4 id=user-aggregate>User Aggregate <a href=#user-aggregate class=anchor aria-hidden=true><i class="material-icons align-middle">link</i></a></h4><p><strong>Caract√©ristiques</strong> :</p><ul><li>CRUD simple</li><li>R√®gles m√©tier basiques</li><li>Pas d&rsquo;int√©grations complexes</li></ul><p><strong>Architecture choisie</strong> : Classique</p><ul><li>Mod√®le classique avec ORM</li><li>Base de donn√©es relationnelle</li><li>API REST simple</li></ul><p><strong>Justification</strong> : Complexit√© faible, pas besoin de patterns avanc√©s.</p><h4 id=payment-aggregate>Payment Aggregate <a href=#payment-aggregate class=anchor aria-hidden=true><i class="material-icons align-middle">link</i></a></h4><p><strong>Caract√©ristiques</strong> :</p><ul><li>R√®gles m√©tier tr√®s complexes</li><li>Audit complet n√©cessaire</li><li>Conformit√© r√©glementaire</li></ul><p><strong>Architecture choisie</strong> : CQRS avec Event Sourcing</p><ul><li>S√©paration lecture/√©criture</li><li>Stockage des √©v√©nements</li><li>Projections multiples</li></ul><p><strong>Justification</strong> : Complexit√© √©lev√©e, audit critique.</p><h4 id=workflow-aggregate>Workflow Aggregate <a href=#workflow-aggregate class=anchor aria-hidden=true><i class="material-icons align-middle">link</i></a></h4><p><strong>Caract√©ristiques</strong> :</p><ul><li>Traitement asynchrone</li><li>R√®gles m√©tier moyennes</li><li>Int√©grations multiples</li></ul><p><strong>Architecture choisie</strong> : √âv√©nementielle</p><ul><li>Event Bus pour le traitement</li><li>Queues pour l&rsquo;asynchrone</li><li>Base de donn√©es relationnelle</li></ul><p><strong>Justification</strong> : Traitement asynchrone, besoin d&rsquo;√©v√©nements.</p><h4 id=integration-aggregate>Integration Aggregate <a href=#integration-aggregate class=anchor aria-hidden=true><i class="material-icons align-middle">link</i></a></h4><p><strong>Caract√©ristiques</strong> :</p><ul><li>Gestion d&rsquo;√©tat</li><li>R√®gles m√©tier moyennes</li><li>Int√©grations multiples</li></ul><p><strong>Architecture choisie</strong> : Classique avec √©v√©nements</p><ul><li>Mod√®le classique avec ORM</li><li>Event Bus pour les notifications</li><li>Base de donn√©es relationnelle</li></ul><p><strong>Justification</strong> : Complexit√© moyenne, besoin d&rsquo;√©v√©nements.</p><h2 id=les-principes-de-coh√©rence>Les Principes de Coh√©rence <a href=#les-principes-de-coh%c3%a9rence class=anchor aria-hidden=true><i class="material-icons align-middle">link</i></a></h2><h3 id=1-principe-de-coh√©rence-globale>1. <strong>Principe de Coh√©rence Globale</strong> <a href=#1-principe-de-coh%c3%a9rence-globale class=anchor aria-hidden=true><i class="material-icons align-middle">link</i></a></h3><p><strong>Avec Gyroscops</strong> : Tous les Bounded Contexts partagent la m√™me architecture globale :</p><ul><li>Microservices avec API Gateway</li><li>Communication par √©v√©nements</li><li>D√©ploiement en containers</li></ul><p><strong>Pourquoi c&rsquo;est important ?</strong> La coh√©rence globale facilite la maintenance et l&rsquo;√©volution.</p><h3 id=2-principe-de-coh√©rence-par-bounded-context>2. <strong>Principe de Coh√©rence par Bounded Context</strong> <a href=#2-principe-de-coh%c3%a9rence-par-bounded-context class=anchor aria-hidden=true><i class="material-icons align-middle">link</i></a></h3><p><strong>Avec Gyroscops</strong> : Chaque Bounded Context a une architecture coh√©rente :</p><ul><li>Authentication : Architecture classique partout</li><li>Accounting : CQRS avec Event Sourcing partout</li><li>Cloud Management : Architecture classique avec √©v√©nements partout</li><li>GenAI : Architecture √©v√©nementielle partout</li></ul><p><strong>Pourquoi c&rsquo;est crucial ?</strong> La coh√©rence par Bounded Context facilite la compr√©hension et la maintenance.</p><h3 id=3-principe-de-coh√©rence-par-agr√©gat>3. <strong>Principe de Coh√©rence par Agr√©gat</strong> <a href=#3-principe-de-coh%c3%a9rence-par-agr%c3%a9gat class=anchor aria-hidden=true><i class="material-icons align-middle">link</i></a></h3><p><strong>Avec Gyroscops</strong> : Chaque Agr√©gat a une architecture coh√©rente :</p><ul><li>User : Architecture classique partout</li><li>Payment : CQRS avec Event Sourcing partout</li><li>Workflow : Architecture √©v√©nementielle partout</li><li>Integration : Architecture classique avec √©v√©nements partout</li></ul><p><strong>Pourquoi c&rsquo;est essentiel ?</strong> La coh√©rence par Agr√©gat facilite la compr√©hension et la maintenance.</p><h2 id=les-pi√®ges-√†-√©viter>Les Pi√®ges √† √âviter <a href=#les-pi%c3%a8ges-%c3%a0-%c3%a9viter class=anchor aria-hidden=true><i class="material-icons align-middle">link</i></a></h2><h3 id=1-uniformit√©-excessive>1. <strong>Uniformit√© Excessive</strong> <a href=#1-uniformit%c3%a9-excessive class=anchor aria-hidden=true><i class="material-icons align-middle">link</i></a></h3><p><strong>‚ùå Mauvais</strong> : CQRS partout, m√™me pour les CRUD simples
<strong>‚úÖ Bon</strong> : CQRS seulement l√† o√π c&rsquo;est justifi√©</p><p><strong>Pourquoi c&rsquo;est important ?</strong> L&rsquo;uniformit√© excessive complique inutilement le syst√®me.</p><h3 id=2-incoh√©rence-excessive>2. <strong>Incoh√©rence Excessive</strong> <a href=#2-incoh%c3%a9rence-excessive class=anchor aria-hidden=true><i class="material-icons align-middle">link</i></a></h3><p><strong>‚ùå Mauvais</strong> : Chaque composant avec une architecture diff√©rente
<strong>‚úÖ Bon</strong> : Architecture coh√©rente par niveau de granularit√©</p><p><strong>Pourquoi c&rsquo;est crucial ?</strong> L&rsquo;incoh√©rence excessive complique la maintenance.</p><h3 id=3-granularit√©-inappropri√©e>3. <strong>Granularit√© Inappropri√©e</strong> <a href=#3-granularit%c3%a9-inappropri%c3%a9e class=anchor aria-hidden=true><i class="material-icons align-middle">link</i></a></h3><p><strong>‚ùå Mauvais</strong> : Choisir l&rsquo;architecture au niveau de chaque m√©thode
<strong>‚úÖ Bon</strong> : Choisir l&rsquo;architecture au niveau appropri√© (global, Bounded Context, Agr√©gat)</p><p><strong>Pourquoi c&rsquo;est essentiel ?</strong> La granularit√© inappropri√©e complique la d√©cision.</p><h3 id=4-ignorer-l>4. <strong>Ignorer l&rsquo;√âvolution</strong> <a href=#4-ignorer-l class=anchor aria-hidden=true><i class="material-icons align-middle">link</i></a></h3><p><strong>‚ùå Mauvais</strong> : Architecture fig√©e, pas d&rsquo;√©volution possible
<strong>‚úÖ Bon</strong> : Architecture √©volutive, adaptation selon les besoins</p><p><strong>Pourquoi c&rsquo;est la cl√© ?</strong> L&rsquo;architecture doit √©voluer avec les besoins.</p><h2 id=l√©volution-de-la-granularit√©>L&rsquo;√âvolution de la Granularit√© <a href=#l%c3%a9volution-de-la-granularit%c3%a9 class=anchor aria-hidden=true><i class="material-icons align-middle">link</i></a></h2><h3 id=phase-1--architecture-uniforme>Phase 1 : Architecture Uniforme <a href=#phase-1--architecture-uniforme class=anchor aria-hidden=true><i class="material-icons align-middle">link</i></a></h3><p><strong>Avec Gyroscops</strong> : Au d√©but, j&rsquo;ai appliqu√© la m√™me architecture partout :</p><ul><li>Architecture classique pour tout</li><li>Coh√©rence maximale</li><li>Simplicit√© de maintenance</li></ul><p><strong>R√©sultat</strong> : D√©veloppement rapide, maintenance facile.</p><h3 id=phase-2--diff√©renciation-par-bounded-context>Phase 2 : Diff√©renciation par Bounded Context <a href=#phase-2--diff%c3%a9renciation-par-bounded-context class=anchor aria-hidden=true><i class="material-icons align-middle">link</i></a></h3><p><strong>Avec Gyroscops</strong> : Quand la complexit√© a augment√©, j&rsquo;ai diff√©renci√© par Bounded Context :</p><ul><li>Authentication : Architecture classique</li><li>Accounting : CQRS avec Event Sourcing</li><li>Cloud Management : Architecture classique avec √©v√©nements</li><li>GenAI : Architecture √©v√©nementielle</li></ul><p><strong>R√©sultat</strong> : Architecture adapt√©e aux besoins de chaque domaine.</p><h3 id=phase-3--diff√©renciation-par-agr√©gat>Phase 3 : Diff√©renciation par Agr√©gat <a href=#phase-3--diff%c3%a9renciation-par-agr%c3%a9gat class=anchor aria-hidden=true><i class="material-icons align-middle">link</i></a></h3><p><strong>Avec Gyroscops</strong> : Quand la complexit√© a encore augment√©, j&rsquo;ai diff√©renci√© par Agr√©gat :</p><ul><li>User : Architecture classique</li><li>Payment : CQRS avec Event Sourcing</li><li>Workflow : Architecture √©v√©nementielle</li><li>Integration : Architecture classique avec √©v√©nements</li></ul><p><strong>R√©sultat</strong> : Architecture optimis√©e pour chaque composant.</p><h3 id=phase-4--architecture-hybride>Phase 4 : Architecture Hybride <a href=#phase-4--architecture-hybride class=anchor aria-hidden=true><i class="material-icons align-middle">link</i></a></h3><p><strong>Avec Gyroscops</strong> : Maintenant, j&rsquo;ai une architecture hybride :</p><ul><li>Choix globaux : Microservices, Event Bus, Containers</li><li>Choix par Bounded Context : Architecture adapt√©e au domaine</li><li>Choix par Agr√©gat : Architecture adapt√©e au composant</li></ul><p><strong>R√©sultat</strong> : Architecture optimale √† tous les niveaux.</p><h2 id=-impl√©mentation-concr√®te-dans-le-projet-gyroscops-cloud>üèóÔ∏è Impl√©mentation Concr√®te dans le Projet Gyroscops Cloud <a href=#-impl%c3%a9mentation-concr%c3%a8te-dans-le-projet-gyroscops-cloud class=anchor aria-hidden=true><i class="material-icons align-middle">link</i></a></h2><h3 id=granularit√©-appliqu√©e-√†-gyroscops-cloud>Granularit√© Appliqu√©e √† Gyroscops Cloud <a href=#granularit%c3%a9-appliqu%c3%a9e-%c3%a0-gyroscops-cloud class=anchor aria-hidden=true><i class="material-icons align-middle">link</i></a></h3><p>Le Gyroscops Cloud applique concr√®tement les principes de granularit√© √† travers son architecture et ses ADR (Architecture Decision Records). Voici comment :</p><h4 id=granularit√©-par-domaine>Granularit√© par Domaine <a href=#granularit%c3%a9-par-domaine class=anchor aria-hidden=true><i class="material-icons align-middle">link</i></a></h4><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-php data-lang=php><span style=display:flex><span><span style=color:#75715e>// ‚úÖ Granularit√© par Domaine Gyroscops Cloud (Projet Gyroscops Cloud)
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>final</span> <span style=color:#66d9ef>class</span> <span style=color:#a6e22e>HiveDomainGranularity</span>
</span></span><span style=display:flex><span>{
</span></span><span style=display:flex><span>    <span style=color:#75715e>// Domaine d&#39;Authentification
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>const</span> <span style=color:#66d9ef>AUTHENTICATION_DOMAIN</span> <span style=color:#f92672>=</span> <span style=color:#e6db74>&#39;authentication&#39;</span>;
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>const</span> <span style=color:#66d9ef>USER_MANAGEMENT_DOMAIN</span> <span style=color:#f92672>=</span> <span style=color:#e6db74>&#39;user_management&#39;</span>;
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>const</span> <span style=color:#66d9ef>AUTHORIZATION_DOMAIN</span> <span style=color:#f92672>=</span> <span style=color:#e6db74>&#39;authorization&#39;</span>;
</span></span><span style=display:flex><span>    
</span></span><span style=display:flex><span>    <span style=color:#75715e>// Domaine de Paiement
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>const</span> <span style=color:#66d9ef>PAYMENT_DOMAIN</span> <span style=color:#f92672>=</span> <span style=color:#e6db74>&#39;payment&#39;</span>;
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>const</span> <span style=color:#66d9ef>SUBSCRIPTION_DOMAIN</span> <span style=color:#f92672>=</span> <span style=color:#e6db74>&#39;subscription&#39;</span>;
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>const</span> <span style=color:#66d9ef>BILLING_DOMAIN</span> <span style=color:#f92672>=</span> <span style=color:#e6db74>&#39;billing&#39;</span>;
</span></span><span style=display:flex><span>    
</span></span><span style=display:flex><span>    <span style=color:#75715e>// Domaine d&#39;Int√©gration
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>const</span> <span style=color:#66d9ef>INTEGRATION_DOMAIN</span> <span style=color:#f92672>=</span> <span style=color:#e6db74>&#39;integration&#39;</span>;
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>const</span> <span style=color:#66d9ef>WORKFLOW_DOMAIN</span> <span style=color:#f92672>=</span> <span style=color:#e6db74>&#39;workflow&#39;</span>;
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>const</span> <span style=color:#66d9ef>CONNECTOR_DOMAIN</span> <span style=color:#f92672>=</span> <span style=color:#e6db74>&#39;connector&#39;</span>;
</span></span><span style=display:flex><span>    
</span></span><span style=display:flex><span>    <span style=color:#75715e>// Domaine de Monitoring
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>const</span> <span style=color:#66d9ef>MONITORING_DOMAIN</span> <span style=color:#f92672>=</span> <span style=color:#e6db74>&#39;monitoring&#39;</span>;
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>const</span> <span style=color:#66d9ef>METRICS_DOMAIN</span> <span style=color:#f92672>=</span> <span style=color:#e6db74>&#39;metrics&#39;</span>;
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>const</span> <span style=color:#66d9ef>ALERTING_DOMAIN</span> <span style=color:#f92672>=</span> <span style=color:#e6db74>&#39;alerting&#39;</span>;
</span></span><span style=display:flex><span>}</span></span></code></pre></div><h4 id=granularit√©-par-bounded-context>Granularit√© par Bounded Context <a href=#granularit%c3%a9-par-bounded-context class=anchor aria-hidden=true><i class="material-icons align-middle">link</i></a></h4><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-php data-lang=php><span style=display:flex><span><span style=color:#75715e>// ‚úÖ Granularit√© par Bounded Context Gyroscops Cloud (Projet Gyroscops Cloud)
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>final</span> <span style=color:#66d9ef>class</span> <span style=color:#a6e22e>HiveBoundedContextGranularity</span>
</span></span><span style=display:flex><span>{
</span></span><span style=display:flex><span>    <span style=color:#75715e>// Bounded Context d&#39;Authentification
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>const</span> <span style=color:#66d9ef>AUTHENTICATION_CONTEXT</span> <span style=color:#f92672>=</span> <span style=color:#e6db74>&#39;authentication_context&#39;</span>;
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>const</span> <span style=color:#66d9ef>USER_CONTEXT</span> <span style=color:#f92672>=</span> <span style=color:#e6db74>&#39;user_context&#39;</span>;
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>const</span> <span style=color:#66d9ef>PERMISSION_CONTEXT</span> <span style=color:#f92672>=</span> <span style=color:#e6db74>&#39;permission_context&#39;</span>;
</span></span><span style=display:flex><span>    
</span></span><span style=display:flex><span>    <span style=color:#75715e>// Bounded Context de Paiement
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>const</span> <span style=color:#66d9ef>PAYMENT_CONTEXT</span> <span style=color:#f92672>=</span> <span style=color:#e6db74>&#39;payment_context&#39;</span>;
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>const</span> <span style=color:#66d9ef>SUBSCRIPTION_CONTEXT</span> <span style=color:#f92672>=</span> <span style=color:#e6db74>&#39;subscription_context&#39;</span>;
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>const</span> <span style=color:#66d9ef>BILLING_CONTEXT</span> <span style=color:#f92672>=</span> <span style=color:#e6db74>&#39;billing_context&#39;</span>;
</span></span><span style=display:flex><span>    
</span></span><span style=display:flex><span>    <span style=color:#75715e>// Bounded Context d&#39;Int√©gration
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>const</span> <span style=color:#66d9ef>INTEGRATION_CONTEXT</span> <span style=color:#f92672>=</span> <span style=color:#e6db74>&#39;integration_context&#39;</span>;
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>const</span> <span style=color:#66d9ef>WORKFLOW_CONTEXT</span> <span style=color:#f92672>=</span> <span style=color:#e6db74>&#39;workflow_context&#39;</span>;
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>const</span> <span style=color:#66d9ef>CONNECTOR_CONTEXT</span> <span style=color:#f92672>=</span> <span style=color:#e6db74>&#39;connector_context&#39;</span>;
</span></span><span style=display:flex><span>}</span></span></code></pre></div><h4 id=granularit√©-par-agr√©gat>Granularit√© par Agr√©gat <a href=#granularit%c3%a9-par-agr%c3%a9gat class=anchor aria-hidden=true><i class="material-icons align-middle">link</i></a></h4><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-php data-lang=php><span style=display:flex><span><span style=color:#75715e>// ‚úÖ Granularit√© par Agr√©gat Gyroscops Cloud (Projet Gyroscops Cloud)
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>final</span> <span style=color:#66d9ef>class</span> <span style=color:#a6e22e>HiveAggregateGranularity</span>
</span></span><span style=display:flex><span>{
</span></span><span style=display:flex><span>    <span style=color:#75715e>// Agr√©gat d&#39;Utilisateur
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>const</span> <span style=color:#66d9ef>USER_AGGREGATE</span> <span style=color:#f92672>=</span> <span style=color:#e6db74>&#39;user_aggregate&#39;</span>;
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>const</span> <span style=color:#66d9ef>USER_PROFILE_AGGREGATE</span> <span style=color:#f92672>=</span> <span style=color:#e6db74>&#39;user_profile_aggregate&#39;</span>;
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>const</span> <span style=color:#66d9ef>USER_PREFERENCES_AGGREGATE</span> <span style=color:#f92672>=</span> <span style=color:#e6db74>&#39;user_preferences_aggregate&#39;</span>;
</span></span><span style=display:flex><span>    
</span></span><span style=display:flex><span>    <span style=color:#75715e>// Agr√©gat de Paiement
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>const</span> <span style=color:#66d9ef>PAYMENT_AGGREGATE</span> <span style=color:#f92672>=</span> <span style=color:#e6db74>&#39;payment_aggregate&#39;</span>;
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>const</span> <span style=color:#66d9ef>SUBSCRIPTION_AGGREGATE</span> <span style=color:#f92672>=</span> <span style=color:#e6db74>&#39;subscription_aggregate&#39;</span>;
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>const</span> <span style=color:#66d9ef>BILLING_AGGREGATE</span> <span style=color:#f92672>=</span> <span style=color:#e6db74>&#39;billing_aggregate&#39;</span>;
</span></span><span style=display:flex><span>    
</span></span><span style=display:flex><span>    <span style=color:#75715e>// Agr√©gat d&#39;Int√©gration
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>const</span> <span style=color:#66d9ef>INTEGRATION_AGGREGATE</span> <span style=color:#f92672>=</span> <span style=color:#e6db74>&#39;integration_aggregate&#39;</span>;
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>const</span> <span style=color:#66d9ef>WORKFLOW_AGGREGATE</span> <span style=color:#f92672>=</span> <span style=color:#e6db74>&#39;workflow_aggregate&#39;</span>;
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>const</span> <span style=color:#66d9ef>CONNECTOR_AGGREGATE</span> <span style=color:#f92672>=</span> <span style=color:#e6db74>&#39;connector_aggregate&#39;</span>;
</span></span><span style=display:flex><span>}</span></span></code></pre></div><h4 id=exemple-concret--granularit√©-des-repositories>Exemple Concret : Granularit√© des Repositories <a href=#exemple-concret--granularit%c3%a9-des-repositories class=anchor aria-hidden=true><i class="material-icons align-middle">link</i></a></h4><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-php data-lang=php><span style=display:flex><span><span style=color:#75715e>// ‚úÖ Granularit√© des Repositories Gyroscops Cloud (Projet Gyroscops Cloud)
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>final</span> <span style=color:#66d9ef>class</span> <span style=color:#a6e22e>HiveRepositoryGranularity</span>
</span></span><span style=display:flex><span>{
</span></span><span style=display:flex><span>    <span style=color:#75715e>// Repository par Domaine
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>function</span> <span style=color:#a6e22e>getRepositoryByDomain</span>(<span style=color:#a6e22e>string</span> $domain)<span style=color:#f92672>:</span> <span style=color:#a6e22e>RepositoryInterface</span>
</span></span><span style=display:flex><span>    {
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>return</span> <span style=color:#a6e22e>match</span> ($domain) {
</span></span><span style=display:flex><span>            <span style=color:#a6e22e>HiveDomainGranularity</span><span style=color:#f92672>::</span><span style=color:#a6e22e>AUTHENTICATION_DOMAIN</span> <span style=color:#f92672>=&gt;</span> $this<span style=color:#f92672>-&gt;</span><span style=color:#a6e22e>authenticationRepository</span>,
</span></span><span style=display:flex><span>            <span style=color:#a6e22e>HiveDomainGranularity</span><span style=color:#f92672>::</span><span style=color:#a6e22e>PAYMENT_DOMAIN</span> <span style=color:#f92672>=&gt;</span> $this<span style=color:#f92672>-&gt;</span><span style=color:#a6e22e>paymentRepository</span>,
</span></span><span style=display:flex><span>            <span style=color:#a6e22e>HiveDomainGranularity</span><span style=color:#f92672>::</span><span style=color:#a6e22e>INTEGRATION_DOMAIN</span> <span style=color:#f92672>=&gt;</span> $this<span style=color:#f92672>-&gt;</span><span style=color:#a6e22e>integrationRepository</span>,
</span></span><span style=display:flex><span>            <span style=color:#a6e22e>HiveDomainGranularity</span><span style=color:#f92672>::</span><span style=color:#a6e22e>MONITORING_DOMAIN</span> <span style=color:#f92672>=&gt;</span> $this<span style=color:#f92672>-&gt;</span><span style=color:#a6e22e>monitoringRepository</span>,
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>default</span> <span style=color:#f92672>=&gt;</span> <span style=color:#66d9ef>throw</span> <span style=color:#66d9ef>new</span> <span style=color:#a6e22e>InvalidDomainException</span>(<span style=color:#e6db74>&#34;Unknown domain: </span><span style=color:#e6db74>{</span>$domain<span style=color:#e6db74>}</span><span style=color:#e6db74>&#34;</span>)
</span></span><span style=display:flex><span>        };
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>    
</span></span><span style=display:flex><span>    <span style=color:#75715e>// Repository par Bounded Context
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>function</span> <span style=color:#a6e22e>getRepositoryByContext</span>(<span style=color:#a6e22e>string</span> $context)<span style=color:#f92672>:</span> <span style=color:#a6e22e>RepositoryInterface</span>
</span></span><span style=display:flex><span>    {
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>return</span> <span style=color:#a6e22e>match</span> ($context) {
</span></span><span style=display:flex><span>            <span style=color:#a6e22e>HiveBoundedContextGranularity</span><span style=color:#f92672>::</span><span style=color:#a6e22e>AUTHENTICATION_CONTEXT</span> <span style=color:#f92672>=&gt;</span> $this<span style=color:#f92672>-&gt;</span><span style=color:#a6e22e>authenticationRepository</span>,
</span></span><span style=display:flex><span>            <span style=color:#a6e22e>HiveBoundedContextGranularity</span><span style=color:#f92672>::</span><span style=color:#a6e22e>PAYMENT_CONTEXT</span> <span style=color:#f92672>=&gt;</span> $this<span style=color:#f92672>-&gt;</span><span style=color:#a6e22e>paymentRepository</span>,
</span></span><span style=display:flex><span>            <span style=color:#a6e22e>HiveBoundedContextGranularity</span><span style=color:#f92672>::</span><span style=color:#a6e22e>INTEGRATION_CONTEXT</span> <span style=color:#f92672>=&gt;</span> $this<span style=color:#f92672>-&gt;</span><span style=color:#a6e22e>integrationRepository</span>,
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>default</span> <span style=color:#f92672>=&gt;</span> <span style=color:#66d9ef>throw</span> <span style=color:#66d9ef>new</span> <span style=color:#a6e22e>InvalidContextException</span>(<span style=color:#e6db74>&#34;Unknown context: </span><span style=color:#e6db74>{</span>$context<span style=color:#e6db74>}</span><span style=color:#e6db74>&#34;</span>)
</span></span><span style=display:flex><span>        };
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>    
</span></span><span style=display:flex><span>    <span style=color:#75715e>// Repository par Agr√©gat
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>function</span> <span style=color:#a6e22e>getRepositoryByAggregate</span>(<span style=color:#a6e22e>string</span> $aggregate)<span style=color:#f92672>:</span> <span style=color:#a6e22e>RepositoryInterface</span>
</span></span><span style=display:flex><span>    {
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>return</span> <span style=color:#a6e22e>match</span> ($aggregate) {
</span></span><span style=display:flex><span>            <span style=color:#a6e22e>HiveAggregateGranularity</span><span style=color:#f92672>::</span><span style=color:#a6e22e>USER_AGGREGATE</span> <span style=color:#f92672>=&gt;</span> $this<span style=color:#f92672>-&gt;</span><span style=color:#a6e22e>userRepository</span>,
</span></span><span style=display:flex><span>            <span style=color:#a6e22e>HiveAggregateGranularity</span><span style=color:#f92672>::</span><span style=color:#a6e22e>PAYMENT_AGGREGATE</span> <span style=color:#f92672>=&gt;</span> $this<span style=color:#f92672>-&gt;</span><span style=color:#a6e22e>paymentRepository</span>,
</span></span><span style=display:flex><span>            <span style=color:#a6e22e>HiveAggregateGranularity</span><span style=color:#f92672>::</span><span style=color:#a6e22e>INTEGRATION_AGGREGATE</span> <span style=color:#f92672>=&gt;</span> $this<span style=color:#f92672>-&gt;</span><span style=color:#a6e22e>integrationRepository</span>,
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>default</span> <span style=color:#f92672>=&gt;</span> <span style=color:#66d9ef>throw</span> <span style=color:#66d9ef>new</span> <span style=color:#a6e22e>InvalidAggregateException</span>(<span style=color:#e6db74>&#34;Unknown aggregate: </span><span style=color:#e6db74>{</span>$aggregate<span style=color:#e6db74>}</span><span style=color:#e6db74>&#34;</span>)
</span></span><span style=display:flex><span>        };
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>}</span></span></code></pre></div><h3 id=r√©f√©rences-aux-adr-du-projet-gyroscops-cloud>R√©f√©rences aux ADR du Projet Gyroscops Cloud <a href=#r%c3%a9f%c3%a9rences-aux-adr-du-projet-gyroscops-cloud class=anchor aria-hidden=true><i class="material-icons align-middle">link</i></a></h3><p>Ce chapitre s&rsquo;appuie sur les Architecture Decision Records (ADR) suivants du Gyroscops Cloud :</p><ul><li><strong>HIVE040</strong> : Enhanced Models with Property Access Patterns - Mod√®les enrichis avec granularit√©</li><li><strong>HIVE041</strong> : Cross-Cutting Concerns Architecture - Architecture des pr√©occupations transversales</li><li><strong>HIVE010</strong> : Repositories - Repositories avec granularit√© appropri√©e</li><li><strong>HIVE023</strong> : Repository Testing Strategies - Strat√©gies de tests avec granularit√©</li></ul><div class=chapter-navigation><h2 class=chapter-nav-title>üéØ Votre Prochaine √âtape</h2><p class=chapter-nav-subtitle>Maintenant que vous comprenez les concepts de base et que j'ai partag√© mon exp√©rience avec Gyroscops, quel est votre contexte ?</p><div class=chapter-options><div class=chapter-option data-color=green data-draft=true><div class=chapter-option-header><div class=chapter-option-letter>A</div><div><h3 class=chapter-option-title>Je veux voir des exemples concrets de mod√®les</h3><p class=chapter-option-subtitle>Vous voulez comprendre la diff√©rence entre mod√®les riches et an√©miques</p></div></div><div class=chapter-option-content><div class=chapter-option-criteria><h4 class=chapter-option-criteria-title>Crit√®res d'adoption :</h4><ul class=chapter-option-criteria-list><li>D√©veloppeur avec exp√©rience</li><li>Besoin d'exemples pratiques</li><li>Compr√©hension des patterns de code</li><li>Impl√©mentation √† faire</li></ul></div><div class=chapter-option-footer><span class=chapter-option-time>‚è±Ô∏è 25-35 minutes</span>
<span class="chapter-option-link chapter-option-link-disabled">Mod√®les Riches vs Mod√®les An√©miques
<span class=draft-indicator>üìù</span></span></div></div></div><style>.chapter-option-link-disabled{background:#9ca3af!important;color:#6b7280!important;cursor:not-allowed!important;opacity:.7}.chapter-option-link-disabled:hover{background:#9ca3af!important;color:#6b7280!important;transform:none!important;box-shadow:none!important}.chapter-option-link-disabled::after{display:none!important}.chapter-option[data-draft=true]{opacity:.8;border-style:dashed;border-color:#d1d5db}.chapter-option[data-draft=true] .chapter-option-letter{background:#9ca3af}.chapter-option[data-draft=true] .chapter-option-title{color:#6b7280}.chapter-option[data-draft=true] .chapter-option-subtitle{color:#9ca3af}.draft-indicator,.coming-soon-indicator{margin-left:.5rem;font-size:.875rem}.chapter-option[data-draft=true]{animation:draft-pulse 2s ease-in-out infinite}@keyframes draft-pulse{0%,100%{opacity:.8}50%{opacity:.6}}</style>}<div class=chapter-option data-color=yellow data-draft=true><div class=chapter-option-header><div class=chapter-option-letter>B</div><div><h3 class=chapter-option-title>Je veux comprendre l'architecture √©v√©nementielle</h3><p class=chapter-option-subtitle>Vous voulez voir comment structurer votre code autour des √©v√©nements</p></div></div><div class=chapter-option-content><div class=chapter-option-criteria><h4 class=chapter-option-criteria-title>Crit√®res d'adoption :</h4><ul class=chapter-option-criteria-list><li>D√©veloppeur avec exp√©rience</li><li>Besoin de d√©coupler les composants</li><li>Syst√®me complexe √† maintenir</li><li>√âvolutivit√© importante</li></ul></div><div class=chapter-option-footer><span class=chapter-option-time>‚è±Ô∏è 25-35 minutes</span>
<span class="chapter-option-link chapter-option-link-disabled">Architecture √âv√©nementielle
<span class=draft-indicator>üìù</span></span></div></div></div><style>.chapter-option-link-disabled{background:#9ca3af!important;color:#6b7280!important;cursor:not-allowed!important;opacity:.7}.chapter-option-link-disabled:hover{background:#9ca3af!important;color:#6b7280!important;transform:none!important;box-shadow:none!important}.chapter-option-link-disabled::after{display:none!important}.chapter-option[data-draft=true]{opacity:.8;border-style:dashed;border-color:#d1d5db}.chapter-option[data-draft=true] .chapter-option-letter{background:#9ca3af}.chapter-option[data-draft=true] .chapter-option-title{color:#6b7280}.chapter-option[data-draft=true] .chapter-option-subtitle{color:#9ca3af}.draft-indicator,.coming-soon-indicator{margin-left:.5rem;font-size:.875rem}.chapter-option[data-draft=true]{animation:draft-pulse 2s ease-in-out infinite}@keyframes draft-pulse{0%,100%{opacity:.8}50%{opacity:.6}}</style>}<div class=chapter-option data-color=red data-draft=true><div class=chapter-option-header><div class=chapter-option-letter>C</div><div><h3 class=chapter-option-title>Je veux comprendre les repositories et la persistance</h3><p class=chapter-option-subtitle>Vous voulez voir comment g√©rer la persistance des donn√©es</p></div></div><div class=chapter-option-content><div class=chapter-option-criteria><h4 class=chapter-option-criteria-title>Crit√®res d'adoption :</h4><ul class=chapter-option-criteria-list><li>D√©veloppeur avec exp√©rience</li><li>Besoin de comprendre la persistance</li><li>Architecture √† d√©finir</li><li>Patterns de stockage √† choisir</li></ul></div><div class=chapter-option-footer><span class=chapter-option-time>‚è±Ô∏è 25-35 minutes</span>
<span class="chapter-option-link chapter-option-link-disabled">Repositories et Persistance
<span class=draft-indicator>üìù</span></span></div></div></div><style>.chapter-option-link-disabled{background:#9ca3af!important;color:#6b7280!important;cursor:not-allowed!important;opacity:.7}.chapter-option-link-disabled:hover{background:#9ca3af!important;color:#6b7280!important;transform:none!important;box-shadow:none!important}.chapter-option-link-disabled::after{display:none!important}.chapter-option[data-draft=true]{opacity:.8;border-style:dashed;border-color:#d1d5db}.chapter-option[data-draft=true] .chapter-option-letter{background:#9ca3af}.chapter-option[data-draft=true] .chapter-option-title{color:#6b7280}.chapter-option[data-draft=true] .chapter-option-subtitle{color:#9ca3af}.draft-indicator,.coming-soon-indicator{margin-left:.5rem;font-size:.875rem}.chapter-option[data-draft=true]{animation:draft-pulse 2s ease-in-out infinite}@keyframes draft-pulse{0%,100%{opacity:.8}50%{opacity:.6}}</style>}<div class=chapter-option data-color=blue><div class=chapter-option-header><div class=chapter-option-letter>D</div><div><h3 class=chapter-option-title>Je veux comprendre les patterns optionnels</h3><p class=chapter-option-subtitle>Vous voulez voir les patterns avanc√©s comme CQRS et Event Sourcing</p></div></div><div class=chapter-option-content><div class=chapter-option-criteria><h4 class=chapter-option-criteria-title>Crit√®res d'adoption :</h4><ul class=chapter-option-criteria-list><li>√âquipe tr√®s exp√©riment√©e</li><li>Besoin de patterns avanc√©s</li><li>Complexit√© tr√®s √©lev√©e</li><li>Performance critique</li></ul></div><div class=chapter-option-footer><span class=chapter-option-time>‚è±Ô∏è 30-45 minutes</span>
<span class="chapter-option-link chapter-option-link-disabled">Event Sourcing - La Source de V√©rit√©
<span class=coming-soon-indicator>üöß</span></span></div></div></div><style>.chapter-option-link-disabled{background:#9ca3af!important;color:#6b7280!important;cursor:not-allowed!important;opacity:.7}.chapter-option-link-disabled:hover{background:#9ca3af!important;color:#6b7280!important;transform:none!important;box-shadow:none!important}.chapter-option-link-disabled::after{display:none!important}.chapter-option[data-draft=true]{opacity:.8;border-style:dashed;border-color:#d1d5db}.chapter-option[data-draft=true] .chapter-option-letter{background:#9ca3af}.chapter-option[data-draft=true] .chapter-option-title{color:#6b7280}.chapter-option[data-draft=true] .chapter-option-subtitle{color:#9ca3af}.draft-indicator,.coming-soon-indicator{margin-left:.5rem;font-size:.875rem}.chapter-option[data-draft=true]{animation:draft-pulse 2s ease-in-out infinite}@keyframes draft-pulse{0%,100%{opacity:.8}50%{opacity:.6}}</style>}<div class=chapter-option data-color=purple><div class=chapter-option-header><div class=chapter-option-letter>E</div><div><h3 class=chapter-option-title>Je veux comprendre l'architecture CQS</h3><p class=chapter-option-subtitle>Vous voulez voir une alternative plus simple au CQRS</p></div></div><div class=chapter-option-content><div class=chapter-option-criteria><h4 class=chapter-option-criteria-title>Crit√®res d'adoption :</h4><ul class=chapter-option-criteria-list><li>√âquipe exp√©riment√©e</li><li>Besoin d'une alternative au CQRS</li><li>Complexit√© √©lev√©e mais pas critique</li><li>√âvolutivit√© importante</li></ul></div><div class=chapter-option-footer><span class=chapter-option-time>‚è±Ô∏è 25-35 minutes</span>
<span class="chapter-option-link chapter-option-link-disabled">Architecture CQS - Command Query Separation
<span class=coming-soon-indicator>üöß</span></span></div></div></div><style>.chapter-option-link-disabled{background:#9ca3af!important;color:#6b7280!important;cursor:not-allowed!important;opacity:.7}.chapter-option-link-disabled:hover{background:#9ca3af!important;color:#6b7280!important;transform:none!important;box-shadow:none!important}.chapter-option-link-disabled::after{display:none!important}.chapter-option[data-draft=true]{opacity:.8;border-style:dashed;border-color:#d1d5db}.chapter-option[data-draft=true] .chapter-option-letter{background:#9ca3af}.chapter-option[data-draft=true] .chapter-option-title{color:#6b7280}.chapter-option[data-draft=true] .chapter-option-subtitle{color:#9ca3af}.draft-indicator,.coming-soon-indicator{margin-left:.5rem;font-size:.875rem}.chapter-option[data-draft=true]{animation:draft-pulse 2s ease-in-out infinite}@keyframes draft-pulse{0%,100%{opacity:.8}50%{opacity:.6}}</style>}</div></div><style>.chapter-navigation{margin:2rem 0;padding:1.5rem;background:linear-gradient(135deg,#f8fafc 0%,#e2e8f0 100%);border-radius:12px;border-left:4px solid #3b82f6}.chapter-nav-title{margin:0 0 .5rem;font-size:1.5rem;font-weight:700;color:#1e293b}.chapter-nav-subtitle{margin:0 0 1.5rem;color:#64748b;font-size:1rem;line-height:1.6}.chapter-options{display:flex;flex-direction:column;gap:1rem}.chapter-option{background:#fff;border-radius:8px;padding:1.25rem;border:1px solid #e2e8f0;transition:all .2s ease;position:relative;overflow:hidden}.chapter-option:hover{transform:translateY(-2px);box-shadow:0 8px 25px rgba(0,0,0,.1);border-color:#3b82f6}.chapter-option::before{content:'';position:absolute;top:0;left:0;width:4px;height:100%;background:var(--option-color,#6b7280);border-radius:0 2px 2px 0}.chapter-option-header{display:flex;align-items:center;margin-bottom:.75rem}.chapter-option-letter{display:inline-flex;align-items:center;justify-content:center;width:2rem;height:2rem;border-radius:50%;background:var(--option-color,#6b7280);color:#fff;font-weight:700;font-size:.875rem;margin-right:.75rem;flex-shrink:0}.chapter-option-title{font-size:1.125rem;font-weight:600;color:#1e293b;margin:0;line-height:1.4}.chapter-option-subtitle{font-size:.875rem;color:#64748b;font-style:italic;margin:.25rem 0 0;line-height:1.4}.chapter-option-content{margin-left:2.75rem}.chapter-option-criteria{margin-bottom:.75rem}.chapter-option-criteria-title{font-size:.875rem;font-weight:600;color:#374151;margin:0 0 .5rem}.chapter-option-criteria-list{list-style:none;padding:0;margin:0}.chapter-option-criteria-list li{position:relative;padding-left:1.25rem;margin-bottom:.25rem;font-size:.875rem;color:#4b5563;line-height:1.4}.chapter-option-criteria-list li::before{content:'‚úì';position:absolute;left:0;color:#10b981;font-weight:600}.chapter-option-footer{display:flex;justify-content:space-between;align-items:center;margin-top:1rem;padding-top:.75rem;border-top:1px solid #e5e7eb}.chapter-option-time{font-size:.875rem;color:#6b7280;font-weight:500}.chapter-option-link{display:inline-flex;align-items:center;padding:.5rem 1rem;background:var(--option-color,#6b7280);color:#fff!important;text-decoration:none!important;border-radius:6px;font-weight:600;font-size:.875rem;transition:all .2s ease;border:none;cursor:pointer}.chapter-option-link:hover{background:var(--option-color-dark,#4b5563);color:#fff!important;text-decoration:none!important;transform:translateY(-1px);box-shadow:0 4px 12px rgba(0,0,0,.15)}.chapter-option-link:visited{color:#fff!important;text-decoration:none!important}.chapter-option-link:focus{color:#fff!important;text-decoration:none!important;outline:2px solid rgba(255,255,255,.5);outline-offset:2px}.chapter-option-link:active{color:#fff!important;text-decoration:none!important}.chapter-option-link::after{content:'‚Üí';margin-left:.5rem;transition:transform .2s ease;color:#fff!important}.chapter-option-link:hover::after{transform:translateX(2px);color:#fff!important}.chapter-navigation a{color:inherit;text-decoration:none}.chapter-navigation a:hover{color:inherit;text-decoration:none}.chapter-navigation a:visited{color:inherit;text-decoration:none}.chapter-navigation a:focus{color:inherit;text-decoration:none}.chapter-navigation a:active{color:inherit;text-decoration:none}.chapter-option[data-color=green]{--option-color:#10b981;--option-color-dark:#059669}.chapter-option[data-color=yellow]{--option-color:#f59e0b;--option-color-dark:#d97706}.chapter-option[data-color=red]{--option-color:#ef4444;--option-color-dark:#dc2626}.chapter-option[data-color=blue]{--option-color:#3b82f6;--option-color-dark:#2563eb}.chapter-option[data-color=purple]{--option-color:#8b5cf6;--option-color-dark:#7c3aed}.chapter-option[data-color=orange]{--option-color:#f97316;--option-color-dark:#ea580c}.chapter-option[data-color=teal]{--option-color:#14b8a6;--option-color-dark:#0d9488}.chapter-option[data-color=indigo]{--option-color:#6366f1;--option-color-dark:#4f46e5}.chapter-option[data-color=pink]{--option-color:#ec4899;--option-color-dark:#db2777}.chapter-option[data-color=cyan]{--option-color:#06b6d4;--option-color-dark:#0891b2}@media(max-width:768px){.chapter-navigation{padding:1rem}.chapter-option{padding:1rem}.chapter-option-content{margin-left:2.5rem}.chapter-option-footer{flex-direction:column;align-items:flex-start;gap:.75rem}.chapter-option-link{align-self:stretch;justify-content:center}}</style></div></div><div><hr class=doc-hr><div id=doc-nav class=d-print-none><div class="row flex-xl-nowrap"><div class="col-sm-6 pt-2 doc-next"><a href=/chapitres/fondamentaux/chapitre-05-complexite-accidentelle-essentielle/><div class="card h-100 my-1"><div class="card-body py-2"><p class="card-title fs-5 fw-semibold lh-base mb-0"><i class="material-icons align-middle">navigate_before</i> Chapitre 5 : Complexit√© Accidentelle vs Essentielle - Le Choix Architectural</p></div></div></a></div><div class="col-sm-6 pt-2 doc-prev"><a class=ms-auto href=/chapitres/fondamentaux/chapitre-07-modeles-riches-vs-anemiques/><div class="card h-100 my-1 text-end"><div class="card-body py-2"><p class="card-title fs-5 fw-semibold lh-base mb-0">Chapitre 7 : Mod√®les Riches vs Mod√®les An√©miques <i class="material-icons align-middle">navigate_next</i></p></div></div></a></div></div></div></div></div></div></div></div><footer class="shadow py-3 d-print-none"><div class=container-fluid><div class="row align-items-center"><div class=col><div class="text-sm-start text-center mx-md-2"><p class=mb-0>¬© 2025 Gr√©gory Planchat. Tous droits r√©serv√©s.</p></div></div></div><div class="row mt-3 pt-3 border-top"><div class=col-12><div class=text-center><h6 class="text-muted mb-2">Nos Sponsors</h6><p class="text-muted small mb-2">Merci √† nos partenaires qui soutiennent cette initiative</p><div class="d-flex justify-content-center align-items-center flex-wrap gap-3"><div class=sponsor-item><a href=https://kiboko.fr target=_blank rel="noopener noreferrer" class="text-decoration-none d-inline-block"><img src=/logo-kiboko-fr.svg alt=Kiboko width=120 height=60 style=display:block;max-width:120px;height:auto></a></div><div class=sponsor-item><a href=https://gyroscops.com target=_blank rel="noopener noreferrer" class="text-decoration-none d-inline-block"><img src=/logo-gyroscops.svg alt=Gyroscops width=120 height=60 style=display:block;max-width:120px;height:auto></a></div></div></div></div></div></div></footer></main></div></div><button onclick=topFunction() id=back-to-top aria-label="Back to Top Button" class="back-to-top fs-5"><svg width="24" height="24"><path d="M12 10.224l-6.3 6.3-1.38-1.372L12 7.472l7.68 7.68-1.38 1.376z" style="fill:#fff"/></svg></button>
<script src=/docs/js/bootstrap.js defer></script><script type=text/javascript src=http://localhost:1313/docs/js/bundle.js defer></script><script type=module>
    var suggestions = document.getElementById('suggestions');
    var search = document.getElementById('flexsearch');

    const flexsearchContainer = document.getElementById('FlexSearchCollapse');

    const hideFlexsearchBtn = document.getElementById('hideFlexsearch');

    const configObject = { toggle: false }
    const flexsearchContainerCollapse = new Collapse(flexsearchContainer, configObject) 

    if (search !== null) {
        document.addEventListener('keydown', inputFocus);
        flexsearchContainer.addEventListener('shown.bs.collapse', function () {
            search.focus();
        });
        
        var topHeader = document.getElementById("top-header");
        document.addEventListener('click', function(elem) {
            if (!flexsearchContainer.contains(elem.target) && !topHeader.contains(elem.target))
                flexsearchContainerCollapse.hide();
        });
    }

    hideFlexsearchBtn.addEventListener('click', () =>{
        flexsearchContainerCollapse.hide()
    })

    function inputFocus(e) {
        if (e.ctrlKey && e.key === '/') {
            e.preventDefault();
            flexsearchContainerCollapse.toggle();
        }
        if (e.key === 'Escape' ) {
            search.blur();
            
            flexsearchContainerCollapse.hide();
        }
    };

    document.addEventListener('click', function(event) {

    var isClickInsideElement = suggestions.contains(event.target);

    if (!isClickInsideElement) {
        suggestions.classList.add('d-none');
    }

    });

    


    document.addEventListener('keydown',suggestionFocus);

    function suggestionFocus(e) {
    const suggestionsHidden = suggestions.classList.contains('d-none');
    if (suggestionsHidden) return;

    const focusableSuggestions= [...suggestions.querySelectorAll('a')];
    if (focusableSuggestions.length === 0) return;

    const index = focusableSuggestions.indexOf(document.activeElement);

    if (e.key === "ArrowUp") {
        e.preventDefault();
        const nextIndex = index > 0 ? index - 1 : 0;
        focusableSuggestions[nextIndex].focus();
    }
    else if (e.key === "ArrowDown") {
        e.preventDefault();
        const nextIndex= index + 1 < focusableSuggestions.length ? index + 1 : index;
        focusableSuggestions[nextIndex].focus();
    }

    }

    


    (function(){

    var index = new FlexSearch.Document({
        
        tokenize: "forward",
        minlength:  0 ,
        cache:  100 ,
        optimize:  true ,
        document: {
        id: 'id',
        store: [
            "href", "title", "description"
        ],
        index: ["title", "description", "content"]
        }
    });


    


    
    


    

    

    search.addEventListener('input', show_results, true);

    function show_results(){
        const maxResult =  5 ;
        const minlength =  0 ;
        var searchQuery = sanitizeHTML(this.value);
        var results = index.search(searchQuery, {limit: maxResult, enrich: true});

        
        const flatResults = new Map(); 
        for (const result of results.flatMap(r => r.result)) {
        if (flatResults.has(result.doc.href)) continue;
        flatResults.set(result.doc.href, result.doc);
        }

        suggestions.innerHTML = "";
        suggestions.classList.remove('d-none');

        
        if (searchQuery.length < minlength) {
            const minCharMessage = document.createElement('div')
            minCharMessage.innerHTML = `Please type at least <strong>${minlength}</strong> characters`
            minCharMessage.classList.add("suggestion__no-results");
            suggestions.appendChild(minCharMessage);
            return;
        } else {
            
            if (flatResults.size === 0 && searchQuery) {
                const noResultsMessage = document.createElement('div')
                noResultsMessage.innerHTML = "No results for" + ` "<strong>${searchQuery}</strong>"`
                noResultsMessage.classList.add("suggestion__no-results");
                suggestions.appendChild(noResultsMessage);
                return;
            }
        }

        
        for(const [href, doc] of flatResults) {
            const entry = document.createElement('div');
            suggestions.appendChild(entry);

            const a = document.createElement('a');
            a.href = href;
            entry.appendChild(a);

            const title = document.createElement('span');
            title.textContent = doc.title;
            title.classList.add("suggestion__title");
            a.appendChild(title);

            const description = document.createElement('span');
            description.textContent = doc.description;
            description.classList.add("suggestion__description");
            a.appendChild(description);

            suggestions.appendChild(entry);

            if(suggestions.childElementCount == maxResult) break;
        }
    }
    }());
</script></body></html>