<?xml version="1.0" encoding="utf-8" standalone="yes"?><rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom"><channel><title>DDD Adventure</title><link>http://localhost:1313/</link><description>Recent content on DDD Adventure</description><generator>Hugo</generator><language>fr-fr</language><lastBuildDate>Thu, 19 Dec 2024 00:00:00 +0000</lastBuildDate><atom:link href="http://localhost:1313/index.xml" rel="self" type="application/rss+xml"/><item><title>Chapitre 1 : Introduction au Domain-Driven Design et Event Storming</title><link>http://localhost:1313/chapitres/fondamentaux/chapitre-01-introduction-event-storming-ddd/</link><pubDate>Thu, 19 Dec 2024 00:00:00 +0000</pubDate><guid>http://localhost:1313/chapitres/fondamentaux/chapitre-01-introduction-event-storming-ddd/</guid><description>&lt;h2 id="-objectif-de-ce-chapitre"&gt;üéØ Objectif de ce Chapitre &lt;a href="#-objectif-de-ce-chapitre" class="anchor" aria-hidden="true"&gt;&lt;i class="material-icons align-middle"&gt;link&lt;/i&gt;&lt;/a&gt;&lt;/h2&gt;&lt;h3 id="un-r√©cit-personnel"&gt;Un R√©cit Personnel &lt;a href="#un-r%c3%a9cit-personnel" class="anchor" aria-hidden="true"&gt;&lt;i class="material-icons align-middle"&gt;link&lt;/i&gt;&lt;/a&gt;&lt;/h3&gt;&lt;p&gt;Il est 17h30, je viens de passer 3 heures dans xdebug pour un bug qui semblait simple. Le probl√®me ? Une modification
dans une partie du code a cass√© quelque chose dans une autre partie, √† des kilom√®tres de l√†. Je me demande : &amp;ldquo;Comment en
sommes-nous arriv√©s l√† ?&amp;rdquo;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Cette situation vous dit quelque chose ?&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;Moi, je l&amp;rsquo;ai v√©cue des dizaines de fois :&lt;/p&gt;</description></item><item><title>CQRS - Command Query Responsibility Segregation</title><link>http://localhost:1313/patterns/cqrs/</link><pubDate>Thu, 19 Dec 2024 00:00:00 +0000</pubDate><guid>http://localhost:1313/patterns/cqrs/</guid><description>&lt;h2 id="-quest-ce-que-cqrs-cqrs-command-query-responsibility-segregation-est-un-pattern-architectural-qui-s√©pare-clairement-les-op√©rations-de-lecture-query-des-op√©rations-d√©criture-command-dans-une-application-le-principe-fondamental----bertrand-meyercqrs-pousse-ce-principe-√†-lextr√™me-en-cr√©ant-deux-mod√®les-distincts---mod√®le-de-commande--pour-les-op√©rations-qui-modifient-l√©tat--mod√®le-de-requ√™te--pour-les-op√©rations-qui-lisent-les-donn√©es--architecture-cqrs-dans-gyroscops-contexte-m√©tier--gestion-des-paiementsdans-gyroscops-nous-g√©rons-des-paiements-avec-des-besoins-tr√®s-diff√©rents--c√¥t√©-commande-writephp-commande--cr√©er-un-paiementclass-createpaymentcommand----public-function-__construct--------public-readonly-paymentid-paymentid--------public-readonly-amount-amount--------public-readonly-paymentmethod-method--------public-readonly-customerid-customerid------handler--traiter-la-commandeclass-createpaymenthandler----public-function-__invokecreatepaymentcommand-command-void------------payment--paymentcreate------------command-paymentid------------command-amount------------command-method------------command-customerid------------------------this-paymentrepository-savepayment--------this-eventbus-dispatchnew-paymentcreatedpayment-----c√¥t√©-requ√™te-readphp-requ√™te--obtenir-les-paiements-dun-clientclass-getcustomerpaymentsquery----public-function-__construct--------public-readonly-customerid-customerid--------public-readonly-daterange-daterange--null------handler--ex√©cuter-la-requ√™teclass-getcustomerpaymentshandler----public-function-__invokegetcustomerpaymentsquery-query-array------------return-this-paymentqueryrepository-findbycustomer------------query-customerid------------query-daterange--------------avantages-de-cqrs-1-s√©paration-des-responsabilit√©s--commandes--focus-sur-la-logique-m√©tier-et-la-validation--requ√™tes--focus-sur-loptimisation-des-performances-de-lecture-2-optimisation-ind√©pendante--write-model--optimis√©-pour-la-coh√©rence-et-les-invariants-m√©tier--read-model--optimis√©-pour-les-performances-et-la-flexibilit√©-3-scalabilit√©--possibilit√©-de-scaler-s√©par√©ment-les-lectures-et-les-√©critures--utilisation-de-technologies-diff√©rentes-pour-chaque-c√¥t√©-4-√©volutivit√©--modification-des-requ√™tes-sans-impact-sur-les-commandes--ajout-de-nouvelles-vues-sans-affecter-la-logique-m√©tier--impl√©mentation-dans-gyroscops-structure-des-dossierssrcaccounting-application----command-------createpayment----------createpaymentcommandphp----------createpaymenthandlerphp----------createpaymentvalidatorphp-------processrefund----query--------getpaymentdetails-----------getpaymentdetailsqueryphp-----------getpaymentdetailshandlerphp-----------paymentdetailsviewphp--------listcustomerpayments-domain----paymentphp-write-model----paymentdetailsphp-read-model-infrastructure-----paymentrepositoryphp-write-----paymentqueryrepositoryphp-read-exemple-concret--gestion-des-abonnements-commande--cr√©er-un-abonnementphpclass-createsubscriptioncommand----public-function-__construct--------public-readonly-subscriptionid-subscriptionid--------public-readonly-planid-planid--------public-readonly-customerid-customerid--------public-readonly-billingcycle-billingcycle-----class-createsubscriptionhandler----public-function-__invokecreatesubscriptioncommand-command-void-------------validation-m√©tier--------this-validatesubscriptioncreationcommand-----------------cr√©ation-de-lagr√©gat--------subscription--subscriptioncreate------------command-subscriptionid------------command-planid------------command-customerid------------command-billingcycle-------------------------persistance--------this-subscriptionrepository-savesubscription-----------------√©v√©nement--------this-eventbus-dispatchnew-subscriptioncreatedsubscription-----requ√™te--obtenir-les-d√©tails-dphpclass-getsubscriptiondetailsquery----public-function-__construct--------public-readonly-subscriptionid-subscriptionid-----class-getsubscriptiondetailshandler----public-function-__invokegetsubscriptiondetailsquery-query-subscriptiondetailsview------------return-this-subscriptionqueryrepository-finddetailsquery-subscriptionid----class-subscriptiondetailsview----public-function-__construct--------public-readonly-subscriptionid-id--------public-readonly-string-planname--------public-readonly-string-customername--------public-readonly-string-status--------public-readonly-datetime-startdate--------public-readonly-datetime-enddate--------public-readonly-amount-monthlyprice--------public-readonly-array-features-------patterns-avanc√©s-avec-cqrs-1-event-sourcing--cqrs--les-commandes-g√©n√®rent-des-√©v√©nements--les-requ√™tes-lisent-depuis-les-projections-2-cqrs-avec-projections--projections-d√©normalis√©es-pour-les-requ√™tes--mise-√†-jour-asynchrone-des-vues-3-cqrs-avec-api-platform--ressources-s√©par√©es-pour-command-et-query--validation-automatique-des-dtos--performance-et-optimisation-optimisations-c√¥t√©-lecture--indexation--index-optimis√©s-pour-les-requ√™tes-fr√©quentes--cache--mise-en-cache-des-vues-fr√©quemment-consult√©es--d√©normalisation--donn√©es-pr√©-calcul√©es-pour-√©viter-les-jointures-optimisations-c√¥t√©-√©criture--validation--validation-m√©tier-centralis√©e--transactions--gestion-des-transactions-optimis√©e--√©v√©nements--publication-asynchrone-des-√©v√©nements--quand-utiliser-cqrs---cas-d--complexit√©-m√©tier-√©lev√©e--beaucoup-de-r√®gles-m√©tier--besoins-de-lecture√©criture-diff√©rents--requ√™tes-complexes-vs-√©critures-simples--performance-critique--besoins-de-performance-diff√©rents--√©quipes-s√©par√©es--√©quipes-diff√©rentes-pour-readwrite--cas-d--applications-simples--crud-basique--coh√©rence-forte-requise--besoin-de-coh√©rence-imm√©diate--√©quipe-unique--une-seule-√©quipe-pour-tout--prototypage--d√©veloppement-rapide--migration-vers-cqrs-√©tape-1--identifier-les-commandes--lister-toutes-les-op√©rations-qui-modifient-l√©tat--grouper-par-contexte-m√©tier-√©tape-2--identifier-les-requ√™tes--lister-toutes-les-op√©rations-de-lecture--analyser-les-patterns-dacc√®s-√©tape-3--s√©parer-les-mod√®les--cr√©er-des-mod√®les-distincts--migrer-progressivement-√©tape-4--optimiser--optimiser-chaque-c√¥t√©-ind√©pendamment--mesurer-les-performances--m√©triques-et-monitoring-m√©triques-c√¥t√©-commande--nombre-de-commandes-par-seconde--temps-de-traitement-moyen--taux-derreur-m√©triques-c√¥t√©-requ√™te--temps-de-r√©ponse-des-requ√™tes--utilisation-du-cache--charge-des-projections--prochaines-√©tapesmaintenant-que-vous-comprenez-cqrs-explorez-1-event-sourcing--stocker-les-√©v√©nements-comme-source-de-v√©rit√©2-repositories--patterns-de-persistance3-impl√©mentation-cqrs--guide-dimpl√©mentation-completcqrs-n"&gt;üåü **Qu&amp;rsquo;est-ce que CQRS ?**&lt;strong&gt;CQRS&lt;/strong&gt; (Command Query Responsibility Segregation) est un pattern architectural qui s√©pare clairement les op√©rations de &lt;strong&gt;lecture&lt;/strong&gt; (Query) des op√©rations d&amp;rsquo;&lt;strong&gt;√©criture&lt;/strong&gt; (Command) dans une application.### &lt;strong&gt;Le Principe Fondamental&lt;/strong&gt;&amp;gt; &lt;strong&gt;&amp;ldquo;Une m√©thode ne devrait jamais retourner de valeur et modifier l&amp;rsquo;√©tat de l&amp;rsquo;objet&amp;rdquo;&lt;/strong&gt; - Bertrand MeyerCQRS pousse ce principe √† l&amp;rsquo;extr√™me en cr√©ant deux mod√®les distincts :- &lt;strong&gt;Mod√®le de Commande&lt;/strong&gt; : Pour les op√©rations qui modifient l&amp;rsquo;√©tat- &lt;strong&gt;Mod√®le de Requ√™te&lt;/strong&gt; : Pour les op√©rations qui lisent les donn√©es## üèóÔ∏è &lt;strong&gt;Architecture CQRS dans Gyroscops&lt;/strong&gt;### &lt;strong&gt;Contexte M√©tier : Gestion des Paiements&lt;/strong&gt;Dans Gyroscops, nous g√©rons des paiements avec des besoins tr√®s diff√©rents :#### &lt;strong&gt;C√¥t√© Commande (Write)&lt;/strong&gt;&lt;code&gt;php// Commande : Cr√©er un paiementclass CreatePaymentCommand{ public function __construct( public readonly PaymentId $paymentId, public readonly Amount $amount, public readonly PaymentMethod $method, public readonly CustomerId $customerId ) {}}// Handler : Traiter la commandeclass CreatePaymentHandler{ public function __invoke(CreatePaymentCommand $command): void { $payment = Payment::create( $command-&amp;gt;paymentId, $command-&amp;gt;amount, $command-&amp;gt;method, $command-&amp;gt;customerId ); $this-&amp;gt;paymentRepository-&amp;gt;save($payment); $this-&amp;gt;eventBus-&amp;gt;dispatch(new PaymentCreated($payment)); }}&lt;/code&gt;#### &lt;strong&gt;C√¥t√© Requ√™te (Read)&lt;/strong&gt;&lt;code&gt;php// Requ√™te : Obtenir les paiements d'un clientclass GetCustomerPaymentsQuery{ public function __construct( public readonly CustomerId $customerId, public readonly ?DateRange $dateRange = null ) {}}// Handler : Ex√©cuter la requ√™teclass GetCustomerPaymentsHandler{ public function __invoke(GetCustomerPaymentsQuery $query): array { return $this-&amp;gt;paymentQueryRepository-&amp;gt;findByCustomer( $query-&amp;gt;customerId, $query-&amp;gt;dateRange ); }}&lt;/code&gt;## üéØ &lt;strong&gt;Avantages de CQRS&lt;/strong&gt;### &lt;strong&gt;1. S√©paration des Responsabilit√©s&lt;/strong&gt;- &lt;strong&gt;Commandes&lt;/strong&gt; : Focus sur la logique m√©tier et la validation- &lt;strong&gt;Requ√™tes&lt;/strong&gt; : Focus sur l&amp;rsquo;optimisation des performances de lecture### &lt;strong&gt;2. Optimisation Ind√©pendante&lt;/strong&gt;- &lt;strong&gt;Write Model&lt;/strong&gt; : Optimis√© pour la coh√©rence et les invariants m√©tier- &lt;strong&gt;Read Model&lt;/strong&gt; : Optimis√© pour les performances et la flexibilit√©### &lt;strong&gt;3. Scalabilit√©&lt;/strong&gt;- Possibilit√© de scaler s√©par√©ment les lectures et les √©critures- Utilisation de technologies diff√©rentes pour chaque c√¥t√©### &lt;strong&gt;4. √âvolutivit√©&lt;/strong&gt;- Modification des requ√™tes sans impact sur les commandes- Ajout de nouvelles vues sans affecter la logique m√©tier## üîß &lt;strong&gt;Impl√©mentation dans Gyroscops&lt;/strong&gt;### &lt;strong&gt;Structure des Dossiers&lt;/strong&gt;&lt;code&gt;src/Accounting/‚îú‚îÄ‚îÄ Application/‚îÇ ‚îú‚îÄ‚îÄ Command/‚îÇ ‚îÇ ‚îú‚îÄ‚îÄ CreatePayment/‚îÇ ‚îÇ ‚îÇ ‚îú‚îÄ‚îÄ CreatePaymentCommand.php‚îÇ ‚îÇ ‚îÇ ‚îú‚îÄ‚îÄ CreatePaymentHandler.php‚îÇ ‚îÇ ‚îÇ ‚îî‚îÄ‚îÄ CreatePaymentValidator.php‚îÇ ‚îÇ ‚îî‚îÄ‚îÄ ProcessRefund/‚îÇ ‚îî‚îÄ‚îÄ Query/‚îÇ ‚îú‚îÄ‚îÄ GetPaymentDetails/‚îÇ ‚îÇ ‚îú‚îÄ‚îÄ GetPaymentDetailsQuery.php‚îÇ ‚îÇ ‚îú‚îÄ‚îÄ GetPaymentDetailsHandler.php‚îÇ ‚îÇ ‚îî‚îÄ‚îÄ PaymentDetailsView.php‚îÇ ‚îî‚îÄ‚îÄ ListCustomerPayments/‚îú‚îÄ‚îÄ Domain/‚îÇ ‚îú‚îÄ‚îÄ Payment.php (Write Model)‚îÇ ‚îî‚îÄ‚îÄ PaymentDetails.php (Read Model)‚îî‚îÄ‚îÄ Infrastructure/ ‚îú‚îÄ‚îÄ PaymentRepository.php (Write) ‚îî‚îÄ‚îÄ PaymentQueryRepository.php (Read)&lt;/code&gt;### &lt;strong&gt;Exemple Concret : Gestion des Abonnements&lt;/strong&gt;#### &lt;strong&gt;Commande : Cr√©er un Abonnement&lt;/strong&gt;&lt;code&gt;phpclass CreateSubscriptionCommand{ public function __construct( public readonly SubscriptionId $subscriptionId, public readonly PlanId $planId, public readonly CustomerId $customerId, public readonly BillingCycle $billingCycle ) {}}class CreateSubscriptionHandler{ public function __invoke(CreateSubscriptionCommand $command): void { // Validation m√©tier $this-&amp;gt;validateSubscriptionCreation($command); // Cr√©ation de l'agr√©gat $subscription = Subscription::create( $command-&amp;gt;subscriptionId, $command-&amp;gt;planId, $command-&amp;gt;customerId, $command-&amp;gt;billingCycle ); // Persistance $this-&amp;gt;subscriptionRepository-&amp;gt;save($subscription); // √âv√©nement $this-&amp;gt;eventBus-&amp;gt;dispatch(new SubscriptionCreated($subscription)); }}&lt;/code&gt;#### &lt;strong&gt;Requ√™te : Obtenir les D√©tails d&amp;rsquo;un Abonnement&lt;/strong&gt;&lt;code&gt;phpclass GetSubscriptionDetailsQuery{ public function __construct( public readonly SubscriptionId $subscriptionId ) {}}class GetSubscriptionDetailsHandler{ public function __invoke(GetSubscriptionDetailsQuery $query): SubscriptionDetailsView { return $this-&amp;gt;subscriptionQueryRepository-&amp;gt;findDetails($query-&amp;gt;subscriptionId); }}class SubscriptionDetailsView{ public function __construct( public readonly SubscriptionId $id, public readonly string $planName, public readonly string $customerName, public readonly string $status, public readonly DateTime $startDate, public readonly ?DateTime $endDate, public readonly Amount $monthlyPrice, public readonly array $features ) {}}&lt;/code&gt;## üöÄ &lt;strong&gt;Patterns Avanc√©s avec CQRS&lt;/strong&gt;### &lt;strong&gt;1. Event Sourcing + CQRS&lt;/strong&gt;- Les commandes g√©n√®rent des √©v√©nements- Les requ√™tes lisent depuis les projections### &lt;strong&gt;2. CQRS avec Projections&lt;/strong&gt;- Projections d√©normalis√©es pour les requ√™tes- Mise √† jour asynchrone des vues### &lt;strong&gt;3. CQRS avec API Platform&lt;/strong&gt;- Ressources s√©par√©es pour Command et Query- Validation automatique des DTOs## ‚ö° &lt;strong&gt;Performance et Optimisation&lt;/strong&gt;### &lt;strong&gt;Optimisations C√¥t√© Lecture&lt;/strong&gt;- &lt;strong&gt;Indexation&lt;/strong&gt; : Index optimis√©s pour les requ√™tes fr√©quentes- &lt;strong&gt;Cache&lt;/strong&gt; : Mise en cache des vues fr√©quemment consult√©es- &lt;strong&gt;D√©normalisation&lt;/strong&gt; : Donn√©es pr√©-calcul√©es pour √©viter les jointures### &lt;strong&gt;Optimisations C√¥t√© √âcriture&lt;/strong&gt;- &lt;strong&gt;Validation&lt;/strong&gt; : Validation m√©tier centralis√©e- &lt;strong&gt;Transactions&lt;/strong&gt; : Gestion des transactions optimis√©e- &lt;strong&gt;√âv√©nements&lt;/strong&gt; : Publication asynchrone des √©v√©nements## üéØ &lt;strong&gt;Quand Utiliser CQRS ?&lt;/strong&gt;### &lt;strong&gt;‚úÖ Cas d&amp;rsquo;Usage Appropri√©s&lt;/strong&gt;- &lt;strong&gt;Complexit√© m√©tier √©lev√©e&lt;/strong&gt; : Beaucoup de r√®gles m√©tier- &lt;strong&gt;Besoins de lecture/√©criture diff√©rents&lt;/strong&gt; : Requ√™tes complexes vs √©critures simples- &lt;strong&gt;Performance critique&lt;/strong&gt; : Besoins de performance diff√©rents- &lt;strong&gt;√âquipes s√©par√©es&lt;/strong&gt; : √âquipes diff√©rentes pour read/write### &lt;strong&gt;‚ùå Cas d&amp;rsquo;Usage Inappropri√©s&lt;/strong&gt;- &lt;strong&gt;Applications simples&lt;/strong&gt; : CRUD basique- &lt;strong&gt;Coh√©rence forte requise&lt;/strong&gt; : Besoin de coh√©rence imm√©diate- &lt;strong&gt;√âquipe unique&lt;/strong&gt; : Une seule √©quipe pour tout- &lt;strong&gt;Prototypage&lt;/strong&gt; : D√©veloppement rapide## üîÑ &lt;strong&gt;Migration vers CQRS&lt;/strong&gt;### &lt;strong&gt;√âtape 1 : Identifier les Commandes&lt;/strong&gt;- Lister toutes les op√©rations qui modifient l&amp;rsquo;√©tat- Grouper par contexte m√©tier### &lt;strong&gt;√âtape 2 : Identifier les Requ√™tes&lt;/strong&gt;- Lister toutes les op√©rations de lecture- Analyser les patterns d&amp;rsquo;acc√®s### &lt;strong&gt;√âtape 3 : S√©parer les Mod√®les&lt;/strong&gt;- Cr√©er des mod√®les distincts- Migrer progressivement### &lt;strong&gt;√âtape 4 : Optimiser&lt;/strong&gt;- Optimiser chaque c√¥t√© ind√©pendamment- Mesurer les performances## üìä &lt;strong&gt;M√©triques et Monitoring&lt;/strong&gt;### &lt;strong&gt;M√©triques C√¥t√© Commande&lt;/strong&gt;- Nombre de commandes par seconde- Temps de traitement moyen- Taux d&amp;rsquo;erreur### &lt;strong&gt;M√©triques C√¥t√© Requ√™te&lt;/strong&gt;- Temps de r√©ponse des requ√™tes- Utilisation du cache- Charge des projections## üéØ &lt;strong&gt;Prochaines √âtapes&lt;/strong&gt;Maintenant que vous comprenez CQRS, explorez :1. &lt;strong&gt;&lt;a href="http://localhost:1313/concept/event-sourcing/"&gt;Event Sourcing&lt;/a&gt;&lt;/strong&gt; : Stocker les √©v√©nements comme source de v√©rit√©2. &lt;strong&gt;&lt;a href="http://localhost:1313/concept/repositories/"&gt;Repositories&lt;/a&gt;&lt;/strong&gt; : Patterns de persistance3. &lt;strong&gt;&lt;a href="http://localhost:1313/chapitres/optionnels/chapitre-13-architecture-cqrs/"&gt;Impl√©mentation CQRS&lt;/a&gt;&lt;/strong&gt; : Guide d&amp;rsquo;impl√©mentation complet&amp;mdash;&lt;em&gt;CQRS n&amp;rsquo;est pas une solution universelle, mais un outil puissant pour les applications complexes. Dans Gyroscops, il nous a permis de g√©rer efficacement la complexit√© m√©tier tout en optimisant les performances.&lt;/em&gt; &lt;a href="#-quest-ce-que-cqrs-cqrs-command-query-responsibility-segregation-est-un-pattern-architectural-qui-s%c3%a9pare-clairement-les-op%c3%a9rations-de-lecture-query-des-op%c3%a9rations-d%c3%a9criture-command-dans-une-application-le-principe-fondamental----bertrand-meyercqrs-pousse-ce-principe-%c3%a0-lextr%c3%aame-en-cr%c3%a9ant-deux-mod%c3%a8les-distincts---mod%c3%a8le-de-commande--pour-les-op%c3%a9rations-qui-modifient-l%c3%a9tat--mod%c3%a8le-de-requ%c3%aate--pour-les-op%c3%a9rations-qui-lisent-les-donn%c3%a9es--architecture-cqrs-dans-gyroscops-contexte-m%c3%a9tier--gestion-des-paiementsdans-gyroscops-nous-g%c3%a9rons-des-paiements-avec-des-besoins-tr%c3%a8s-diff%c3%a9rents--c%c3%b4t%c3%a9-commande-writephp-commande--cr%c3%a9er-un-paiementclass-createpaymentcommand----public-function-__construct--------public-readonly-paymentid-paymentid--------public-readonly-amount-amount--------public-readonly-paymentmethod-method--------public-readonly-customerid-customerid------handler--traiter-la-commandeclass-createpaymenthandler----public-function-__invokecreatepaymentcommand-command-void------------payment--paymentcreate------------command-paymentid------------command-amount------------command-method------------command-customerid------------------------this-paymentrepository-savepayment--------this-eventbus-dispatchnew-paymentcreatedpayment-----c%c3%b4t%c3%a9-requ%c3%aate-readphp-requ%c3%aate--obtenir-les-paiements-dun-clientclass-getcustomerpaymentsquery----public-function-__construct--------public-readonly-customerid-customerid--------public-readonly-daterange-daterange--null------handler--ex%c3%a9cuter-la-requ%c3%aateclass-getcustomerpaymentshandler----public-function-__invokegetcustomerpaymentsquery-query-array------------return-this-paymentqueryrepository-findbycustomer------------query-customerid------------query-daterange--------------avantages-de-cqrs-1-s%c3%a9paration-des-responsabilit%c3%a9s--commandes--focus-sur-la-logique-m%c3%a9tier-et-la-validation--requ%c3%aates--focus-sur-loptimisation-des-performances-de-lecture-2-optimisation-ind%c3%a9pendante--write-model--optimis%c3%a9-pour-la-coh%c3%a9rence-et-les-invariants-m%c3%a9tier--read-model--optimis%c3%a9-pour-les-performances-et-la-flexibilit%c3%a9-3-scalabilit%c3%a9--possibilit%c3%a9-de-scaler-s%c3%a9par%c3%a9ment-les-lectures-et-les-%c3%a9critures--utilisation-de-technologies-diff%c3%a9rentes-pour-chaque-c%c3%b4t%c3%a9-4-%c3%a9volutivit%c3%a9--modification-des-requ%c3%aates-sans-impact-sur-les-commandes--ajout-de-nouvelles-vues-sans-affecter-la-logique-m%c3%a9tier--impl%c3%a9mentation-dans-gyroscops-structure-des-dossierssrcaccounting-application----command-------createpayment----------createpaymentcommandphp----------createpaymenthandlerphp----------createpaymentvalidatorphp-------processrefund----query--------getpaymentdetails-----------getpaymentdetailsqueryphp-----------getpaymentdetailshandlerphp-----------paymentdetailsviewphp--------listcustomerpayments-domain----paymentphp-write-model----paymentdetailsphp-read-model-infrastructure-----paymentrepositoryphp-write-----paymentqueryrepositoryphp-read-exemple-concret--gestion-des-abonnements-commande--cr%c3%a9er-un-abonnementphpclass-createsubscriptioncommand----public-function-__construct--------public-readonly-subscriptionid-subscriptionid--------public-readonly-planid-planid--------public-readonly-customerid-customerid--------public-readonly-billingcycle-billingcycle-----class-createsubscriptionhandler----public-function-__invokecreatesubscriptioncommand-command-void-------------validation-m%c3%a9tier--------this-validatesubscriptioncreationcommand-----------------cr%c3%a9ation-de-lagr%c3%a9gat--------subscription--subscriptioncreate------------command-subscriptionid------------command-planid------------command-customerid------------command-billingcycle-------------------------persistance--------this-subscriptionrepository-savesubscription-----------------%c3%a9v%c3%a9nement--------this-eventbus-dispatchnew-subscriptioncreatedsubscription-----requ%c3%aate--obtenir-les-d%c3%a9tails-dphpclass-getsubscriptiondetailsquery----public-function-__construct--------public-readonly-subscriptionid-subscriptionid-----class-getsubscriptiondetailshandler----public-function-__invokegetsubscriptiondetailsquery-query-subscriptiondetailsview------------return-this-subscriptionqueryrepository-finddetailsquery-subscriptionid----class-subscriptiondetailsview----public-function-__construct--------public-readonly-subscriptionid-id--------public-readonly-string-planname--------public-readonly-string-customername--------public-readonly-string-status--------public-readonly-datetime-startdate--------public-readonly-datetime-enddate--------public-readonly-amount-monthlyprice--------public-readonly-array-features-------patterns-avanc%c3%a9s-avec-cqrs-1-event-sourcing--cqrs--les-commandes-g%c3%a9n%c3%a8rent-des-%c3%a9v%c3%a9nements--les-requ%c3%aates-lisent-depuis-les-projections-2-cqrs-avec-projections--projections-d%c3%a9normalis%c3%a9es-pour-les-requ%c3%aates--mise-%c3%a0-jour-asynchrone-des-vues-3-cqrs-avec-api-platform--ressources-s%c3%a9par%c3%a9es-pour-command-et-query--validation-automatique-des-dtos--performance-et-optimisation-optimisations-c%c3%b4t%c3%a9-lecture--indexation--index-optimis%c3%a9s-pour-les-requ%c3%aates-fr%c3%a9quentes--cache--mise-en-cache-des-vues-fr%c3%a9quemment-consult%c3%a9es--d%c3%a9normalisation--donn%c3%a9es-pr%c3%a9-calcul%c3%a9es-pour-%c3%a9viter-les-jointures-optimisations-c%c3%b4t%c3%a9-%c3%a9criture--validation--validation-m%c3%a9tier-centralis%c3%a9e--transactions--gestion-des-transactions-optimis%c3%a9e--%c3%a9v%c3%a9nements--publication-asynchrone-des-%c3%a9v%c3%a9nements--quand-utiliser-cqrs---cas-d--complexit%c3%a9-m%c3%a9tier-%c3%a9lev%c3%a9e--beaucoup-de-r%c3%a8gles-m%c3%a9tier--besoins-de-lecture%c3%a9criture-diff%c3%a9rents--requ%c3%aates-complexes-vs-%c3%a9critures-simples--performance-critique--besoins-de-performance-diff%c3%a9rents--%c3%a9quipes-s%c3%a9par%c3%a9es--%c3%a9quipes-diff%c3%a9rentes-pour-readwrite--cas-d--applications-simples--crud-basique--coh%c3%a9rence-forte-requise--besoin-de-coh%c3%a9rence-imm%c3%a9diate--%c3%a9quipe-unique--une-seule-%c3%a9quipe-pour-tout--prototypage--d%c3%a9veloppement-rapide--migration-vers-cqrs-%c3%a9tape-1--identifier-les-commandes--lister-toutes-les-op%c3%a9rations-qui-modifient-l%c3%a9tat--grouper-par-contexte-m%c3%a9tier-%c3%a9tape-2--identifier-les-requ%c3%aates--lister-toutes-les-op%c3%a9rations-de-lecture--analyser-les-patterns-dacc%c3%a8s-%c3%a9tape-3--s%c3%a9parer-les-mod%c3%a8les--cr%c3%a9er-des-mod%c3%a8les-distincts--migrer-progressivement-%c3%a9tape-4--optimiser--optimiser-chaque-c%c3%b4t%c3%a9-ind%c3%a9pendamment--mesurer-les-performances--m%c3%a9triques-et-monitoring-m%c3%a9triques-c%c3%b4t%c3%a9-commande--nombre-de-commandes-par-seconde--temps-de-traitement-moyen--taux-derreur-m%c3%a9triques-c%c3%b4t%c3%a9-requ%c3%aate--temps-de-r%c3%a9ponse-des-requ%c3%aates--utilisation-du-cache--charge-des-projections--prochaines-%c3%a9tapesmaintenant-que-vous-comprenez-cqrs-explorez-1-event-sourcing--stocker-les-%c3%a9v%c3%a9nements-comme-source-de-v%c3%a9rit%c3%a92-repositories--patterns-de-persistance3-impl%c3%a9mentation-cqrs--guide-dimpl%c3%a9mentation-completcqrs-n" class="anchor" aria-hidden="true"&gt;&lt;i class="material-icons align-middle"&gt;link&lt;/i&gt;&lt;/a&gt;&lt;/h2&gt;</description></item><item><title>Test Page</title><link>http://localhost:1313/test/</link><pubDate>Thu, 19 Dec 2024 00:00:00 +0000</pubDate><guid>http://localhost:1313/test/</guid><description>&lt;p&gt;Ceci est une page de test pour v√©rifier que le contenu s&amp;rsquo;affiche correctement.## Section 1Contenu de la section 1.## Section 2Contenu de la section 2.&lt;/p&gt;</description></item><item><title>Organisation des dossiers en DDD</title><link>http://localhost:1313/annexes/organisation-dossiers/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>http://localhost:1313/annexes/organisation-dossiers/</guid><description>&lt;p&gt;D√©couvrez diff√©rentes approches pour structurer votre projet DDD selon sa taille et sa complexit√©.&lt;/p&gt;
&lt;h2 id="-principes-fondamentaux"&gt;üéØ Principes fondamentaux&lt;/h2&gt;
&lt;p&gt;L&amp;rsquo;organisation des dossiers en DDD doit respecter plusieurs principes cl√©s :&lt;/p&gt;
&lt;h3 id="-s√©paration-par-bounded-context"&gt;üèóÔ∏è S√©paration par Bounded Context&lt;/h3&gt;
&lt;p&gt;Chaque contexte m√©tier doit avoir sa propre structure ind√©pendante.&lt;/p&gt;
&lt;h3 id="-couches-architecturales"&gt;üì¶ Couches architecturales&lt;/h3&gt;
&lt;p&gt;Domain, Application, Infrastructure et Interface clairement s√©par√©es.&lt;/p&gt;
&lt;h3 id="-cqrs-et-event-sourcing"&gt;üîÑ CQRS et Event Sourcing&lt;/h3&gt;
&lt;p&gt;S√©paration claire entre Command et Query, avec gestion des √©v√©nements.&lt;/p&gt;
&lt;h3 id="-tests-int√©gr√©s"&gt;üß™ Tests int√©gr√©s&lt;/h3&gt;
&lt;p&gt;Structure de tests qui refl√®te l&amp;rsquo;organisation du code de production.&lt;/p&gt;</description></item><item><title>Event Sourcing - Stocker les √âv√©nements comme Source de V√©rit√©</title><link>http://localhost:1313/patterns/event-sourcing/</link><pubDate>Thu, 19 Dec 2024 00:00:00 +0000</pubDate><guid>http://localhost:1313/patterns/event-sourcing/</guid><description>&lt;h2 id="-quest-ce-que-levent-sourcing-event-sourcing-est-un-pattern-architectural-qui-stocke-les-√©v√©nements-m√©tier-comme-source-de-v√©rit√©-plut√¥t-que-l√©tat-actuel-des-entit√©s-le-principe-fondamental-l√©tat-dune-entit√©-est-la-cons√©quence-de-tous-les-√©v√©nements-qui-lui-sont-arriv√©sau-lieu-de-stocker-l√©tat-actuel-on-stocke---tous-les-√©v√©nements-qui-ont-modifi√©-lentit√©--l-de-ces-√©v√©nements--les-m√©tadonn√©es-associ√©es-√†-chaque-√©v√©nement--event-sourcing-dans-gyroscops-contexte-m√©tier--gestion-des-abonnementsdans-gyroscops-un-abonnement-passe-par-plusieurs-√©tats--√©v√©nements-m√©tierphp-√©v√©nement--abonnement-cr√©√©class-subscriptioncreated-implements-domainevent----public-function-__construct--------public-readonly-subscriptionid-subscriptionid--------public-readonly-planid-planid--------public-readonly-customerid-customerid--------public-readonly-datetime-createdat--------public-readonly-billingcycle-billingcycle------√©v√©nement--abonnement-activ√©class-subscriptionactivated-implements-domainevent----public-function-__construct--------public-readonly-subscriptionid-subscriptionid--------public-readonly-datetime-activatedat--------public-readonly-datetime-nextbillingdate------√©v√©nement--paiement-trait√©class-paymentprocessed-implements-domainevent----public-function-__construct--------public-readonly-subscriptionid-subscriptionid--------public-readonly-paymentid-paymentid--------public-readonly-amount-amount--------public-readonly-datetime-processedat------√©v√©nement--abonnement-suspenduclass-subscriptionsuspended-implements-domainevent----public-function-__construct--------public-readonly-subscriptionid-subscriptionid--------public-readonly-string-reason--------public-readonly-datetime-suspendedat------reconstruction-de-lphpclass-subscription----private-subscriptionid-id----private-subscriptionstatus-status----private-datetime-nextbillingdate----private-array-payments----------public-static-function-fromeventsarray-events-self------------subscription--new-self----------------foreach-events-as-event-------------subscription-applyevent------------------------return-subscription------------private-function-applydomainevent-event-void------------match-eventclass-------------subscriptioncreatedclass--this-applysubscriptioncreatedevent------------subscriptionactivatedclass--this-applysubscriptionactivatedevent------------paymentprocessedclass--this-applypaymentprocessedevent------------subscriptionsuspendedclass--this-applysubscriptionsuspendedevent--------------------private-function-applysubscriptioncreatedsubscriptioncreated-event-void------------this-id--event-subscriptionid--------this-status--subscriptionstatuspending--------this-nextbillingdate--event-createdat-addevent-billingcycle-interval------------private-function-applysubscriptionactivatedsubscriptionactivated-event-void------------this-status--subscriptionstatusactive--------this-nextbillingdate--event-nextbillingdate------------private-function-applypaymentprocessedpaymentprocessed-event-void------------this-payments--event-paymentid--------this-nextbillingdate--this-nextbillingdate-addthis-billingcycle-interval------------private-function-applysubscriptionsuspendedsubscriptionsuspended-event-void------------this-status--subscriptionstatussuspended------avantages-de-l-1-tra√ßabilit√©-compl√®te--historique-complet--tous-les-changements-sont-enregistr√©s--audit-trail--qui-a-fait-quoi-et-quand--debugging--possibilit√©-de-rejouer-lhistorique-2-flexibilit√©-temporelle--time-travel--voir-l√©tat-√†-nimporte-quel-moment--replay--rejouer-les-√©v√©nements-pour-tester--debugging--comprendre-comment-on-est-arriv√©-√†-un-√©tat-3-√©volutivit√©--nouvelles-projections--cr√©er-de-nouvelles-vues-sans-modifier-le-code-existant--migration--faciliter-les-migrations-de-donn√©es--analytics--analyser-lhistorique-des-√©v√©nements-4-coh√©rence-√©v√©nementielle--source-de-v√©rit√©-unique--les-√©v√©nements-sont-la-seule-source-de-v√©rit√©--int√©grit√©--impossible-de-corrompre-lhistorique--r√©conciliation--possibilit√©-de-d√©tecter-les-incoh√©rences--impl√©mentation-dans-gyroscops-structure-des-dossierssrcaccounting-domain----events-------subscriptioncreatedphp-------subscriptionactivatedphp-------paymentprocessedphp-------subscriptionsuspendedphp----subscriptionphp----eventstorephp-infrastructure----eventstore-------doctrineeventstorephp-------eventstorerepositoryphp----projections--------subscriptionprojectionphp--------paymentprojectionphp-application-----command--------activatesubscription-----query---------getsubscriptionhistory-event-storephpinterface-eventstore----public-function-appendstreamid-streamid-array-events-int-expectedversion-void----public-function-geteventsstreamid-streamid-array----public-function-geteventsfromversionstreamid-streamid-int-fromversion-arrayclass-doctrineeventstore-implements-eventstore----public-function-appendstreamid-streamid-array-events-int-expectedversion-void------------this-entitymanager-transactionalfunction--use-streamid-events-expectedversion--------------v√©rifier-la-version-attendue------------currentversion--this-getcurrentversionstreamid------------if-currentversion--expectedversion-----------------throw-new-concurrencyexceptionversion-mismatch-------------------------------------enregistrer-les-√©v√©nements------------foreach-events-as-event-----------------this-persisteventstreamid-event--------------------------------public-function-geteventsstreamid-streamid-array------------return-this-eventrepository-findbystreamidstreamid-----projectionsphpclass-subscriptionprojection----public-function-__construct--------private-subscriptionqueryrepository-queryrepository-------------public-function-handledomainevent-event-void------------match-eventclass-------------subscriptioncreatedclass--this-handlesubscriptioncreatedevent------------subscriptionactivatedclass--this-handlesubscriptionactivatedevent------------paymentprocessedclass--this-handlepaymentprocessedevent--------------------private-function-handlesubscriptioncreatedsubscriptioncreated-event-void------------this-queryrepository-createsubscriptionview------------event-subscriptionid------------event-planid------------event-customerid------------subscriptionstatuspending------------event-createdat--------------------private-function-handlesubscriptionactivatedsubscriptionactivated-event-void------------this-queryrepository-updatesubscriptionstatus------------event-subscriptionid------------subscriptionstatusactive------------event-nextbillingdate--------------patterns-avanc√©s-avec-event-sourcing-1-snapshotsphpclass-subscriptionsnapshot----public-function-__construct--------public-readonly-subscriptionid-id--------public-readonly-subscriptionstatus-status--------public-readonly-datetime-nextbillingdate--------public-readonly-int-version-----class-snapshotservice----public-function-createsnapshotsubscription-subscription-subscriptionsnapshot------------return-new-subscriptionsnapshot------------subscription-id------------subscription-status------------subscription-nextbillingdate------------subscription-version--------------------public-function-restorefromsnapshotsubscriptionsnapshot-snapshot-array-events-subscription------------subscription--subscriptionfromsnapshotsnapshot-----------------appliquer-seulement-les-√©v√©nements-apr√®s-le-snapshot--------eventsaftersnapshot--array_filter------------events------------fnevent--event-version--snapshot-version------------------------foreach-eventsaftersnapshot-as-event-------------subscription-applyevent------------------------return-subscription-----2-event-sourcing--cqrs--command-side--g√®re-les-√©v√©nements-et-levent-store--query-side--lit-depuis-les-projections-3-event-sourcing--api-platform--ressources--exposer-les-√©v√©nements-via-lapi--validation--valider-les-√©v√©nements-avant-stockage--performance-et-optimisation-optimisations-de-l--indexation--index-sur-stream_id-et-version--partitioning--partitionner-par-stream_id--compression--compresser-les-anciens-√©v√©nements-optimisations-des-projections--snapshots--cr√©er-des-snapshots-r√©guliers--projections-asynchrones--traiter-les-projections-en-arri√®re-plan--cache--mettre-en-cache-les-projections-fr√©quentes--quand-utiliser-l--cas-d--audit-critique--besoin-de-tra√ßabilit√©-compl√®te--compliance--r√©glementations-strictes--analytics--besoin-danalyser-lhistorique--debugging-complexe--syst√®mes-complexes-√†-d√©boguer--cas-d--applications-simples--crud-basique--performance-critique--besoins-de-performance-extr√™me--√©quipe-inexp√©riment√©e--complexit√©-√©lev√©e--prototypage--d√©veloppement-rapide--migration-vers-event-sourcing-√©tape-1--identifier-les-√©v√©nements-m√©tier--lister-tous-les-changements-d√©tat--grouper-par-contexte-m√©tier-√©tape-2--cr√©er-l--choisir-la-technologie-de-stockage--impl√©menter-les-interfaces-√©tape-3--migrer-les-agr√©gats--convertir-les-entit√©s-en-√©v√©nements--impl√©menter-la-reconstruction-√©tape-4--cr√©er-les-projections--cr√©er-les-vues-de-lecture--impl√©menter-la-synchronisation--m√©triques-et-monitoring-m√©triques-event-store--nombre-d√©v√©nements-par-seconde--taille-des-streams--temps-de-reconstruction-m√©triques-projections--d√©lai-de-traitement-des-√©v√©nements--taille-des-projections--performance-des-requ√™tes--prochaines-√©tapesmaintenant-que-vous-comprenez-levent-sourcing-explorez-1-cqrs--s√©parer-les-commandes-des-requ√™tes2-repositories--patterns-de-persistance3-impl√©mentation-event-sourcing--guide-dimpl√©mentation-completevent-sourcing-transforme-la-fa√ßon-dont-nous-pensons-la-persistance-dans-gyroscops-il-nous-a-permis-de-g√©rer-la-complexit√©-m√©tier-tout-en-gardant-une-tra√ßabilit√©-compl√®te-de-tous-les-changements"&gt;üåü **Qu&amp;rsquo;est-ce que l&amp;rsquo;Event Sourcing ?**&lt;strong&gt;Event Sourcing&lt;/strong&gt; est un pattern architectural qui stocke les &lt;strong&gt;√©v√©nements m√©tier&lt;/strong&gt; comme source de v√©rit√©, plut√¥t que l&amp;rsquo;√©tat actuel des entit√©s.### &lt;strong&gt;Le Principe Fondamental&lt;/strong&gt;&amp;gt; **&amp;ldquo;L&amp;rsquo;√©tat d&amp;rsquo;une entit√© est la cons√©quence de tous les √©v√©nements qui lui sont arriv√©s&amp;rdquo;**Au lieu de stocker l&amp;rsquo;√©tat actuel, on stocke :- &lt;strong&gt;Tous les √©v√©nements&lt;/strong&gt; qui ont modifi√© l&amp;rsquo;entit√©- &lt;strong&gt;L&amp;rsquo;ordre chronologique&lt;/strong&gt; de ces √©v√©nements- &lt;strong&gt;Les m√©tadonn√©es&lt;/strong&gt; associ√©es √† chaque √©v√©nement## üèóÔ∏è &lt;strong&gt;Event Sourcing dans Gyroscops&lt;/strong&gt;### &lt;strong&gt;Contexte M√©tier : Gestion des Abonnements&lt;/strong&gt;Dans Gyroscops, un abonnement passe par plusieurs √©tats :#### &lt;strong&gt;√âv√©nements M√©tier&lt;/strong&gt;&lt;code&gt;php// √âv√©nement : Abonnement cr√©√©class SubscriptionCreated implements DomainEvent{ public function __construct( public readonly SubscriptionId $subscriptionId, public readonly PlanId $planId, public readonly CustomerId $customerId, public readonly DateTime $createdAt, public readonly BillingCycle $billingCycle ) {}}// √âv√©nement : Abonnement activ√©class SubscriptionActivated implements DomainEvent{ public function __construct( public readonly SubscriptionId $subscriptionId, public readonly DateTime $activatedAt, public readonly DateTime $nextBillingDate ) {}}// √âv√©nement : Paiement trait√©class PaymentProcessed implements DomainEvent{ public function __construct( public readonly SubscriptionId $subscriptionId, public readonly PaymentId $paymentId, public readonly Amount $amount, public readonly DateTime $processedAt ) {}}// √âv√©nement : Abonnement suspenduclass SubscriptionSuspended implements DomainEvent{ public function __construct( public readonly SubscriptionId $subscriptionId, public readonly string $reason, public readonly DateTime $suspendedAt ) {}}&lt;/code&gt;#### &lt;strong&gt;Reconstruction de l&amp;rsquo;√âtat&lt;/strong&gt;&lt;code&gt;phpclass Subscription{ private SubscriptionId $id; private SubscriptionStatus $status; private ?DateTime $nextBillingDate; private array $payments = []; public static function fromEvents(array $events): self { $subscription = new self(); foreach ($events as $event) { $subscription-&amp;gt;apply($event); } return $subscription; } private function apply(DomainEvent $event): void { match ($event::class) { SubscriptionCreated::class =&amp;gt; $this-&amp;gt;applySubscriptionCreated($event), SubscriptionActivated::class =&amp;gt; $this-&amp;gt;applySubscriptionActivated($event), PaymentProcessed::class =&amp;gt; $this-&amp;gt;applyPaymentProcessed($event), SubscriptionSuspended::class =&amp;gt; $this-&amp;gt;applySubscriptionSuspended($event), }; } private function applySubscriptionCreated(SubscriptionCreated $event): void { $this-&amp;gt;id = $event-&amp;gt;subscriptionId; $this-&amp;gt;status = SubscriptionStatus::PENDING; $this-&amp;gt;nextBillingDate = $event-&amp;gt;createdAt-&amp;gt;add($event-&amp;gt;billingCycle-&amp;gt;interval()); } private function applySubscriptionActivated(SubscriptionActivated $event): void { $this-&amp;gt;status = SubscriptionStatus::ACTIVE; $this-&amp;gt;nextBillingDate = $event-&amp;gt;nextBillingDate; } private function applyPaymentProcessed(PaymentProcessed $event): void { $this-&amp;gt;payments[] = $event-&amp;gt;paymentId; $this-&amp;gt;nextBillingDate = $this-&amp;gt;nextBillingDate-&amp;gt;add($this-&amp;gt;billingCycle-&amp;gt;interval()); } private function applySubscriptionSuspended(SubscriptionSuspended $event): void { $this-&amp;gt;status = SubscriptionStatus::SUSPENDED; }}&lt;/code&gt;## üéØ &lt;strong&gt;Avantages de l&amp;rsquo;Event Sourcing&lt;/strong&gt;### &lt;strong&gt;1. Tra√ßabilit√© Compl√®te&lt;/strong&gt;- &lt;strong&gt;Historique complet&lt;/strong&gt; : Tous les changements sont enregistr√©s- &lt;strong&gt;Audit trail&lt;/strong&gt; : Qui a fait quoi et quand- &lt;strong&gt;Debugging&lt;/strong&gt; : Possibilit√© de rejouer l&amp;rsquo;historique### &lt;strong&gt;2. Flexibilit√© Temporelle&lt;/strong&gt;- &lt;strong&gt;Time travel&lt;/strong&gt; : Voir l&amp;rsquo;√©tat √† n&amp;rsquo;importe quel moment- &lt;strong&gt;Replay&lt;/strong&gt; : Rejouer les √©v√©nements pour tester- &lt;strong&gt;Debugging&lt;/strong&gt; : Comprendre comment on est arriv√© √† un √©tat### &lt;strong&gt;3. √âvolutivit√©&lt;/strong&gt;- &lt;strong&gt;Nouvelles projections&lt;/strong&gt; : Cr√©er de nouvelles vues sans modifier le code existant- &lt;strong&gt;Migration&lt;/strong&gt; : Faciliter les migrations de donn√©es- &lt;strong&gt;Analytics&lt;/strong&gt; : Analyser l&amp;rsquo;historique des √©v√©nements### &lt;strong&gt;4. Coh√©rence √âv√©nementielle&lt;/strong&gt;- &lt;strong&gt;Source de v√©rit√© unique&lt;/strong&gt; : Les √©v√©nements sont la seule source de v√©rit√©- &lt;strong&gt;Int√©grit√©&lt;/strong&gt; : Impossible de corrompre l&amp;rsquo;historique- &lt;strong&gt;R√©conciliation&lt;/strong&gt; : Possibilit√© de d√©tecter les incoh√©rences## üîß &lt;strong&gt;Impl√©mentation dans Gyroscops&lt;/strong&gt;### &lt;strong&gt;Structure des Dossiers&lt;/strong&gt;&lt;code&gt;src/Accounting/‚îú‚îÄ‚îÄ Domain/‚îÇ ‚îú‚îÄ‚îÄ Events/‚îÇ ‚îÇ ‚îú‚îÄ‚îÄ SubscriptionCreated.php‚îÇ ‚îÇ ‚îú‚îÄ‚îÄ SubscriptionActivated.php‚îÇ ‚îÇ ‚îú‚îÄ‚îÄ PaymentProcessed.php‚îÇ ‚îÇ ‚îî‚îÄ‚îÄ SubscriptionSuspended.php‚îÇ ‚îú‚îÄ‚îÄ Subscription.php‚îÇ ‚îî‚îÄ‚îÄ EventStore.php‚îú‚îÄ‚îÄ Infrastructure/‚îÇ ‚îú‚îÄ‚îÄ EventStore/‚îÇ ‚îÇ ‚îú‚îÄ‚îÄ DoctrineEventStore.php‚îÇ ‚îÇ ‚îî‚îÄ‚îÄ EventStoreRepository.php‚îÇ ‚îî‚îÄ‚îÄ Projections/‚îÇ ‚îú‚îÄ‚îÄ SubscriptionProjection.php‚îÇ ‚îî‚îÄ‚îÄ PaymentProjection.php‚îî‚îÄ‚îÄ Application/ ‚îú‚îÄ‚îÄ Command/ ‚îÇ ‚îî‚îÄ‚îÄ ActivateSubscription/ ‚îî‚îÄ‚îÄ Query/ ‚îî‚îÄ‚îÄ GetSubscriptionHistory/&lt;/code&gt;### &lt;strong&gt;Event Store&lt;/strong&gt;&lt;code&gt;phpinterface EventStore{ public function append(StreamId $streamId, array $events, int $expectedVersion): void; public function getEvents(StreamId $streamId): array; public function getEventsFromVersion(StreamId $streamId, int $fromVersion): array;}class DoctrineEventStore implements EventStore{ public function append(StreamId $streamId, array $events, int $expectedVersion): void { $this-&amp;gt;entityManager-&amp;gt;transactional(function () use ($streamId, $events, $expectedVersion) { // V√©rifier la version attendue $currentVersion = $this-&amp;gt;getCurrentVersion($streamId); if ($currentVersion !== $expectedVersion) { throw new ConcurrencyException('Version mismatch'); } // Enregistrer les √©v√©nements foreach ($events as $event) { $this-&amp;gt;persistEvent($streamId, $event); } }); } public function getEvents(StreamId $streamId): array { return $this-&amp;gt;eventRepository-&amp;gt;findByStreamId($streamId); }}&lt;/code&gt;### &lt;strong&gt;Projections&lt;/strong&gt;&lt;code&gt;phpclass SubscriptionProjection{ public function __construct( private SubscriptionQueryRepository $queryRepository ) {} public function handle(DomainEvent $event): void { match ($event::class) { SubscriptionCreated::class =&amp;gt; $this-&amp;gt;handleSubscriptionCreated($event), SubscriptionActivated::class =&amp;gt; $this-&amp;gt;handleSubscriptionActivated($event), PaymentProcessed::class =&amp;gt; $this-&amp;gt;handlePaymentProcessed($event), }; } private function handleSubscriptionCreated(SubscriptionCreated $event): void { $this-&amp;gt;queryRepository-&amp;gt;createSubscriptionView( $event-&amp;gt;subscriptionId, $event-&amp;gt;planId, $event-&amp;gt;customerId, SubscriptionStatus::PENDING, $event-&amp;gt;createdAt ); } private function handleSubscriptionActivated(SubscriptionActivated $event): void { $this-&amp;gt;queryRepository-&amp;gt;updateSubscriptionStatus( $event-&amp;gt;subscriptionId, SubscriptionStatus::ACTIVE, $event-&amp;gt;nextBillingDate ); }}&lt;/code&gt;## üöÄ &lt;strong&gt;Patterns Avanc√©s avec Event Sourcing&lt;/strong&gt;### &lt;strong&gt;1. Snapshots&lt;/strong&gt;&lt;code&gt;phpclass SubscriptionSnapshot{ public function __construct( public readonly SubscriptionId $id, public readonly SubscriptionStatus $status, public readonly DateTime $nextBillingDate, public readonly int $version ) {}}class SnapshotService{ public function createSnapshot(Subscription $subscription): SubscriptionSnapshot { return new SubscriptionSnapshot( $subscription-&amp;gt;id(), $subscription-&amp;gt;status(), $subscription-&amp;gt;nextBillingDate(), $subscription-&amp;gt;version() ); } public function restoreFromSnapshot(SubscriptionSnapshot $snapshot, array $events): Subscription { $subscription = Subscription::fromSnapshot($snapshot); // Appliquer seulement les √©v√©nements apr√®s le snapshot $eventsAfterSnapshot = array_filter( $events, fn($event) =&amp;gt; $event-&amp;gt;version() &amp;gt; $snapshot-&amp;gt;version ); foreach ($eventsAfterSnapshot as $event) { $subscription-&amp;gt;apply($event); } return $subscription; }}&lt;/code&gt;### &lt;strong&gt;2. Event Sourcing + CQRS&lt;/strong&gt;- &lt;strong&gt;Command Side&lt;/strong&gt; : G√®re les √©v√©nements et l&amp;rsquo;event store- &lt;strong&gt;Query Side&lt;/strong&gt; : Lit depuis les projections### &lt;strong&gt;3. Event Sourcing + API Platform&lt;/strong&gt;- &lt;strong&gt;Ressources&lt;/strong&gt; : Exposer les √©v√©nements via l&amp;rsquo;API- &lt;strong&gt;Validation&lt;/strong&gt; : Valider les √©v√©nements avant stockage## ‚ö° &lt;strong&gt;Performance et Optimisation&lt;/strong&gt;### &lt;strong&gt;Optimisations de l&amp;rsquo;Event Store&lt;/strong&gt;- &lt;strong&gt;Indexation&lt;/strong&gt; : Index sur stream_id et version- &lt;strong&gt;Partitioning&lt;/strong&gt; : Partitionner par stream_id- &lt;strong&gt;Compression&lt;/strong&gt; : Compresser les anciens √©v√©nements### &lt;strong&gt;Optimisations des Projections&lt;/strong&gt;- &lt;strong&gt;Snapshots&lt;/strong&gt; : Cr√©er des snapshots r√©guliers- &lt;strong&gt;Projections asynchrones&lt;/strong&gt; : Traiter les projections en arri√®re-plan- &lt;strong&gt;Cache&lt;/strong&gt; : Mettre en cache les projections fr√©quentes## üéØ &lt;strong&gt;Quand Utiliser l&amp;rsquo;Event Sourcing ?&lt;/strong&gt;### &lt;strong&gt;‚úÖ Cas d&amp;rsquo;Usage Appropri√©s&lt;/strong&gt;- &lt;strong&gt;Audit critique&lt;/strong&gt; : Besoin de tra√ßabilit√© compl√®te- &lt;strong&gt;Compliance&lt;/strong&gt; : R√©glementations strictes- &lt;strong&gt;Analytics&lt;/strong&gt; : Besoin d&amp;rsquo;analyser l&amp;rsquo;historique- &lt;strong&gt;Debugging complexe&lt;/strong&gt; : Syst√®mes complexes √† d√©boguer### &lt;strong&gt;‚ùå Cas d&amp;rsquo;Usage Inappropri√©s&lt;/strong&gt;- &lt;strong&gt;Applications simples&lt;/strong&gt; : CRUD basique- &lt;strong&gt;Performance critique&lt;/strong&gt; : Besoins de performance extr√™me- &lt;strong&gt;√âquipe inexp√©riment√©e&lt;/strong&gt; : Complexit√© √©lev√©e- &lt;strong&gt;Prototypage&lt;/strong&gt; : D√©veloppement rapide## üîÑ &lt;strong&gt;Migration vers Event Sourcing&lt;/strong&gt;### &lt;strong&gt;√âtape 1 : Identifier les √âv√©nements M√©tier&lt;/strong&gt;- Lister tous les changements d&amp;rsquo;√©tat- Grouper par contexte m√©tier### &lt;strong&gt;√âtape 2 : Cr√©er l&amp;rsquo;Event Store&lt;/strong&gt;- Choisir la technologie de stockage- Impl√©menter les interfaces### &lt;strong&gt;√âtape 3 : Migrer les Agr√©gats&lt;/strong&gt;- Convertir les entit√©s en √©v√©nements- Impl√©menter la reconstruction### &lt;strong&gt;√âtape 4 : Cr√©er les Projections&lt;/strong&gt;- Cr√©er les vues de lecture- Impl√©menter la synchronisation## üìä &lt;strong&gt;M√©triques et Monitoring&lt;/strong&gt;### &lt;strong&gt;M√©triques Event Store&lt;/strong&gt;- Nombre d&amp;rsquo;√©v√©nements par seconde- Taille des streams- Temps de reconstruction### &lt;strong&gt;M√©triques Projections&lt;/strong&gt;- D√©lai de traitement des √©v√©nements- Taille des projections- Performance des requ√™tes## üéØ &lt;strong&gt;Prochaines √âtapes&lt;/strong&gt;Maintenant que vous comprenez l&amp;rsquo;Event Sourcing, explorez :1. &lt;strong&gt;&lt;a href="http://localhost:1313/concept/cqrs/"&gt;CQRS&lt;/a&gt;&lt;/strong&gt; : S√©parer les commandes des requ√™tes2. &lt;strong&gt;&lt;a href="http://localhost:1313/concept/repositories/"&gt;Repositories&lt;/a&gt;&lt;/strong&gt; : Patterns de persistance3. &lt;strong&gt;&lt;a href="http://localhost:1313/chapitres/optionnels/chapitre-11-event-sourcing/"&gt;Impl√©mentation Event Sourcing&lt;/a&gt;&lt;/strong&gt; : Guide d&amp;rsquo;impl√©mentation complet&amp;mdash;&lt;em&gt;Event Sourcing transforme la fa√ßon dont nous pensons la persistance. Dans Gyroscops, il nous a permis de g√©rer la complexit√© m√©tier tout en gardant une tra√ßabilit√© compl√®te de tous les changements.&lt;/em&gt; &lt;a href="#-quest-ce-que-levent-sourcing-event-sourcing-est-un-pattern-architectural-qui-stocke-les-%c3%a9v%c3%a9nements-m%c3%a9tier-comme-source-de-v%c3%a9rit%c3%a9-plut%c3%b4t-que-l%c3%a9tat-actuel-des-entit%c3%a9s-le-principe-fondamental-l%c3%a9tat-dune-entit%c3%a9-est-la-cons%c3%a9quence-de-tous-les-%c3%a9v%c3%a9nements-qui-lui-sont-arriv%c3%a9sau-lieu-de-stocker-l%c3%a9tat-actuel-on-stocke---tous-les-%c3%a9v%c3%a9nements-qui-ont-modifi%c3%a9-lentit%c3%a9--l-de-ces-%c3%a9v%c3%a9nements--les-m%c3%a9tadonn%c3%a9es-associ%c3%a9es-%c3%a0-chaque-%c3%a9v%c3%a9nement--event-sourcing-dans-gyroscops-contexte-m%c3%a9tier--gestion-des-abonnementsdans-gyroscops-un-abonnement-passe-par-plusieurs-%c3%a9tats--%c3%a9v%c3%a9nements-m%c3%a9tierphp-%c3%a9v%c3%a9nement--abonnement-cr%c3%a9%c3%a9class-subscriptioncreated-implements-domainevent----public-function-__construct--------public-readonly-subscriptionid-subscriptionid--------public-readonly-planid-planid--------public-readonly-customerid-customerid--------public-readonly-datetime-createdat--------public-readonly-billingcycle-billingcycle------%c3%a9v%c3%a9nement--abonnement-activ%c3%a9class-subscriptionactivated-implements-domainevent----public-function-__construct--------public-readonly-subscriptionid-subscriptionid--------public-readonly-datetime-activatedat--------public-readonly-datetime-nextbillingdate------%c3%a9v%c3%a9nement--paiement-trait%c3%a9class-paymentprocessed-implements-domainevent----public-function-__construct--------public-readonly-subscriptionid-subscriptionid--------public-readonly-paymentid-paymentid--------public-readonly-amount-amount--------public-readonly-datetime-processedat------%c3%a9v%c3%a9nement--abonnement-suspenduclass-subscriptionsuspended-implements-domainevent----public-function-__construct--------public-readonly-subscriptionid-subscriptionid--------public-readonly-string-reason--------public-readonly-datetime-suspendedat------reconstruction-de-lphpclass-subscription----private-subscriptionid-id----private-subscriptionstatus-status----private-datetime-nextbillingdate----private-array-payments----------public-static-function-fromeventsarray-events-self------------subscription--new-self----------------foreach-events-as-event-------------subscription-applyevent------------------------return-subscription------------private-function-applydomainevent-event-void------------match-eventclass-------------subscriptioncreatedclass--this-applysubscriptioncreatedevent------------subscriptionactivatedclass--this-applysubscriptionactivatedevent------------paymentprocessedclass--this-applypaymentprocessedevent------------subscriptionsuspendedclass--this-applysubscriptionsuspendedevent--------------------private-function-applysubscriptioncreatedsubscriptioncreated-event-void------------this-id--event-subscriptionid--------this-status--subscriptionstatuspending--------this-nextbillingdate--event-createdat-addevent-billingcycle-interval------------private-function-applysubscriptionactivatedsubscriptionactivated-event-void------------this-status--subscriptionstatusactive--------this-nextbillingdate--event-nextbillingdate------------private-function-applypaymentprocessedpaymentprocessed-event-void------------this-payments--event-paymentid--------this-nextbillingdate--this-nextbillingdate-addthis-billingcycle-interval------------private-function-applysubscriptionsuspendedsubscriptionsuspended-event-void------------this-status--subscriptionstatussuspended------avantages-de-l-1-tra%c3%a7abilit%c3%a9-compl%c3%a8te--historique-complet--tous-les-changements-sont-enregistr%c3%a9s--audit-trail--qui-a-fait-quoi-et-quand--debugging--possibilit%c3%a9-de-rejouer-lhistorique-2-flexibilit%c3%a9-temporelle--time-travel--voir-l%c3%a9tat-%c3%a0-nimporte-quel-moment--replay--rejouer-les-%c3%a9v%c3%a9nements-pour-tester--debugging--comprendre-comment-on-est-arriv%c3%a9-%c3%a0-un-%c3%a9tat-3-%c3%a9volutivit%c3%a9--nouvelles-projections--cr%c3%a9er-de-nouvelles-vues-sans-modifier-le-code-existant--migration--faciliter-les-migrations-de-donn%c3%a9es--analytics--analyser-lhistorique-des-%c3%a9v%c3%a9nements-4-coh%c3%a9rence-%c3%a9v%c3%a9nementielle--source-de-v%c3%a9rit%c3%a9-unique--les-%c3%a9v%c3%a9nements-sont-la-seule-source-de-v%c3%a9rit%c3%a9--int%c3%a9grit%c3%a9--impossible-de-corrompre-lhistorique--r%c3%a9conciliation--possibilit%c3%a9-de-d%c3%a9tecter-les-incoh%c3%a9rences--impl%c3%a9mentation-dans-gyroscops-structure-des-dossierssrcaccounting-domain----events-------subscriptioncreatedphp-------subscriptionactivatedphp-------paymentprocessedphp-------subscriptionsuspendedphp----subscriptionphp----eventstorephp-infrastructure----eventstore-------doctrineeventstorephp-------eventstorerepositoryphp----projections--------subscriptionprojectionphp--------paymentprojectionphp-application-----command--------activatesubscription-----query---------getsubscriptionhistory-event-storephpinterface-eventstore----public-function-appendstreamid-streamid-array-events-int-expectedversion-void----public-function-geteventsstreamid-streamid-array----public-function-geteventsfromversionstreamid-streamid-int-fromversion-arrayclass-doctrineeventstore-implements-eventstore----public-function-appendstreamid-streamid-array-events-int-expectedversion-void------------this-entitymanager-transactionalfunction--use-streamid-events-expectedversion--------------v%c3%a9rifier-la-version-attendue------------currentversion--this-getcurrentversionstreamid------------if-currentversion--expectedversion-----------------throw-new-concurrencyexceptionversion-mismatch-------------------------------------enregistrer-les-%c3%a9v%c3%a9nements------------foreach-events-as-event-----------------this-persisteventstreamid-event--------------------------------public-function-geteventsstreamid-streamid-array------------return-this-eventrepository-findbystreamidstreamid-----projectionsphpclass-subscriptionprojection----public-function-__construct--------private-subscriptionqueryrepository-queryrepository-------------public-function-handledomainevent-event-void------------match-eventclass-------------subscriptioncreatedclass--this-handlesubscriptioncreatedevent------------subscriptionactivatedclass--this-handlesubscriptionactivatedevent------------paymentprocessedclass--this-handlepaymentprocessedevent--------------------private-function-handlesubscriptioncreatedsubscriptioncreated-event-void------------this-queryrepository-createsubscriptionview------------event-subscriptionid------------event-planid------------event-customerid------------subscriptionstatuspending------------event-createdat--------------------private-function-handlesubscriptionactivatedsubscriptionactivated-event-void------------this-queryrepository-updatesubscriptionstatus------------event-subscriptionid------------subscriptionstatusactive------------event-nextbillingdate--------------patterns-avanc%c3%a9s-avec-event-sourcing-1-snapshotsphpclass-subscriptionsnapshot----public-function-__construct--------public-readonly-subscriptionid-id--------public-readonly-subscriptionstatus-status--------public-readonly-datetime-nextbillingdate--------public-readonly-int-version-----class-snapshotservice----public-function-createsnapshotsubscription-subscription-subscriptionsnapshot------------return-new-subscriptionsnapshot------------subscription-id------------subscription-status------------subscription-nextbillingdate------------subscription-version--------------------public-function-restorefromsnapshotsubscriptionsnapshot-snapshot-array-events-subscription------------subscription--subscriptionfromsnapshotsnapshot-----------------appliquer-seulement-les-%c3%a9v%c3%a9nements-apr%c3%a8s-le-snapshot--------eventsaftersnapshot--array_filter------------events------------fnevent--event-version--snapshot-version------------------------foreach-eventsaftersnapshot-as-event-------------subscription-applyevent------------------------return-subscription-----2-event-sourcing--cqrs--command-side--g%c3%a8re-les-%c3%a9v%c3%a9nements-et-levent-store--query-side--lit-depuis-les-projections-3-event-sourcing--api-platform--ressources--exposer-les-%c3%a9v%c3%a9nements-via-lapi--validation--valider-les-%c3%a9v%c3%a9nements-avant-stockage--performance-et-optimisation-optimisations-de-l--indexation--index-sur-stream_id-et-version--partitioning--partitionner-par-stream_id--compression--compresser-les-anciens-%c3%a9v%c3%a9nements-optimisations-des-projections--snapshots--cr%c3%a9er-des-snapshots-r%c3%a9guliers--projections-asynchrones--traiter-les-projections-en-arri%c3%a8re-plan--cache--mettre-en-cache-les-projections-fr%c3%a9quentes--quand-utiliser-l--cas-d--audit-critique--besoin-de-tra%c3%a7abilit%c3%a9-compl%c3%a8te--compliance--r%c3%a9glementations-strictes--analytics--besoin-danalyser-lhistorique--debugging-complexe--syst%c3%a8mes-complexes-%c3%a0-d%c3%a9boguer--cas-d--applications-simples--crud-basique--performance-critique--besoins-de-performance-extr%c3%aame--%c3%a9quipe-inexp%c3%a9riment%c3%a9e--complexit%c3%a9-%c3%a9lev%c3%a9e--prototypage--d%c3%a9veloppement-rapide--migration-vers-event-sourcing-%c3%a9tape-1--identifier-les-%c3%a9v%c3%a9nements-m%c3%a9tier--lister-tous-les-changements-d%c3%a9tat--grouper-par-contexte-m%c3%a9tier-%c3%a9tape-2--cr%c3%a9er-l--choisir-la-technologie-de-stockage--impl%c3%a9menter-les-interfaces-%c3%a9tape-3--migrer-les-agr%c3%a9gats--convertir-les-entit%c3%a9s-en-%c3%a9v%c3%a9nements--impl%c3%a9menter-la-reconstruction-%c3%a9tape-4--cr%c3%a9er-les-projections--cr%c3%a9er-les-vues-de-lecture--impl%c3%a9menter-la-synchronisation--m%c3%a9triques-et-monitoring-m%c3%a9triques-event-store--nombre-d%c3%a9v%c3%a9nements-par-seconde--taille-des-streams--temps-de-reconstruction-m%c3%a9triques-projections--d%c3%a9lai-de-traitement-des-%c3%a9v%c3%a9nements--taille-des-projections--performance-des-requ%c3%aates--prochaines-%c3%a9tapesmaintenant-que-vous-comprenez-levent-sourcing-explorez-1-cqrs--s%c3%a9parer-les-commandes-des-requ%c3%aates2-repositories--patterns-de-persistance3-impl%c3%a9mentation-event-sourcing--guide-dimpl%c3%a9mentation-completevent-sourcing-transforme-la-fa%c3%a7on-dont-nous-pensons-la-persistance-dans-gyroscops-il-nous-a-permis-de-g%c3%a9rer-la-complexit%c3%a9-m%c3%a9tier-tout-en-gardant-une-tra%c3%a7abilit%c3%a9-compl%c3%a8te-de-tous-les-changements" class="anchor" aria-hidden="true"&gt;&lt;i class="material-icons align-middle"&gt;link&lt;/i&gt;&lt;/a&gt;&lt;/h2&gt;</description></item><item><title>Commencer l'Aventure DDD</title><link>http://localhost:1313/demarrer/</link><pubDate>Mon, 01 Jan 2024 00:00:00 +0000</pubDate><guid>http://localhost:1313/demarrer/</guid><description>&lt;h2 id="bienvenue-dans-votre-voyage-architectural"&gt;Bienvenue dans votre Voyage Architectural &lt;a href="#bienvenue-dans-votre-voyage-architectural" class="anchor" aria-hidden="true"&gt;&lt;i class="material-icons align-middle"&gt;link&lt;/i&gt;&lt;/a&gt;&lt;/h2&gt;&lt;p&gt;Vous voici au d√©but d&amp;rsquo;une aventure unique : &lt;strong&gt;construire une architecture robuste et √©volutive&lt;/strong&gt; en utilisant le Domain-Driven Design (DDD) avec API Platform. Ce guide interactif vous accompagnera pas √† pas, en s&amp;rsquo;adaptant √† votre niveau et √† vos besoins sp√©cifiques.&lt;/p&gt;
&lt;h3 id="pourquoi-ce-guide-existe-t-il-"&gt;Pourquoi ce Guide Existe-t-il ? &lt;a href="#pourquoi-ce-guide-existe-t-il-" class="anchor" aria-hidden="true"&gt;&lt;i class="material-icons align-middle"&gt;link&lt;/i&gt;&lt;/a&gt;&lt;/h3&gt;&lt;p&gt;Avec &lt;strong&gt;Gyroscops&lt;/strong&gt;, j&amp;rsquo;ai v√©cu les d√©fis de l&amp;rsquo;architecture logicielle moderne :&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Comment structurer un code qui √©volue avec les besoins m√©tier ?&lt;/li&gt;
&lt;li&gt;Comment g√©rer la complexit√© croissante sans perdre en maintenabilit√© ?&lt;/li&gt;
&lt;li&gt;Comment choisir les bons patterns au bon moment ?&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;L&amp;rsquo;architecture logicielle est un domaine o√π les compromis sont permanents et o√π chaque choix m√©rite d&amp;rsquo;√™tre remis en question. Ce guide est le fruit de cette exp√©rience, transform√©e en &lt;strong&gt;parcours interactif&lt;/strong&gt; qui s&amp;rsquo;adapte √† votre contexte.&lt;/p&gt;</description></item><item><title>Exemples et Impl√©mentations</title><link>http://localhost:1313/examples/</link><pubDate>Thu, 19 Dec 2024 00:00:00 +0000</pubDate><guid>http://localhost:1313/examples/</guid><description>&lt;h2 id="-exemples-concrets-pour-chaque-pattern"&gt;üéØ &lt;strong&gt;Exemples Concrets pour Chaque Pattern&lt;/strong&gt; &lt;a href="#-exemples-concrets-pour-chaque-pattern" class="anchor" aria-hidden="true"&gt;&lt;i class="material-icons align-middle"&gt;link&lt;/i&gt;&lt;/a&gt;&lt;/h2&gt;&lt;p&gt;Cette section contient des exemples de code concrets pour chaque pattern et technique abord√©e dans les chapitres. Chaque exemple est tir√© de l&amp;rsquo;exp√©rience &lt;strong&gt;Gyroscops&lt;/strong&gt; et adapt√© pour √™tre r√©utilisable dans vos projets.&lt;/p&gt;
&lt;h2 id="-organisation-des-exemples"&gt;üìÅ &lt;strong&gt;Organisation des Exemples&lt;/strong&gt; &lt;a href="#-organisation-des-exemples" class="anchor" aria-hidden="true"&gt;&lt;i class="material-icons align-middle"&gt;link&lt;/i&gt;&lt;/a&gt;&lt;/h2&gt;&lt;h3 id="patterns-de-stockage"&gt;&lt;strong&gt;Patterns de Stockage&lt;/strong&gt; &lt;a href="#patterns-de-stockage" class="anchor" aria-hidden="true"&gt;&lt;i class="material-icons align-middle"&gt;link&lt;/i&gt;&lt;/a&gt;&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;&lt;a href="http://localhost:1313/examples/stockage-sql-classique/"&gt;Stockage SQL Classique&lt;/a&gt;&lt;/strong&gt; : Impl√©mentation simple avec Doctrine&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;&lt;a href="http://localhost:1313/examples/stockage-sql-cqs/"&gt;Stockage SQL CQS&lt;/a&gt;&lt;/strong&gt; : S√©paration des commandes et requ√™tes&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;&lt;a href="http://localhost:1313/examples/stockage-sql-cqrs/"&gt;Stockage SQL CQRS&lt;/a&gt;&lt;/strong&gt; : Architecture CQRS compl√®te&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;&lt;a href="http://localhost:1313/examples/stockage-patterns/"&gt;Patterns de Stockage&lt;/a&gt;&lt;/strong&gt; : Comparaison des approches&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="techniques-avanc√©es"&gt;&lt;strong&gt;Techniques Avanc√©es&lt;/strong&gt; &lt;a href="#techniques-avanc%c3%a9es" class="anchor" aria-hidden="true"&gt;&lt;i class="material-icons align-middle"&gt;link&lt;/i&gt;&lt;/a&gt;&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;&lt;a href="http://localhost:1313/examples/techniques/gestion-donnees-validation/"&gt;Gestion des Donn√©es et Validation&lt;/a&gt;&lt;/strong&gt; : Validation robuste&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;&lt;a href="http://localhost:1313/examples/techniques/gestion-erreurs-observabilite/"&gt;Gestion des Erreurs et Observabilit√©&lt;/a&gt;&lt;/strong&gt; : Monitoring et debugging&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;&lt;a href="http://localhost:1313/examples/techniques/pagination-performance/"&gt;Pagination et Performance&lt;/a&gt;&lt;/strong&gt; : Optimisation des performances&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="architectures-avanc√©es"&gt;&lt;strong&gt;Architectures Avanc√©es&lt;/strong&gt; &lt;a href="#architectures-avanc%c3%a9es" class="anchor" aria-hidden="true"&gt;&lt;i class="material-icons align-middle"&gt;link&lt;/i&gt;&lt;/a&gt;&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;&lt;a href="http://localhost:1313/examples/avances/securite-autorisation/"&gt;S√©curit√© et Autorisation&lt;/a&gt;&lt;/strong&gt; : Patterns de s√©curit√©&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;&lt;a href="http://localhost:1313/examples/avances/frontend-integration/"&gt;Int√©gration Frontend&lt;/a&gt;&lt;/strong&gt; : Architecture frontend&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id="-comment-utiliser-ces-exemples"&gt;üöÄ &lt;strong&gt;Comment Utiliser ces Exemples&lt;/strong&gt; &lt;a href="#-comment-utiliser-ces-exemples" class="anchor" aria-hidden="true"&gt;&lt;i class="material-icons align-middle"&gt;link&lt;/i&gt;&lt;/a&gt;&lt;/h2&gt;&lt;h3 id="1-comprendre-le-pattern"&gt;&lt;strong&gt;1. Comprendre le Pattern&lt;/strong&gt; &lt;a href="#1-comprendre-le-pattern" class="anchor" aria-hidden="true"&gt;&lt;i class="material-icons align-middle"&gt;link&lt;/i&gt;&lt;/a&gt;&lt;/h3&gt;&lt;p&gt;Chaque exemple commence par une explication du pattern et de son contexte d&amp;rsquo;utilisation.&lt;/p&gt;</description></item><item><title>Le Concept du Guide Interactif</title><link>http://localhost:1313/concept/</link><pubDate>Thu, 19 Dec 2024 00:00:00 +0000</pubDate><guid>http://localhost:1313/concept/</guid><description>&lt;h2 id="lambition-du-projet"&gt;L&amp;rsquo;Ambition du Projet &lt;a href="#lambition-du-projet" class="anchor" aria-hidden="true"&gt;&lt;i class="material-icons align-middle"&gt;link&lt;/i&gt;&lt;/a&gt;&lt;/h2&gt;&lt;h3 id="transformer-lapprentissage-de-larchitecture-logicielle"&gt;Transformer l&amp;rsquo;Apprentissage de l&amp;rsquo;Architecture Logicielle &lt;a href="#transformer-lapprentissage-de-larchitecture-logicielle" class="anchor" aria-hidden="true"&gt;&lt;i class="material-icons align-middle"&gt;link&lt;/i&gt;&lt;/a&gt;&lt;/h3&gt;&lt;p&gt;Ce guide est n√© d&amp;rsquo;un constat simple : l&amp;rsquo;architecture logicielle est difficile √† appr√©hender. C&amp;rsquo;est un domaine o√π les compromis sont permanents et o√π chaque choix m√©rite d&amp;rsquo;√™tre remis en question. Plut√¥t qu&amp;rsquo;un √©ni√®me tutoriel ou des principes dogmatiques, je vous proposons une approche interactive qui s&amp;rsquo;adapte √† votre contexte et votre niveau.&lt;/p&gt;
&lt;h3 id="le-probl√®me-que-nous-r√©solvons"&gt;Le Probl√®me que Nous R√©solvons &lt;a href="#le-probl%c3%a8me-que-nous-r%c3%a9solvons" class="anchor" aria-hidden="true"&gt;&lt;i class="material-icons align-middle"&gt;link&lt;/i&gt;&lt;/a&gt;&lt;/h3&gt;&lt;p&gt;L&amp;rsquo;architecture logicielle est complexe, et les guides traditionnels aggravent cette complexit√© :&lt;/p&gt;</description></item><item><title>Repositories - Patterns de Persistance</title><link>http://localhost:1313/patterns/repositories/</link><pubDate>Thu, 19 Dec 2024 00:00:00 +0000</pubDate><guid>http://localhost:1313/patterns/repositories/</guid><description>&lt;h2 id="-quest-ce-quun-repository-un-repository-est-un-pattern-qui-encapsule-la-logique-dacc√®s-aux-donn√©es-fournissant-une-interface-orient√©e-objet-pour-acc√©der-√†-la-couche-de-persistance-le-principe-fondamental----eric-evansle-repository---abstrait-la-persistance-des-donn√©es--encapsule-la-logique-dacc√®s-aux-donn√©es--fournit-une-interface-m√©tier-claire--cache-la-complexit√©-de-la-persistance--repositories-dans-gyroscops-contexte-m√©tier--gestion-des-utilisateursdans-gyroscops-nous-g√©rons-des-utilisateurs-avec-diff√©rents-besoins-dacc√®s--interface-repositoryphpinterface-userrepository----public-function-saveuser-user-void----public-function-findbyiduserid-id-user----public-function-findbyemailemail-email-user----public-function-findbyorganizationorganizationid-organizationid-array----public-function-deleteuserid-id-void----public-function-existsuserid-id-bool-impl√©mentation-doctrinephpclass-doctrineuserrepository-implements-userrepository----public-function-__construct--------private-entitymanagerinterface-entitymanager-------------public-function-saveuser-user-void------------this-entitymanager-persistuser--------this-entitymanager-flush------------public-function-findbyiduserid-id-user------------return-this-entitymanager-------------getrepositoryuserclass-------------findid-value------------public-function-findbyemailemail-email-user------------return-this-entitymanager-------------getrepositoryuserclass-------------findonebyemail--email-value------------public-function-findbyorganizationorganizationid-organizationid-array------------return-this-entitymanager-------------getrepositoryuserclass-------------findbyorganizationid--organizationid-value------------public-function-deleteuserid-id-void------------user--this-findbyidid--------if-user-------------this-entitymanager-removeuser------------this-entitymanager-flush--------------------public-function-existsuserid-id-bool------------return-this-entitymanager-------------getrepositoryuserclass-------------countid--id-value--0------types-de-repositories-1-repository-de-commande-writephpinterface-paymentcommandrepository----public-function-savepayment-payment-void----public-function-findbyidpaymentid-id-payment----public-function-deletepaymentid-id-voidclass-doctrinepaymentcommandrepository-implements-paymentcommandrepository----public-function-savepayment-payment-void------------this-entitymanager-persistpayment--------this-entitymanager-flush------------public-function-findbyidpaymentid-id-payment------------return-this-entitymanager-------------getrepositorypaymentclass-------------findid-value-----2-repository-de-requ√™te-readphpinterface-paymentqueryrepository----public-function-findpaymentdetailspaymentid-id-paymentdetailsview----public-function-findpaymentsbycustomercustomerid-customerid-array----public-function-findpaymentsbydaterangedaterange-daterange-array----public-function-findpendingpayments-arrayclass-doctrinepaymentqueryrepository-implements-paymentqueryrepository----public-function-findpaymentdetailspaymentid-id-paymentdetailsview------------result--this-entitymanager-------------createquery----------------select-pid-pamount-pstatus-pcreatedat-----------------------cname-as-customername-sname-as-subscriptionname----------------from-payment-p----------------join-pcustomer-c----------------join-psubscription-s----------------where-pid--id-------------------------setparameterid-id-value-------------getoneornullresult--------------------return-result--paymentdetailsviewfromarrayresult--null------------public-function-findpaymentsbycustomercustomerid-customerid-array------------return-this-entitymanager-------------createquery----------------select-pid-pamount-pstatus-pcreatedat----------------from-payment-p----------------where-pcustomerid--customerid----------------order-by-pcreatedat-desc-------------------------setparametercustomerid-customerid-value-------------getresult-----3-repository-sp√©cialis√©phpinterface-paymentanalyticsrepository----public-function-getmonthlyrevenueint-year-int-month-amount----public-function-getpaymenttrendsdaterange-daterange-array----public-function-gettopcustomersint-limit-arrayclass-elasticsearchpaymentanalyticsrepository-implements-paymentanalyticsrepository----public-function-getmonthlyrevenueint-year-int-month-amount------------query--------------query------------------bool----------------------must--------------------------term--status--completed------------------------range--createdat------------------------------gte--year-month-01----------------------------lt--year---month--1---01------------------------------------------------------------------------------------aggs------------------total_revenue----------------------sum--field--amount----------------------------------------------------result--this-elasticsearch-searchquery--------return-new-amountresultaggregationstotal_revenuevalue------patterns-avanc√©s-de-repository-1-repository-avec-sp√©cificationsphpinterface-specification----public-function-issatisfiedbyentity-bool----public-function-toquerybuilderquerybuilder-qb-querybuilderclass-userbyorganizationspecification-implements-specification----public-function-__construct--------private-organizationid-organizationid-------------public-function-issatisfiedbyentity-bool------------return-entity-instanceof-user-----------------entity-organizationid-equalsthis-organizationid------------public-function-toquerybuilderquerybuilder-qb-querybuilder------------return-qb-andwhereuorganizationid--organizationid-------------------setparameterorganizationid-this-organizationid-value----interface-userrepository----public-function-findbyspecificationspecification-spec-array----public-function-countbyspecificationspecification-spec-intclass-doctrineuserrepository-implements-userrepository----public-function-findbyspecificationspecification-spec-array------------qb--this-entitymanager-createquerybuilder-------------selectu-------------fromuserclass-u--------------------return-spec-toquerybuilderqb-getquery-getresult-----2-repository-avec-cachephpclass-cacheduserrepository-implements-userrepository----public-function-__construct--------private-userrepository-decorated--------private-cacheinterface-cache-------------public-function-findbyiduserid-id-user------------cachekey--user_id-value----------------return-this-cache-getcachekey-function--use-id-------------return-this-decorated-findbyidid--------------------public-function-saveuser-user-void------------this-decorated-saveuser-----------------invalider-le-cache--------this-cache-deleteuser_user-id-value-----3-repository-avec-event-sourcingphpinterface-eventstore----public-function-appendstreamid-streamid-array-events-void----public-function-geteventsstreamid-streamid-arrayclass-eventsourceduserrepository-implements-userrepository----public-function-__construct--------private-eventstore-eventstore-------------public-function-saveuser-user-void------------events--user-getuncommittedevents--------streamid--streamidfromuseriduser-id----------------this-eventstore-appendstreamid-events--------user-markeventsascommitted------------public-function-findbyiduserid-id-user------------streamid--streamidfromuseridid--------events--this-eventstore-geteventsstreamid----------------if-emptyevents-------------return-null------------------------return-userfromeventsevents------repositories-multi-sources-repository-avec-fallbackphpclass-fallbackuserrepository-implements-userrepository----public-function-__construct--------private-userrepository-primary--------private-userrepository-fallback-------------public-function-findbyiduserid-id-user------------try-------------return-this-primary-findbyidid---------catch-exception-e-------------this-logger-warningprimary-repository-failed-using-fallback-----------------error--e-getmessage----------------userid--id-value------------------------------------return-this-fallback-findbyidid-------------repository-avec-routingphpclass-routeduserrepository-implements-userrepository----public-function-__construct--------private-userrepository-sqlrepository--------private-userrepository-mongorepository-------------public-function-findbyiduserid-id-user-------------route-bas√©e-sur-lid--------if-this-shouldusemongoid-------------return-this-mongorepository-findbyidid------------------------return-this-sqlrepository-findbyidid------------private-function-shouldusemongouserid-id-bool-------------logique-de-routing-ex-utilisateurs-r√©cents-en-mongodb--------return-id-value--1000000------performance-et-optimisation-optimisations-de-requ√™tephpclass-optimizeduserrepository-implements-userrepository----public-function-findbyorganizationorganizationid-organizationid-array-------------utiliser-des-requ√™tes-optimis√©es--------return-this-entitymanager-------------createquery----------------select-uid-uemail-ufirstname-ulastname----------------from-user-u----------------where-uorganizationid--organizationid----------------and-ustatus--status-------------------------setparameterorganizationid-organizationid-value-------------setparameterstatus-userstatusactive-------------setmaxresults100--limiter-les-r√©sultats-------------getresult-----optimisations-de-cachephpclass-smartcacheduserrepository-implements-userrepository----public-function-findbyorganizationorganizationid-organizationid-array------------cachekey--users_org_organizationid-value----------------return-this-cache-getcachekey-function--use-organizationid-------------users--this-decorated-findbyorganizationorganizationid-------------------------cache-individuel-pour-chaque-utilisateur------------foreach-users-as-user-----------------this-cache-setuser_user-id-value-user-3600------------------------------------return-users---------1800--ttl-de-30-minutes------quand-utiliser-les-repositories---cas-d--abstraction-de-persistance--changer-de-technologie-de-stockage--tests-unitaires--mocker-facilement-lacc√®s-aux-donn√©es--logique-m√©tier-complexe--encapsuler-la-logique-dacc√®s--performance--optimiser-les-requ√™tes--cas-d--applications-simples--crud-basique--over-engineering--complexit√©-inutile--performance-critique--overhead-des-abstractions--prototypage--d√©veloppement-rapide--migration-vers-les-repositories-√©tape-1--identifier-les-acc√®s-aux-donn√©es--lister-tous-les-acc√®s-aux-donn√©es--grouper-par-entit√©-m√©tier-√©tape-2--cr√©er-les-interfaces--d√©finir-les-contrats-repository--sp√©cifier-les-m√©thodes-n√©cessaires-√©tape-3--impl√©menter-les-repositories--cr√©er-les-impl√©mentations--migrer-progressivement-√©tape-4--optimiser--ajouter-le-cache-si-n√©cessaire--optimiser-les-requ√™tes--m√©triques-et-monitoring-m√©triques-repository--temps-de-r√©ponse-des-requ√™tes--taux-de-cache-hit--nombre-de-requ√™tes-par-seconde-m√©triques-de-performance--temps-de-traitement-des-requ√™tes-complexes--utilisation-m√©moire--charge-des-bases-de-donn√©es--prochaines-√©tapesmaintenant-que-vous-comprenez-les-repositories-explorez-1-cqrs--s√©parer-les-commandes-des-requ√™tes2-event-sourcing--stocker-les-√©v√©nements-comme-source-de-v√©rit√©3-impl√©mentation-repositories--guide-dimpl√©mentation-completles-repositories-sont-la-pierre-angulaire-d"&gt;üåü **Qu&amp;rsquo;est-ce qu&amp;rsquo;un Repository ?**Un &lt;strong&gt;Repository&lt;/strong&gt; est un pattern qui encapsule la logique d&amp;rsquo;acc√®s aux donn√©es, fournissant une interface orient√©e objet pour acc√©der √† la couche de persistance.### &lt;strong&gt;Le Principe Fondamental&lt;/strong&gt;&amp;gt; &lt;strong&gt;&amp;ldquo;Un Repository repr√©sente une collection d&amp;rsquo;objets en m√©moire&amp;rdquo;&lt;/strong&gt; - Eric EvansLe Repository :- &lt;strong&gt;Abstrait&lt;/strong&gt; la persistance des donn√©es- &lt;strong&gt;Encapsule&lt;/strong&gt; la logique d&amp;rsquo;acc√®s aux donn√©es- &lt;strong&gt;Fournit&lt;/strong&gt; une interface m√©tier claire- &lt;strong&gt;Cache&lt;/strong&gt; la complexit√© de la persistance## üèóÔ∏è &lt;strong&gt;Repositories dans Gyroscops&lt;/strong&gt;### &lt;strong&gt;Contexte M√©tier : Gestion des Utilisateurs&lt;/strong&gt;Dans Gyroscops, nous g√©rons des utilisateurs avec diff√©rents besoins d&amp;rsquo;acc√®s :#### &lt;strong&gt;Interface Repository&lt;/strong&gt;&lt;code&gt;phpinterface UserRepository{ public function save(User $user): void; public function findById(UserId $id): ?User; public function findByEmail(Email $email): ?User; public function findByOrganization(OrganizationId $organizationId): array; public function delete(UserId $id): void; public function exists(UserId $id): bool;}&lt;/code&gt;#### &lt;strong&gt;Impl√©mentation Doctrine&lt;/strong&gt;&lt;code&gt;phpclass DoctrineUserRepository implements UserRepository{ public function __construct( private EntityManagerInterface $entityManager ) {} public function save(User $user): void { $this-&amp;gt;entityManager-&amp;gt;persist($user); $this-&amp;gt;entityManager-&amp;gt;flush(); } public function findById(UserId $id): ?User { return $this-&amp;gt;entityManager -&amp;gt;getRepository(User::class) -&amp;gt;find($id-&amp;gt;value()); } public function findByEmail(Email $email): ?User { return $this-&amp;gt;entityManager -&amp;gt;getRepository(User::class) -&amp;gt;findOneBy(['email' =&amp;gt; $email-&amp;gt;value()]); } public function findByOrganization(OrganizationId $organizationId): array { return $this-&amp;gt;entityManager -&amp;gt;getRepository(User::class) -&amp;gt;findBy(['organizationId' =&amp;gt; $organizationId-&amp;gt;value()]); } public function delete(UserId $id): void { $user = $this-&amp;gt;findById($id); if ($user) { $this-&amp;gt;entityManager-&amp;gt;remove($user); $this-&amp;gt;entityManager-&amp;gt;flush(); } } public function exists(UserId $id): bool { return $this-&amp;gt;entityManager -&amp;gt;getRepository(User::class) -&amp;gt;count(['id' =&amp;gt; $id-&amp;gt;value()]) &amp;gt; 0; }}&lt;/code&gt;## üéØ &lt;strong&gt;Types de Repositories&lt;/strong&gt;### &lt;strong&gt;1. Repository de Commande (Write)&lt;/strong&gt;&lt;code&gt;phpinterface PaymentCommandRepository{ public function save(Payment $payment): void; public function findById(PaymentId $id): ?Payment; public function delete(PaymentId $id): void;}class DoctrinePaymentCommandRepository implements PaymentCommandRepository{ public function save(Payment $payment): void { $this-&amp;gt;entityManager-&amp;gt;persist($payment); $this-&amp;gt;entityManager-&amp;gt;flush(); } public function findById(PaymentId $id): ?Payment { return $this-&amp;gt;entityManager -&amp;gt;getRepository(Payment::class) -&amp;gt;find($id-&amp;gt;value()); }}&lt;/code&gt;### &lt;strong&gt;2. Repository de Requ√™te (Read)&lt;/strong&gt;&lt;code&gt;phpinterface PaymentQueryRepository{ public function findPaymentDetails(PaymentId $id): ?PaymentDetailsView; public function findPaymentsByCustomer(CustomerId $customerId): array; public function findPaymentsByDateRange(DateRange $dateRange): array; public function findPendingPayments(): array;}class DoctrinePaymentQueryRepository implements PaymentQueryRepository{ public function findPaymentDetails(PaymentId $id): ?PaymentDetailsView { $result = $this-&amp;gt;entityManager -&amp;gt;createQuery(' SELECT p.id, p.amount, p.status, p.createdAt, c.name as customerName, s.name as subscriptionName FROM Payment p JOIN p.customer c JOIN p.subscription s WHERE p.id = :id ') -&amp;gt;setParameter('id', $id-&amp;gt;value()) -&amp;gt;getOneOrNullResult(); return $result ? PaymentDetailsView::fromArray($result) : null; } public function findPaymentsByCustomer(CustomerId $customerId): array { return $this-&amp;gt;entityManager -&amp;gt;createQuery(' SELECT p.id, p.amount, p.status, p.createdAt FROM Payment p WHERE p.customerId = :customerId ORDER BY p.createdAt DESC ') -&amp;gt;setParameter('customerId', $customerId-&amp;gt;value()) -&amp;gt;getResult(); }}&lt;/code&gt;### &lt;strong&gt;3. Repository Sp√©cialis√©&lt;/strong&gt;&lt;code&gt;phpinterface PaymentAnalyticsRepository{ public function getMonthlyRevenue(int $year, int $month): Amount; public function getPaymentTrends(DateRange $dateRange): array; public function getTopCustomers(int $limit): array;}class ElasticsearchPaymentAnalyticsRepository implements PaymentAnalyticsRepository{ public function getMonthlyRevenue(int $year, int $month): Amount { $query = [ 'query' =&amp;gt; [ 'bool' =&amp;gt; [ 'must' =&amp;gt; [ ['term' =&amp;gt; ['status' =&amp;gt; 'completed']], ['range' =&amp;gt; ['createdAt' =&amp;gt; [ 'gte' =&amp;gt; &amp;quot;$year-$month-01&amp;quot;, 'lt' =&amp;gt; &amp;quot;$year-&amp;quot; . ($month + 1) . &amp;quot;-01&amp;quot; ]]] ] ] ], 'aggs' =&amp;gt; [ 'total_revenue' =&amp;gt; [ 'sum' =&amp;gt; ['field' =&amp;gt; 'amount'] ] ] ]; $result = $this-&amp;gt;elasticsearch-&amp;gt;search($query); return new Amount($result['aggregations']['total_revenue']['value']); }}&lt;/code&gt;## üîß &lt;strong&gt;Patterns Avanc√©s de Repository&lt;/strong&gt;### &lt;strong&gt;1. Repository avec Sp√©cifications&lt;/strong&gt;&lt;code&gt;phpinterface Specification{ public function isSatisfiedBy($entity): bool; public function toQueryBuilder(QueryBuilder $qb): QueryBuilder;}class UserByOrganizationSpecification implements Specification{ public function __construct( private OrganizationId $organizationId ) {} public function isSatisfiedBy($entity): bool { return $entity instanceof User &amp;amp;&amp;amp; $entity-&amp;gt;organizationId()-&amp;gt;equals($this-&amp;gt;organizationId); } public function toQueryBuilder(QueryBuilder $qb): QueryBuilder { return $qb-&amp;gt;andWhere('u.organizationId = :organizationId') -&amp;gt;setParameter('organizationId', $this-&amp;gt;organizationId-&amp;gt;value()); }}interface UserRepository{ public function findBySpecification(Specification $spec): array; public function countBySpecification(Specification $spec): int;}class DoctrineUserRepository implements UserRepository{ public function findBySpecification(Specification $spec): array { $qb = $this-&amp;gt;entityManager-&amp;gt;createQueryBuilder() -&amp;gt;select('u') -&amp;gt;from(User::class, 'u'); return $spec-&amp;gt;toQueryBuilder($qb)-&amp;gt;getQuery()-&amp;gt;getResult(); }}&lt;/code&gt;### &lt;strong&gt;2. Repository avec Cache&lt;/strong&gt;&lt;code&gt;phpclass CachedUserRepository implements UserRepository{ public function __construct( private UserRepository $decorated, private CacheInterface $cache ) {} public function findById(UserId $id): ?User { $cacheKey = &amp;quot;user_{$id-&amp;gt;value()}&amp;quot;; return $this-&amp;gt;cache-&amp;gt;get($cacheKey, function () use ($id) { return $this-&amp;gt;decorated-&amp;gt;findById($id); }); } public function save(User $user): void { $this-&amp;gt;decorated-&amp;gt;save($user); // Invalider le cache $this-&amp;gt;cache-&amp;gt;delete(&amp;quot;user_{$user-&amp;gt;id()-&amp;gt;value()}&amp;quot;); }}&lt;/code&gt;### &lt;strong&gt;3. Repository avec Event Sourcing&lt;/strong&gt;&lt;code&gt;phpinterface EventStore{ public function append(StreamId $streamId, array $events): void; public function getEvents(StreamId $streamId): array;}class EventSourcedUserRepository implements UserRepository{ public function __construct( private EventStore $eventStore ) {} public function save(User $user): void { $events = $user-&amp;gt;getUncommittedEvents(); $streamId = StreamId::fromUserId($user-&amp;gt;id()); $this-&amp;gt;eventStore-&amp;gt;append($streamId, $events); $user-&amp;gt;markEventsAsCommitted(); } public function findById(UserId $id): ?User { $streamId = StreamId::fromUserId($id); $events = $this-&amp;gt;eventStore-&amp;gt;getEvents($streamId); if (empty($events)) { return null; } return User::fromEvents($events); }}&lt;/code&gt;## üöÄ &lt;strong&gt;Repositories Multi-Sources&lt;/strong&gt;### &lt;strong&gt;Repository avec Fallback&lt;/strong&gt;&lt;code&gt;phpclass FallbackUserRepository implements UserRepository{ public function __construct( private UserRepository $primary, private UserRepository $fallback ) {} public function findById(UserId $id): ?User { try { return $this-&amp;gt;primary-&amp;gt;findById($id); } catch (Exception $e) { $this-&amp;gt;logger-&amp;gt;warning('Primary repository failed, using fallback', [ 'error' =&amp;gt; $e-&amp;gt;getMessage(), 'userId' =&amp;gt; $id-&amp;gt;value() ]); return $this-&amp;gt;fallback-&amp;gt;findById($id); } }}&lt;/code&gt;### &lt;strong&gt;Repository avec Routing&lt;/strong&gt;&lt;code&gt;phpclass RoutedUserRepository implements UserRepository{ public function __construct( private UserRepository $sqlRepository, private UserRepository $mongoRepository ) {} public function findById(UserId $id): ?User { // Route bas√©e sur l'ID if ($this-&amp;gt;shouldUseMongo($id)) { return $this-&amp;gt;mongoRepository-&amp;gt;findById($id); } return $this-&amp;gt;sqlRepository-&amp;gt;findById($id); } private function shouldUseMongo(UserId $id): bool { // Logique de routing (ex: utilisateurs r√©cents en MongoDB) return $id-&amp;gt;value() &amp;gt; 1000000; }}&lt;/code&gt;## ‚ö° &lt;strong&gt;Performance et Optimisation&lt;/strong&gt;### &lt;strong&gt;Optimisations de Requ√™te&lt;/strong&gt;&lt;code&gt;phpclass OptimizedUserRepository implements UserRepository{ public function findByOrganization(OrganizationId $organizationId): array { // Utiliser des requ√™tes optimis√©es return $this-&amp;gt;entityManager -&amp;gt;createQuery(' SELECT u.id, u.email, u.firstName, u.lastName FROM User u WHERE u.organizationId = :organizationId AND u.status = :status ') -&amp;gt;setParameter('organizationId', $organizationId-&amp;gt;value()) -&amp;gt;setParameter('status', UserStatus::ACTIVE) -&amp;gt;setMaxResults(100) // Limiter les r√©sultats -&amp;gt;getResult(); }}&lt;/code&gt;### &lt;strong&gt;Optimisations de Cache&lt;/strong&gt;&lt;code&gt;phpclass SmartCachedUserRepository implements UserRepository{ public function findByOrganization(OrganizationId $organizationId): array { $cacheKey = &amp;quot;users_org_{$organizationId-&amp;gt;value()}&amp;quot;; return $this-&amp;gt;cache-&amp;gt;get($cacheKey, function () use ($organizationId) { $users = $this-&amp;gt;decorated-&amp;gt;findByOrganization($organizationId); // Cache individuel pour chaque utilisateur foreach ($users as $user) { $this-&amp;gt;cache-&amp;gt;set(&amp;quot;user_{$user-&amp;gt;id()-&amp;gt;value()}&amp;quot;, $user, 3600); } return $users; }, 1800); // TTL de 30 minutes }}&lt;/code&gt;## üéØ &lt;strong&gt;Quand Utiliser les Repositories ?&lt;/strong&gt;### &lt;strong&gt;‚úÖ Cas d&amp;rsquo;Usage Appropri√©s&lt;/strong&gt;- &lt;strong&gt;Abstraction de persistance&lt;/strong&gt; : Changer de technologie de stockage- &lt;strong&gt;Tests unitaires&lt;/strong&gt; : Mocker facilement l&amp;rsquo;acc√®s aux donn√©es- &lt;strong&gt;Logique m√©tier complexe&lt;/strong&gt; : Encapsuler la logique d&amp;rsquo;acc√®s- &lt;strong&gt;Performance&lt;/strong&gt; : Optimiser les requ√™tes### &lt;strong&gt;‚ùå Cas d&amp;rsquo;Usage Inappropri√©s&lt;/strong&gt;- &lt;strong&gt;Applications simples&lt;/strong&gt; : CRUD basique- &lt;strong&gt;Over-engineering&lt;/strong&gt; : Complexit√© inutile- &lt;strong&gt;Performance critique&lt;/strong&gt; : Overhead des abstractions- &lt;strong&gt;Prototypage&lt;/strong&gt; : D√©veloppement rapide## üîÑ &lt;strong&gt;Migration vers les Repositories&lt;/strong&gt;### &lt;strong&gt;√âtape 1 : Identifier les Acc√®s aux Donn√©es&lt;/strong&gt;- Lister tous les acc√®s aux donn√©es- Grouper par entit√© m√©tier### &lt;strong&gt;√âtape 2 : Cr√©er les Interfaces&lt;/strong&gt;- D√©finir les contrats Repository- Sp√©cifier les m√©thodes n√©cessaires### &lt;strong&gt;√âtape 3 : Impl√©menter les Repositories&lt;/strong&gt;- Cr√©er les impl√©mentations- Migrer progressivement### &lt;strong&gt;√âtape 4 : Optimiser&lt;/strong&gt;- Ajouter le cache si n√©cessaire- Optimiser les requ√™tes## üìä &lt;strong&gt;M√©triques et Monitoring&lt;/strong&gt;### &lt;strong&gt;M√©triques Repository&lt;/strong&gt;- Temps de r√©ponse des requ√™tes- Taux de cache hit- Nombre de requ√™tes par seconde### &lt;strong&gt;M√©triques de Performance&lt;/strong&gt;- Temps de traitement des requ√™tes complexes- Utilisation m√©moire- Charge des bases de donn√©es## üéØ &lt;strong&gt;Prochaines √âtapes&lt;/strong&gt;Maintenant que vous comprenez les Repositories, explorez :1. &lt;strong&gt;&lt;a href="http://localhost:1313/concept/cqrs/"&gt;CQRS&lt;/a&gt;&lt;/strong&gt; : S√©parer les commandes des requ√™tes2. &lt;strong&gt;&lt;a href="http://localhost:1313/concept/event-sourcing/"&gt;Event Sourcing&lt;/a&gt;&lt;/strong&gt; : Stocker les √©v√©nements comme source de v√©rit√©3. &lt;strong&gt;&lt;a href="http://localhost:1313/chapitres/fondamentaux/chapitre-09-repositories-persistance/"&gt;Impl√©mentation Repositories&lt;/a&gt;&lt;/strong&gt; : Guide d&amp;rsquo;impl√©mentation complet&amp;mdash;&lt;em&gt;Les Repositories sont la pierre angulaire d&amp;rsquo;une architecture propre. Dans Gyroscops, ils nous ont permis de s√©parer clairement la logique m√©tier de la persistance, rendant le code plus testable et √©volutif.&lt;/em&gt; &lt;a href="#-quest-ce-quun-repository-un-repository-est-un-pattern-qui-encapsule-la-logique-dacc%c3%a8s-aux-donn%c3%a9es-fournissant-une-interface-orient%c3%a9e-objet-pour-acc%c3%a9der-%c3%a0-la-couche-de-persistance-le-principe-fondamental----eric-evansle-repository---abstrait-la-persistance-des-donn%c3%a9es--encapsule-la-logique-dacc%c3%a8s-aux-donn%c3%a9es--fournit-une-interface-m%c3%a9tier-claire--cache-la-complexit%c3%a9-de-la-persistance--repositories-dans-gyroscops-contexte-m%c3%a9tier--gestion-des-utilisateursdans-gyroscops-nous-g%c3%a9rons-des-utilisateurs-avec-diff%c3%a9rents-besoins-dacc%c3%a8s--interface-repositoryphpinterface-userrepository----public-function-saveuser-user-void----public-function-findbyiduserid-id-user----public-function-findbyemailemail-email-user----public-function-findbyorganizationorganizationid-organizationid-array----public-function-deleteuserid-id-void----public-function-existsuserid-id-bool-impl%c3%a9mentation-doctrinephpclass-doctrineuserrepository-implements-userrepository----public-function-__construct--------private-entitymanagerinterface-entitymanager-------------public-function-saveuser-user-void------------this-entitymanager-persistuser--------this-entitymanager-flush------------public-function-findbyiduserid-id-user------------return-this-entitymanager-------------getrepositoryuserclass-------------findid-value------------public-function-findbyemailemail-email-user------------return-this-entitymanager-------------getrepositoryuserclass-------------findonebyemail--email-value------------public-function-findbyorganizationorganizationid-organizationid-array------------return-this-entitymanager-------------getrepositoryuserclass-------------findbyorganizationid--organizationid-value------------public-function-deleteuserid-id-void------------user--this-findbyidid--------if-user-------------this-entitymanager-removeuser------------this-entitymanager-flush--------------------public-function-existsuserid-id-bool------------return-this-entitymanager-------------getrepositoryuserclass-------------countid--id-value--0------types-de-repositories-1-repository-de-commande-writephpinterface-paymentcommandrepository----public-function-savepayment-payment-void----public-function-findbyidpaymentid-id-payment----public-function-deletepaymentid-id-voidclass-doctrinepaymentcommandrepository-implements-paymentcommandrepository----public-function-savepayment-payment-void------------this-entitymanager-persistpayment--------this-entitymanager-flush------------public-function-findbyidpaymentid-id-payment------------return-this-entitymanager-------------getrepositorypaymentclass-------------findid-value-----2-repository-de-requ%c3%aate-readphpinterface-paymentqueryrepository----public-function-findpaymentdetailspaymentid-id-paymentdetailsview----public-function-findpaymentsbycustomercustomerid-customerid-array----public-function-findpaymentsbydaterangedaterange-daterange-array----public-function-findpendingpayments-arrayclass-doctrinepaymentqueryrepository-implements-paymentqueryrepository----public-function-findpaymentdetailspaymentid-id-paymentdetailsview------------result--this-entitymanager-------------createquery----------------select-pid-pamount-pstatus-pcreatedat-----------------------cname-as-customername-sname-as-subscriptionname----------------from-payment-p----------------join-pcustomer-c----------------join-psubscription-s----------------where-pid--id-------------------------setparameterid-id-value-------------getoneornullresult--------------------return-result--paymentdetailsviewfromarrayresult--null------------public-function-findpaymentsbycustomercustomerid-customerid-array------------return-this-entitymanager-------------createquery----------------select-pid-pamount-pstatus-pcreatedat----------------from-payment-p----------------where-pcustomerid--customerid----------------order-by-pcreatedat-desc-------------------------setparametercustomerid-customerid-value-------------getresult-----3-repository-sp%c3%a9cialis%c3%a9phpinterface-paymentanalyticsrepository----public-function-getmonthlyrevenueint-year-int-month-amount----public-function-getpaymenttrendsdaterange-daterange-array----public-function-gettopcustomersint-limit-arrayclass-elasticsearchpaymentanalyticsrepository-implements-paymentanalyticsrepository----public-function-getmonthlyrevenueint-year-int-month-amount------------query--------------query------------------bool----------------------must--------------------------term--status--completed------------------------range--createdat------------------------------gte--year-month-01----------------------------lt--year---month--1---01------------------------------------------------------------------------------------aggs------------------total_revenue----------------------sum--field--amount----------------------------------------------------result--this-elasticsearch-searchquery--------return-new-amountresultaggregationstotal_revenuevalue------patterns-avanc%c3%a9s-de-repository-1-repository-avec-sp%c3%a9cificationsphpinterface-specification----public-function-issatisfiedbyentity-bool----public-function-toquerybuilderquerybuilder-qb-querybuilderclass-userbyorganizationspecification-implements-specification----public-function-__construct--------private-organizationid-organizationid-------------public-function-issatisfiedbyentity-bool------------return-entity-instanceof-user-----------------entity-organizationid-equalsthis-organizationid------------public-function-toquerybuilderquerybuilder-qb-querybuilder------------return-qb-andwhereuorganizationid--organizationid-------------------setparameterorganizationid-this-organizationid-value----interface-userrepository----public-function-findbyspecificationspecification-spec-array----public-function-countbyspecificationspecification-spec-intclass-doctrineuserrepository-implements-userrepository----public-function-findbyspecificationspecification-spec-array------------qb--this-entitymanager-createquerybuilder-------------selectu-------------fromuserclass-u--------------------return-spec-toquerybuilderqb-getquery-getresult-----2-repository-avec-cachephpclass-cacheduserrepository-implements-userrepository----public-function-__construct--------private-userrepository-decorated--------private-cacheinterface-cache-------------public-function-findbyiduserid-id-user------------cachekey--user_id-value----------------return-this-cache-getcachekey-function--use-id-------------return-this-decorated-findbyidid--------------------public-function-saveuser-user-void------------this-decorated-saveuser-----------------invalider-le-cache--------this-cache-deleteuser_user-id-value-----3-repository-avec-event-sourcingphpinterface-eventstore----public-function-appendstreamid-streamid-array-events-void----public-function-geteventsstreamid-streamid-arrayclass-eventsourceduserrepository-implements-userrepository----public-function-__construct--------private-eventstore-eventstore-------------public-function-saveuser-user-void------------events--user-getuncommittedevents--------streamid--streamidfromuseriduser-id----------------this-eventstore-appendstreamid-events--------user-markeventsascommitted------------public-function-findbyiduserid-id-user------------streamid--streamidfromuseridid--------events--this-eventstore-geteventsstreamid----------------if-emptyevents-------------return-null------------------------return-userfromeventsevents------repositories-multi-sources-repository-avec-fallbackphpclass-fallbackuserrepository-implements-userrepository----public-function-__construct--------private-userrepository-primary--------private-userrepository-fallback-------------public-function-findbyiduserid-id-user------------try-------------return-this-primary-findbyidid---------catch-exception-e-------------this-logger-warningprimary-repository-failed-using-fallback-----------------error--e-getmessage----------------userid--id-value------------------------------------return-this-fallback-findbyidid-------------repository-avec-routingphpclass-routeduserrepository-implements-userrepository----public-function-__construct--------private-userrepository-sqlrepository--------private-userrepository-mongorepository-------------public-function-findbyiduserid-id-user-------------route-bas%c3%a9e-sur-lid--------if-this-shouldusemongoid-------------return-this-mongorepository-findbyidid------------------------return-this-sqlrepository-findbyidid------------private-function-shouldusemongouserid-id-bool-------------logique-de-routing-ex-utilisateurs-r%c3%a9cents-en-mongodb--------return-id-value--1000000------performance-et-optimisation-optimisations-de-requ%c3%aatephpclass-optimizeduserrepository-implements-userrepository----public-function-findbyorganizationorganizationid-organizationid-array-------------utiliser-des-requ%c3%aates-optimis%c3%a9es--------return-this-entitymanager-------------createquery----------------select-uid-uemail-ufirstname-ulastname----------------from-user-u----------------where-uorganizationid--organizationid----------------and-ustatus--status-------------------------setparameterorganizationid-organizationid-value-------------setparameterstatus-userstatusactive-------------setmaxresults100--limiter-les-r%c3%a9sultats-------------getresult-----optimisations-de-cachephpclass-smartcacheduserrepository-implements-userrepository----public-function-findbyorganizationorganizationid-organizationid-array------------cachekey--users_org_organizationid-value----------------return-this-cache-getcachekey-function--use-organizationid-------------users--this-decorated-findbyorganizationorganizationid-------------------------cache-individuel-pour-chaque-utilisateur------------foreach-users-as-user-----------------this-cache-setuser_user-id-value-user-3600------------------------------------return-users---------1800--ttl-de-30-minutes------quand-utiliser-les-repositories---cas-d--abstraction-de-persistance--changer-de-technologie-de-stockage--tests-unitaires--mocker-facilement-lacc%c3%a8s-aux-donn%c3%a9es--logique-m%c3%a9tier-complexe--encapsuler-la-logique-dacc%c3%a8s--performance--optimiser-les-requ%c3%aates--cas-d--applications-simples--crud-basique--over-engineering--complexit%c3%a9-inutile--performance-critique--overhead-des-abstractions--prototypage--d%c3%a9veloppement-rapide--migration-vers-les-repositories-%c3%a9tape-1--identifier-les-acc%c3%a8s-aux-donn%c3%a9es--lister-tous-les-acc%c3%a8s-aux-donn%c3%a9es--grouper-par-entit%c3%a9-m%c3%a9tier-%c3%a9tape-2--cr%c3%a9er-les-interfaces--d%c3%a9finir-les-contrats-repository--sp%c3%a9cifier-les-m%c3%a9thodes-n%c3%a9cessaires-%c3%a9tape-3--impl%c3%a9menter-les-repositories--cr%c3%a9er-les-impl%c3%a9mentations--migrer-progressivement-%c3%a9tape-4--optimiser--ajouter-le-cache-si-n%c3%a9cessaire--optimiser-les-requ%c3%aates--m%c3%a9triques-et-monitoring-m%c3%a9triques-repository--temps-de-r%c3%a9ponse-des-requ%c3%aates--taux-de-cache-hit--nombre-de-requ%c3%aates-par-seconde-m%c3%a9triques-de-performance--temps-de-traitement-des-requ%c3%aates-complexes--utilisation-m%c3%a9moire--charge-des-bases-de-donn%c3%a9es--prochaines-%c3%a9tapesmaintenant-que-vous-comprenez-les-repositories-explorez-1-cqrs--s%c3%a9parer-les-commandes-des-requ%c3%aates2-event-sourcing--stocker-les-%c3%a9v%c3%a9nements-comme-source-de-v%c3%a9rit%c3%a93-impl%c3%a9mentation-repositories--guide-dimpl%c3%a9mentation-completles-repositories-sont-la-pierre-angulaire-d" class="anchor" aria-hidden="true"&gt;&lt;i class="material-icons align-middle"&gt;link&lt;/i&gt;&lt;/a&gt;&lt;/h2&gt;</description></item><item><title/><link>http://localhost:1313/avantages-inconvenients-patterns/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>http://localhost:1313/avantages-inconvenients-patterns/</guid><description>&lt;h1 id="-avantages-et-inconv√©nients-d√©taill√©s-de-chaque-pattern"&gt;‚öñÔ∏è Avantages et Inconv√©nients D√©taill√©s de Chaque Pattern&lt;/h1&gt;
&lt;h2 id="-vue-densemble"&gt;üìã Vue d&amp;rsquo;Ensemble&lt;/h2&gt;
&lt;p&gt;Ce document d√©taille les avantages et inconv√©nients de chaque pattern architectural pr√©sent√© dans la documentation. Chaque pattern est analys√© selon des crit√®res techniques, organisationnels et m√©tier.&lt;/p&gt;
&lt;h2 id="-patterns-architecturaux"&gt;üèóÔ∏è Patterns Architecturaux&lt;/h2&gt;
&lt;h3 id="1-architecture-classique"&gt;1. Architecture Classique&lt;/h3&gt;
&lt;h4 id="-avantages"&gt;‚úÖ Avantages&lt;/h4&gt;
&lt;p&gt;&lt;strong&gt;Techniques :&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;Simplicit√©&lt;/strong&gt; : Facile √† comprendre et impl√©menter&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Rapidit√© de D√©veloppement&lt;/strong&gt; : Mise en place rapide&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Maintenance Simple&lt;/strong&gt; : Code facile √† maintenir&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;D√©bogage Facile&lt;/strong&gt; : Probl√®mes faciles √† identifier&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Tests Simples&lt;/strong&gt; : Tests unitaires et d&amp;rsquo;int√©gration simples&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Performance Pr√©visible&lt;/strong&gt; : Comportement pr√©visible&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Coh√©rence Imm√©diate&lt;/strong&gt; : Donn√©es toujours coh√©rentes&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;strong&gt;Organisationnels :&lt;/strong&gt;&lt;/p&gt;</description></item><item><title/><link>http://localhost:1313/criteres-adoption-patterns/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>http://localhost:1313/criteres-adoption-patterns/</guid><description>&lt;h1 id="-crit√®res-dadoption-d√©taill√©s-pour-chaque-pattern"&gt;üéØ Crit√®res d&amp;rsquo;Adoption D√©taill√©s pour Chaque Pattern&lt;/h1&gt;
&lt;h2 id="-vue-densemble"&gt;üìã Vue d&amp;rsquo;Ensemble&lt;/h2&gt;
&lt;p&gt;Ce document d√©taille les crit√®res d&amp;rsquo;adoption sp√©cifiques pour chaque pattern architectural pr√©sent√© dans la documentation. Chaque pattern est √©valu√© selon des crit√®res techniques, organisationnels et m√©tier.&lt;/p&gt;
&lt;h2 id="-patterns-architecturaux"&gt;üèóÔ∏è Patterns Architecturaux&lt;/h2&gt;
&lt;h3 id="1-architecture-classique"&gt;1. Architecture Classique&lt;/h3&gt;
&lt;h4 id="-adoptez-larchitecture-classique-si-"&gt;‚úÖ Adoptez l&amp;rsquo;Architecture Classique si :&lt;/h4&gt;
&lt;p&gt;&lt;strong&gt;Crit√®res Techniques :&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Application monolithique simple&lt;/li&gt;
&lt;li&gt;Logique m√©tier basique et stable&lt;/li&gt;
&lt;li&gt;Pas de besoins complexes de performance&lt;/li&gt;
&lt;li&gt;Donn√©es relationnelles standard&lt;/li&gt;
&lt;li&gt;Pas d&amp;rsquo;int√©grations multiples&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;strong&gt;Crit√®res Organisationnels :&lt;/strong&gt;&lt;/p&gt;</description></item><item><title/><link>http://localhost:1313/diagrams/architecture-generale/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>http://localhost:1313/diagrams/architecture-generale/</guid><description>&lt;h1 id="architecture-g√©n√©rale-du-projet-gyroscops-cloud"&gt;Architecture G√©n√©rale du Projet Gyroscops Cloud&lt;/h1&gt;
&lt;h2 id="vue-densemble-de-larchitecture"&gt;Vue d&amp;rsquo;ensemble de l&amp;rsquo;Architecture&lt;/h2&gt;
&lt;pre tabindex="0"&gt;&lt;code class="language-mermaid" data-lang="mermaid"&gt;graph TB
 subgraph &amp;#34;Frontend Layer&amp;#34;
 PWA[PWA React Admin]
 API_CLIENT[API Client]
 end
 
 subgraph &amp;#34;API Platform Layer&amp;#34;
 API_GATEWAY[API Gateway]
 AUTH[Authentication]
 AUTHZ[Authorization]
 end
 
 subgraph &amp;#34;Domain Layer&amp;#34;
 subgraph &amp;#34;Authentication Domain&amp;#34;
 USER[User]
 ORG[Organization]
 ROLE[Role]
 end
 
 subgraph &amp;#34;Payment Domain&amp;#34;
 PAYMENT[Payment]
 SUBSCRIPTION[Subscription]
 BILLING[Billing]
 end
 
 subgraph &amp;#34;Integration Domain&amp;#34;
 INTEGRATION[Integration]
 WORKFLOW[Workflow]
 CONNECTOR[Connector]
 end
 
 subgraph &amp;#34;Monitoring Domain&amp;#34;
 METRICS[Metrics]
 ALERT[Alert]
 HEALTH[Health Check]
 end
 end
 
 subgraph &amp;#34;Infrastructure Layer&amp;#34;
 subgraph &amp;#34;Repositories&amp;#34;
 SQL_REPO[SQL Repository]
 API_REPO[API Repository]
 ES_REPO[ElasticSearch Repository]
 MONGO_REPO[MongoDB Repository]
 MEMORY_REPO[In-Memory Repository]
 end
 
 subgraph &amp;#34;External Services&amp;#34;
 KEYCLOAK[Keycloak]
 EXTERNAL_API[External APIs]
 DATABASE[(Database)]
 ELASTICSEARCH[(ElasticSearch)]
 MONGODB[(MongoDB)]
 end
 end
 
 subgraph &amp;#34;Cross-Cutting Concerns&amp;#34;
 EVENT_BUS[Event Bus]
 LOGGING[Logging]
 METRICS_COLLECTOR[Metrics Collector]
 AUDIT[Audit]
 end
 
 PWA --&amp;gt; API_CLIENT
 API_CLIENT --&amp;gt; API_GATEWAY
 API_GATEWAY --&amp;gt; AUTH
 API_GATEWAY --&amp;gt; AUTHZ
 
 AUTH --&amp;gt; USER
 AUTHZ --&amp;gt; ROLE
 
 API_GATEWAY --&amp;gt; PAYMENT
 API_GATEWAY --&amp;gt; INTEGRATION
 API_GATEWAY --&amp;gt; METRICS
 
 PAYMENT --&amp;gt; SQL_REPO
 INTEGRATION --&amp;gt; API_REPO
 METRICS --&amp;gt; ES_REPO
 
 SQL_REPO --&amp;gt; DATABASE
 API_REPO --&amp;gt; EXTERNAL_API
 ES_REPO --&amp;gt; ELASTICSEARCH
 MONGO_REPO --&amp;gt; MONGODB
 
 EVENT_BUS --&amp;gt; LOGGING
 EVENT_BUS --&amp;gt; METRICS_COLLECTOR
 EVENT_BUS --&amp;gt; AUDIT
 
 style PWA fill:#e1f5fe
 style API_GATEWAY fill:#fff3e0
 style PAYMENT fill:#e8f5e8
 style INTEGRATION fill:#fff8e1
 style METRICS fill:#f3e5f5
&lt;/code&gt;&lt;/pre&gt;&lt;h2 id="architecture-cqrs-avec-event-sourcing"&gt;Architecture CQRS avec Event Sourcing&lt;/h2&gt;
&lt;pre tabindex="0"&gt;&lt;code class="language-mermaid" data-lang="mermaid"&gt;graph TB
 subgraph &amp;#34;Command Side&amp;#34;
 COMMAND[Command]
 COMMAND_HANDLER[Command Handler]
 AGGREGATE[Aggregate]
 EVENT_STORE[Event Store]
 end
 
 subgraph &amp;#34;Query Side&amp;#34;
 QUERY[Query]
 QUERY_HANDLER[Query Handler]
 READ_MODEL[Read Model]
 PROJECTION[Projection]
 end
 
 subgraph &amp;#34;Event Bus&amp;#34;
 EVENT_BUS[Event Bus]
 EVENT_HANDLER[Event Handler]
 end
 
 COMMAND --&amp;gt; COMMAND_HANDLER
 COMMAND_HANDLER --&amp;gt; AGGREGATE
 AGGREGATE --&amp;gt; EVENT_STORE
 AGGREGATE --&amp;gt; EVENT_BUS
 
 EVENT_BUS --&amp;gt; EVENT_HANDLER
 EVENT_HANDLER --&amp;gt; PROJECTION
 PROJECTION --&amp;gt; READ_MODEL
 
 QUERY --&amp;gt; QUERY_HANDLER
 QUERY_HANDLER --&amp;gt; READ_MODEL
 
 style COMMAND fill:#ffeb3b
 style QUERY fill:#4caf50
 style EVENT_BUS fill:#ff9800
 style AGGREGATE fill:#e91e63
&lt;/code&gt;&lt;/pre&gt;&lt;h2 id="architecture-des-repositories"&gt;Architecture des Repositories&lt;/h2&gt;
&lt;pre tabindex="0"&gt;&lt;code class="language-mermaid" data-lang="mermaid"&gt;graph TB
 subgraph &amp;#34;Repository Interfaces&amp;#34;
 CMD_REPO[Command Repository]
 QUERY_REPO[Query Repository]
 end
 
 subgraph &amp;#34;Repository Implementations&amp;#34;
 SQL_CMD[SQL Command Repository]
 SQL_QUERY[SQL Query Repository]
 API_CMD[API Command Repository]
 API_QUERY[API Query Repository]
 ES_CMD[ElasticSearch Command Repository]
 ES_QUERY[ElasticSearch Query Repository]
 MONGO_CMD[MongoDB Command Repository]
 MONGO_QUERY[MongoDB Query Repository]
 MEMORY_CMD[In-Memory Command Repository]
 MEMORY_QUERY[In-Memory Query Repository]
 end
 
 subgraph &amp;#34;Data Sources&amp;#34;
 DATABASE[(SQL Database)]
 EXTERNAL_API[External APIs]
 ELASTICSEARCH[(ElasticSearch)]
 MONGODB[(MongoDB)]
 MEMORY[(In-Memory)]
 end
 
 CMD_REPO --&amp;gt; SQL_CMD
 CMD_REPO --&amp;gt; API_CMD
 CMD_REPO --&amp;gt; ES_CMD
 CMD_REPO --&amp;gt; MONGO_CMD
 CMD_REPO --&amp;gt; MEMORY_CMD
 
 QUERY_REPO --&amp;gt; SQL_QUERY
 QUERY_REPO --&amp;gt; API_QUERY
 QUERY_REPO --&amp;gt; ES_QUERY
 QUERY_REPO --&amp;gt; MONGO_QUERY
 QUERY_REPO --&amp;gt; MEMORY_QUERY
 
 SQL_CMD --&amp;gt; DATABASE
 SQL_QUERY --&amp;gt; DATABASE
 API_CMD --&amp;gt; EXTERNAL_API
 API_QUERY --&amp;gt; EXTERNAL_API
 ES_CMD --&amp;gt; ELASTICSEARCH
 ES_QUERY --&amp;gt; ELASTICSEARCH
 MONGO_CMD --&amp;gt; MONGODB
 MONGO_QUERY --&amp;gt; MONGODB
 MEMORY_CMD --&amp;gt; MEMORY
 MEMORY_QUERY --&amp;gt; MEMORY
 
 style CMD_REPO fill:#ff5722
 style QUERY_REPO fill:#4caf50
 style DATABASE fill:#2196f3
 style EXTERNAL_API fill:#ff9800
 style ELASTICSEARCH fill:#9c27b0
 style MONGODB fill:#4caf50
 style MEMORY fill:#607d8b
&lt;/code&gt;&lt;/pre&gt;&lt;h2 id="flux-de-donn√©es-avec-event-sourcing"&gt;Flux de Donn√©es avec Event Sourcing&lt;/h2&gt;
&lt;pre tabindex="0"&gt;&lt;code class="language-mermaid" data-lang="mermaid"&gt;sequenceDiagram
 participant Client
 participant API
 participant CommandHandler
 participant Aggregate
 participant EventStore
 participant EventBus
 participant Projection
 participant ReadModel
 participant QueryHandler
 
 Client-&amp;gt;&amp;gt;API: POST /api/payments
 API-&amp;gt;&amp;gt;CommandHandler: CreatePaymentCommand
 CommandHandler-&amp;gt;&amp;gt;Aggregate: createPayment()
 Aggregate-&amp;gt;&amp;gt;EventStore: save(PaymentCreated)
 Aggregate-&amp;gt;&amp;gt;EventBus: publish(PaymentCreated)
 EventBus-&amp;gt;&amp;gt;Projection: handle(PaymentCreated)
 Projection-&amp;gt;&amp;gt;ReadModel: update()
 CommandHandler-&amp;gt;&amp;gt;API: PaymentCreated
 API-&amp;gt;&amp;gt;Client: 201 Created
 
 Client-&amp;gt;&amp;gt;API: GET /api/payments
 API-&amp;gt;&amp;gt;QueryHandler: GetPaymentsQuery
 QueryHandler-&amp;gt;&amp;gt;ReadModel: findPayments()
 ReadModel-&amp;gt;&amp;gt;QueryHandler: Payment[]
 QueryHandler-&amp;gt;&amp;gt;API: Payment[]
 API-&amp;gt;&amp;gt;Client: 200 OK
&lt;/code&gt;&lt;/pre&gt;&lt;h2 id="architecture-de-s√©curit√©"&gt;Architecture de S√©curit√©&lt;/h2&gt;
&lt;pre tabindex="0"&gt;&lt;code class="language-mermaid" data-lang="mermaid"&gt;graph TB
 subgraph &amp;#34;Frontend Security&amp;#34;
 TOKEN[JWT Token]
 REFRESH[Refresh Token]
 STORAGE[Local Storage]
 end
 
 subgraph &amp;#34;API Security&amp;#34;
 MIDDLEWARE[Security Middleware]
 AUTH_SERVICE[Authentication Service]
 AUTHZ_SERVICE[Authorization Service]
 VOTER[Voter]
 end
 
 subgraph &amp;#34;External Security&amp;#34;
 KEYCLOAK[Keycloak]
 RBAC[RBAC]
 ABAC[ABAC]
 end
 
 subgraph &amp;#34;Audit &amp;amp; Monitoring&amp;#34;
 AUDIT_LOG[Audit Log]
 SECURITY_METRICS[Security Metrics]
 ALERT[Security Alert]
 end
 
 TOKEN --&amp;gt; MIDDLEWARE
 REFRESH --&amp;gt; AUTH_SERVICE
 STORAGE --&amp;gt; TOKEN
 
 MIDDLEWARE --&amp;gt; AUTH_SERVICE
 MIDDLEWARE --&amp;gt; AUTHZ_SERVICE
 AUTHZ_SERVICE --&amp;gt; VOTER
 
 AUTH_SERVICE --&amp;gt; KEYCLOAK
 AUTHZ_SERVICE --&amp;gt; RBAC
 AUTHZ_SERVICE --&amp;gt; ABAC
 
 MIDDLEWARE --&amp;gt; AUDIT_LOG
 AUTH_SERVICE --&amp;gt; SECURITY_METRICS
 AUTHZ_SERVICE --&amp;gt; ALERT
 
 style TOKEN fill:#ffeb3b
 style MIDDLEWARE fill:#ff5722
 style KEYCLOAK fill:#2196f3
 style AUDIT_LOG fill:#9c27b0
&lt;/code&gt;&lt;/pre&gt;&lt;h2 id="architecture-frontend"&gt;Architecture Frontend&lt;/h2&gt;
&lt;pre tabindex="0"&gt;&lt;code class="language-mermaid" data-lang="mermaid"&gt;graph TB
 subgraph &amp;#34;UI Components&amp;#34;
 PAGES[Pages]
 COMPONENTS[Components]
 FORMS[Forms]
 LISTS[Lists]
 end
 
 subgraph &amp;#34;State Management&amp;#34;
 REDUX[Redux Store]
 SLICES[Slices]
 ACTIONS[Actions]
 SELECTORS[Selectors]
 end
 
 subgraph &amp;#34;API Layer&amp;#34;
 API_CLIENT[API Client]
 SERVICES[Services]
 HOOKS[Custom Hooks]
 end
 
 subgraph &amp;#34;Routing &amp;amp; Navigation&amp;#34;
 ROUTER[React Router]
 GUARDS[Route Guards]
 NAVIGATION[Navigation]
 end
 
 subgraph &amp;#34;External Dependencies&amp;#34;
 BACKEND[Backend API]
 KEYCLOAK[Keycloak]
 EXTERNAL[External APIs]
 end
 
 PAGES --&amp;gt; COMPONENTS
 COMPONENTS --&amp;gt; FORMS
 COMPONENTS --&amp;gt; LISTS
 
 PAGES --&amp;gt; REDUX
 COMPONENTS --&amp;gt; SELECTORS
 FORMS --&amp;gt; ACTIONS
 LISTS --&amp;gt; ACTIONS
 
 REDUX --&amp;gt; SLICES
 SLICES --&amp;gt; ACTIONS
 SLICES --&amp;gt; SELECTORS
 
 ACTIONS --&amp;gt; API_CLIENT
 SELECTORS --&amp;gt; SERVICES
 HOOKS --&amp;gt; API_CLIENT
 
 API_CLIENT --&amp;gt; SERVICES
 SERVICES --&amp;gt; HOOKS
 
 ROUTER --&amp;gt; GUARDS
 GUARDS --&amp;gt; NAVIGATION
 NAVIGATION --&amp;gt; PAGES
 
 API_CLIENT --&amp;gt; BACKEND
 API_CLIENT --&amp;gt; KEYCLOAK
 SERVICES --&amp;gt; EXTERNAL
 
 style PAGES fill:#e1f5fe
 style REDUX fill:#fff3e0
 style API_CLIENT fill:#e8f5e8
 style ROUTER fill:#fff8e1
&lt;/code&gt;&lt;/pre&gt;</description></item><item><title/><link>http://localhost:1313/diagrams/event-storming-process/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>http://localhost:1313/diagrams/event-storming-process/</guid><description>&lt;h1 id="processus-event-storming"&gt;Processus Event Storming&lt;/h1&gt;
&lt;h2 id="atelier-event-storming---√©tapes"&gt;Atelier Event Storming - √âtapes&lt;/h2&gt;
&lt;pre tabindex="0"&gt;&lt;code class="language-mermaid" data-lang="mermaid"&gt;graph TD
 A[Pr√©paration] --&amp;gt; B[Session 1: D√©couverte]
 B --&amp;gt; C[Session 2: Affinage]
 C --&amp;gt; D[Session 3: Architecture]
 D --&amp;gt; E[Documentation]
 
 subgraph &amp;#34;Pr√©paration&amp;#34;
 A1[Inviter les participants]
 A2[Pr√©parer le mat√©riel]
 A3[D√©finir les objectifs]
 end
 
 subgraph &amp;#34;Session 1: D√©couverte&amp;#34;
 B1[Identifier les √©v√©nements m√©tier]
 B2[Identifier les commandes]
 B3[Identifier les acteurs]
 B4[Identifier les r√®gles m√©tier]
 end
 
 subgraph &amp;#34;Session 2: Affinement&amp;#34;
 C1[Grouper les √©v√©nements]
 C2[D√©finir les agr√©gats]
 C3[Identifier les bounded contexts]
 C4[Valider les r√®gles m√©tier]
 end
 
 subgraph &amp;#34;Session 3: Architecture&amp;#34;
 D1[D√©finir l&amp;#39;architecture]
 D2[Identifier les int√©grations]
 D3[Planifier l&amp;#39;impl√©mentation]
 D4[Prioriser les fonctionnalit√©s]
 end
 
 subgraph &amp;#34;Documentation&amp;#34;
 E1[Cr√©er les diagrammes]
 E2[R√©diger les sp√©cifications]
 E3[Partager les r√©sultats]
 E4[Planifier les prochaines √©tapes]
 end
 
 A --&amp;gt; A1
 A --&amp;gt; A2
 A --&amp;gt; A3
 
 B --&amp;gt; B1
 B --&amp;gt; B2
 B --&amp;gt; B3
 B --&amp;gt; B4
 
 C --&amp;gt; C1
 C --&amp;gt; C2
 C --&amp;gt; C3
 C --&amp;gt; C4
 
 D --&amp;gt; D1
 D --&amp;gt; D2
 D --&amp;gt; D3
 D --&amp;gt; D4
 
 E --&amp;gt; E1
 E --&amp;gt; E2
 E --&amp;gt; E3
 E --&amp;gt; E4
&lt;/code&gt;&lt;/pre&gt;&lt;h2 id="exemple-devent-storming---syst√®me-de-paiement"&gt;Exemple d&amp;rsquo;Event Storming - Syst√®me de Paiement&lt;/h2&gt;
&lt;pre tabindex="0"&gt;&lt;code class="language-mermaid" data-lang="mermaid"&gt;graph TB
 subgraph &amp;#34;Acteurs&amp;#34;
 CUSTOMER[Customer]
 MERCHANT[Merchant]
 PAYMENT_GATEWAY[Payment Gateway]
 ADMIN[Admin]
 end
 
 subgraph &amp;#34;Commandes&amp;#34;
 CREATE_PAYMENT[Create Payment]
 PROCESS_PAYMENT[Process Payment]
 REFUND_PAYMENT[Refund Payment]
 CANCEL_PAYMENT[Cancel Payment]
 end
 
 subgraph &amp;#34;√âv√©nements&amp;#34;
 PAYMENT_CREATED[Payment Created]
 PAYMENT_PROCESSED[Payment Processed]
 PAYMENT_FAILED[Payment Failed]
 PAYMENT_REFUNDED[Payment Refunded]
 PAYMENT_CANCELLED[Payment Cancelled]
 end
 
 subgraph &amp;#34;R√®gles M√©tier&amp;#34;
 VALIDATE_AMOUNT[Amount &amp;gt; 0]
 VALIDATE_CURRENCY[Valid Currency]
 CHECK_BALANCE[Sufficient Balance]
 VERIFY_MERCHANT[Merchant Verified]
 end
 
 CUSTOMER --&amp;gt; CREATE_PAYMENT
 MERCHANT --&amp;gt; PROCESS_PAYMENT
 ADMIN --&amp;gt; REFUND_PAYMENT
 CUSTOMER --&amp;gt; CANCEL_PAYMENT
 
 CREATE_PAYMENT --&amp;gt; PAYMENT_CREATED
 PROCESS_PAYMENT --&amp;gt; PAYMENT_PROCESSED
 PROCESS_PAYMENT --&amp;gt; PAYMENT_FAILED
 REFUND_PAYMENT --&amp;gt; PAYMENT_REFUNDED
 CANCEL_PAYMENT --&amp;gt; PAYMENT_CANCELLED
 
 VALIDATE_AMOUNT --&amp;gt; CREATE_PAYMENT
 VALIDATE_CURRENCY --&amp;gt; CREATE_PAYMENT
 CHECK_BALANCE --&amp;gt; PROCESS_PAYMENT
 VERIFY_MERCHANT --&amp;gt; PROCESS_PAYMENT
 
 style CUSTOMER fill:#e1f5fe
 style MERCHANT fill:#e8f5e8
 style PAYMENT_GATEWAY fill:#fff3e0
 style ADMIN fill:#f3e5f5
 style CREATE_PAYMENT fill:#ffeb3b
 style PAYMENT_CREATED fill:#4caf50
 style VALIDATE_AMOUNT fill:#ff9800
&lt;/code&gt;&lt;/pre&gt;&lt;h2 id="bounded-contexts---syst√®me-gyroscops-cloud"&gt;Bounded Contexts - Syst√®me Gyroscops Cloud&lt;/h2&gt;
&lt;pre tabindex="0"&gt;&lt;code class="language-mermaid" data-lang="mermaid"&gt;graph TB
 subgraph &amp;#34;Authentication Context&amp;#34;
 AUTH_USER[User]
 AUTH_ROLE[Role]
 AUTH_PERMISSION[Permission]
 AUTH_SESSION[Session]
 end
 
 subgraph &amp;#34;Payment Context&amp;#34;
 PAYMENT[Payment]
 SUBSCRIPTION[Subscription]
 BILLING[Billing]
 INVOICE[Invoice]
 end
 
 subgraph &amp;#34;Integration Context&amp;#34;
 INTEGRATION[Integration]
 WORKFLOW[Workflow]
 CONNECTOR[Connector]
 MAPPING[Mapping]
 end
 
 subgraph &amp;#34;Monitoring Context&amp;#34;
 METRICS[Metrics]
 ALERT[Alert]
 LOG[Log]
 HEALTH[Health Check]
 end
 
 subgraph &amp;#34;Organization Context&amp;#34;
 ORG[Organization]
 TEAM[Team]
 PROJECT[Project]
 SETTINGS[Settings]
 end
 
 AUTH_USER -.-&amp;gt; PAYMENT
 AUTH_USER -.-&amp;gt; INTEGRATION
 AUTH_USER -.-&amp;gt; METRICS
 AUTH_USER -.-&amp;gt; ORG
 
 PAYMENT -.-&amp;gt; INTEGRATION
 INTEGRATION -.-&amp;gt; METRICS
 ORG -.-&amp;gt; PAYMENT
 ORG -.-&amp;gt; INTEGRATION
 
 style AUTH_USER fill:#e1f5fe
 style PAYMENT fill:#e8f5e8
 style INTEGRATION fill:#fff3e0
 style METRICS fill:#f3e5f5
 style ORG fill:#fff8e1
&lt;/code&gt;&lt;/pre&gt;&lt;h2 id="flux-d√©v√©nements---cr√©ation-de-paiement"&gt;Flux d&amp;rsquo;√âv√©nements - Cr√©ation de Paiement&lt;/h2&gt;
&lt;pre tabindex="0"&gt;&lt;code class="language-mermaid" data-lang="mermaid"&gt;sequenceDiagram
 participant C as Customer
 participant API as API Gateway
 participant CH as Command Handler
 participant A as Payment Aggregate
 participant ES as Event Store
 participant EB as Event Bus
 participant P as Projection
 participant RM as Read Model
 participant QH as Query Handler
 
 C-&amp;gt;&amp;gt;API: POST /api/payments
 API-&amp;gt;&amp;gt;CH: CreatePaymentCommand
 CH-&amp;gt;&amp;gt;A: createPayment(amount, currency, customer)
 
 A-&amp;gt;&amp;gt;A: validateAmount()
 A-&amp;gt;&amp;gt;A: validateCurrency()
 A-&amp;gt;&amp;gt;A: validateCustomer()
 
 A-&amp;gt;&amp;gt;ES: save(PaymentCreated)
 A-&amp;gt;&amp;gt;EB: publish(PaymentCreated)
 
 EB-&amp;gt;&amp;gt;P: handle(PaymentCreated)
 P-&amp;gt;&amp;gt;RM: updatePaymentList()
 
 A-&amp;gt;&amp;gt;CH: PaymentCreated
 CH-&amp;gt;&amp;gt;API: PaymentCreated
 API-&amp;gt;&amp;gt;C: 201 Created
 
 Note over C,RM: Query pour r√©cup√©rer la liste
 C-&amp;gt;&amp;gt;API: GET /api/payments
 API-&amp;gt;&amp;gt;QH: GetPaymentsQuery
 QH-&amp;gt;&amp;gt;RM: findPayments()
 RM-&amp;gt;&amp;gt;QH: Payment[]
 QH-&amp;gt;&amp;gt;API: Payment[]
 API-&amp;gt;&amp;gt;C: 200 OK
&lt;/code&gt;&lt;/pre&gt;&lt;h2 id="impact-mapping---syst√®me-de-paiement"&gt;Impact Mapping - Syst√®me de Paiement&lt;/h2&gt;
&lt;pre tabindex="0"&gt;&lt;code class="language-mermaid" data-lang="mermaid"&gt;graph TB
 subgraph &amp;#34;Objectif Business&amp;#34;
 OBJ[Augmenter les revenus de 20%]
 end
 
 subgraph &amp;#34;Acteurs&amp;#34;
 CUSTOMER[Customer]
 MERCHANT[Merchant]
 SUPPORT[Support Team]
 DEV[Development Team]
 end
 
 subgraph &amp;#34;Impacts&amp;#34;
 CUSTOMER_IMPACT[Paiement plus rapide]
 MERCHANT_IMPACT[Moins de frais]
 SUPPORT_IMPACT[Moins de tickets]
 DEV_IMPACT[D√©veloppement plus rapide]
 end
 
 subgraph &amp;#34;Livrables&amp;#34;
 PAYMENT_API[API de Paiement]
 DASHBOARD[Dashboard]
 DOCUMENTATION[Documentation]
 MONITORING[Monitoring]
 end
 
 OBJ --&amp;gt; CUSTOMER_IMPACT
 OBJ --&amp;gt; MERCHANT_IMPACT
 OBJ --&amp;gt; SUPPORT_IMPACT
 OBJ --&amp;gt; DEV_IMPACT
 
 CUSTOMER_IMPACT --&amp;gt; PAYMENT_API
 MERCHANT_IMPACT --&amp;gt; DASHBOARD
 SUPPORT_IMPACT --&amp;gt; DOCUMENTATION
 DEV_IMPACT --&amp;gt; MONITORING
 
 CUSTOMER --&amp;gt; CUSTOMER_IMPACT
 MERCHANT --&amp;gt; MERCHANT_IMPACT
 SUPPORT --&amp;gt; SUPPORT_IMPACT
 DEV --&amp;gt; DEV_IMPACT
 
 style OBJ fill:#ff5722
 style CUSTOMER fill:#e1f5fe
 style MERCHANT fill:#e8f5e8
 style SUPPORT fill:#fff3e0
 style DEV fill:#f3e5f5
 style PAYMENT_API fill:#4caf50
 style DASHBOARD fill:#ff9800
 style DOCUMENTATION fill:#9c27b0
 style MONITORING fill:#607d8b
&lt;/code&gt;&lt;/pre&gt;&lt;h2 id="example-mapping---cr√©ation-de-paiement"&gt;Example Mapping - Cr√©ation de Paiement&lt;/h2&gt;
&lt;pre tabindex="0"&gt;&lt;code class="language-mermaid" data-lang="mermaid"&gt;graph TB
 subgraph &amp;#34;R√®gle M√©tier&amp;#34;
 RULE[Un paiement doit avoir un montant positif]
 end
 
 subgraph &amp;#34;Exemples&amp;#34;
 EX1[‚úÖ Montant: 100.00‚Ç¨ ‚Üí Paiement cr√©√©]
 EX2[‚ùå Montant: -50.00‚Ç¨ ‚Üí Erreur de validation]
 EX3[‚ùå Montant: 0.00‚Ç¨ ‚Üí Erreur de validation]
 EX4[‚ùå Montant: null ‚Üí Erreur de validation]
 end
 
 subgraph &amp;#34;Questions&amp;#34;
 Q1[Que se passe-t-il si le montant est trop √©lev√©?]
 Q2[Que se passe-t-il si la devise n&amp;#39;est pas support√©e?]
 Q3[Que se passe-t-il si le client n&amp;#39;existe pas?]
 end
 
 subgraph &amp;#34;Tests d&amp;#39;Acceptation&amp;#34;
 T1[Given: Montant valide&amp;lt;br/&amp;gt;When: Cr√©er le paiement&amp;lt;br/&amp;gt;Then: Paiement cr√©√© avec succ√®s]
 T2[Given: Montant n√©gatif&amp;lt;br/&amp;gt;When: Cr√©er le paiement&amp;lt;br/&amp;gt;Then: Erreur de validation]
 T3[Given: Montant z√©ro&amp;lt;br/&amp;gt;When: Cr√©er le paiement&amp;lt;br/&amp;gt;Then: Erreur de validation]
 T4[Given: Montant null&amp;lt;br/&amp;gt;When: Cr√©er le paiement&amp;lt;br/&amp;gt;Then: Erreur de validation]
 end
 
 RULE --&amp;gt; EX1
 RULE --&amp;gt; EX2
 RULE --&amp;gt; EX3
 RULE --&amp;gt; EX4
 
 RULE --&amp;gt; Q1
 RULE --&amp;gt; Q2
 RULE --&amp;gt; Q3
 
 EX1 --&amp;gt; T1
 EX2 --&amp;gt; T2
 EX3 --&amp;gt; T3
 EX4 --&amp;gt; T4
 
 style RULE fill:#ff5722
 style EX1 fill:#4caf50
 style EX2 fill:#f44336
 style EX3 fill:#f44336
 style EX4 fill:#f44336
 style Q1 fill:#ff9800
 style Q2 fill:#ff9800
 style Q3 fill:#ff9800
 style T1 fill:#e8f5e8
 style T2 fill:#ffebee
 style T3 fill:#ffebee
 style T4 fill:#ffebee
&lt;/code&gt;&lt;/pre&gt;</description></item><item><title/><link>http://localhost:1313/exemples-concrets-stockage/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>http://localhost:1313/exemples-concrets-stockage/</guid><description>&lt;h1 id="-exemples-concrets-pour-chaque-approche-de-stockage"&gt;üíæ Exemples Concrets pour Chaque Approche de Stockage&lt;/h1&gt;
&lt;h2 id="-vue-densemble"&gt;üìã Vue d&amp;rsquo;Ensemble&lt;/h2&gt;
&lt;p&gt;Ce document fournit des exemples concrets d&amp;rsquo;impl√©mentation pour chaque approche de stockage pr√©sent√©e dans la documentation. Chaque exemple est bas√© sur le Gyroscops Cloud et suit les patterns √©tablis dans les ADR.&lt;/p&gt;
&lt;h2 id="-approches-de-stockage"&gt;üèóÔ∏è Approches de Stockage&lt;/h2&gt;
&lt;h3 id="1-stockage-sql---approche-classique"&gt;1. Stockage SQL - Approche Classique&lt;/h3&gt;
&lt;h4 id="exemple--repository-de-paiement"&gt;Exemple : Repository de Paiement&lt;/h4&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"&gt;&lt;code class="language-php" data-lang="php"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#75715e"&gt;// Repository de Paiement Classique - Projet Gyroscops Cloud
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#75715e"&gt;&lt;/span&gt;&lt;span style="color:#66d9ef"&gt;final&lt;/span&gt; &lt;span style="color:#66d9ef"&gt;class&lt;/span&gt; &lt;span style="color:#a6e22e"&gt;DatabasePaymentRepository&lt;/span&gt; &lt;span style="color:#66d9ef"&gt;implements&lt;/span&gt; &lt;span style="color:#a6e22e"&gt;PaymentRepositoryInterface&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;{
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#66d9ef"&gt;public&lt;/span&gt; &lt;span style="color:#66d9ef"&gt;function&lt;/span&gt; &lt;span style="color:#a6e22e"&gt;__construct&lt;/span&gt;(
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#66d9ef"&gt;private&lt;/span&gt; &lt;span style="color:#a6e22e"&gt;Connection&lt;/span&gt; $connection,
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#66d9ef"&gt;private&lt;/span&gt; &lt;span style="color:#a6e22e"&gt;EventBusInterface&lt;/span&gt; $eventBus,
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; ) {
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; }
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#66d9ef"&gt;public&lt;/span&gt; &lt;span style="color:#66d9ef"&gt;function&lt;/span&gt; &lt;span style="color:#a6e22e"&gt;get&lt;/span&gt;(&lt;span style="color:#a6e22e"&gt;PaymentId&lt;/span&gt; $id)&lt;span style="color:#f92672"&gt;:&lt;/span&gt; &lt;span style="color:#a6e22e"&gt;Payment&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; {
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; $sql &lt;span style="color:#f92672"&gt;=&lt;/span&gt; &lt;span style="color:#e6db74"&gt;&amp;lt;&amp;lt;&amp;lt;&amp;#39;&lt;/span&gt;&lt;span style="color:#e6db74"&gt;SQL&lt;/span&gt;&lt;span style="color:#e6db74"&gt;&amp;#39;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#e6db74"&gt; SELECT 
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#e6db74"&gt; uuid,
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#e6db74"&gt; amount,
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#e6db74"&gt; currency,
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#e6db74"&gt; status,
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#e6db74"&gt; authorization_code,
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#e6db74"&gt; created_at,
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#e6db74"&gt; processed_at,
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#e6db74"&gt; cancelled_at,
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#e6db74"&gt; version
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#e6db74"&gt; FROM payments
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#e6db74"&gt; WHERE uuid = :uuid
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#e6db74"&gt; LIMIT 1
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#e6db74"&gt; &lt;/span&gt;&lt;span style="color:#e6db74"&gt;SQL&lt;/span&gt;;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; $statement &lt;span style="color:#f92672"&gt;=&lt;/span&gt; $this&lt;span style="color:#f92672"&gt;-&amp;gt;&lt;/span&gt;&lt;span style="color:#a6e22e"&gt;connection&lt;/span&gt;&lt;span style="color:#f92672"&gt;-&amp;gt;&lt;/span&gt;&lt;span style="color:#a6e22e"&gt;prepare&lt;/span&gt;($sql);
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; $statement&lt;span style="color:#f92672"&gt;-&amp;gt;&lt;/span&gt;&lt;span style="color:#a6e22e"&gt;bindValue&lt;/span&gt;(&lt;span style="color:#e6db74"&gt;&amp;#39;:uuid&amp;#39;&lt;/span&gt;, $id&lt;span style="color:#f92672"&gt;-&amp;gt;&lt;/span&gt;&lt;span style="color:#a6e22e"&gt;toString&lt;/span&gt;(), &lt;span style="color:#a6e22e"&gt;ParameterType&lt;/span&gt;&lt;span style="color:#f92672"&gt;::&lt;/span&gt;&lt;span style="color:#a6e22e"&gt;STRING&lt;/span&gt;);
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; $result &lt;span style="color:#f92672"&gt;=&lt;/span&gt; $statement&lt;span style="color:#f92672"&gt;-&amp;gt;&lt;/span&gt;&lt;span style="color:#a6e22e"&gt;executeQuery&lt;/span&gt;();
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#66d9ef"&gt;if&lt;/span&gt; ($result&lt;span style="color:#f92672"&gt;-&amp;gt;&lt;/span&gt;&lt;span style="color:#a6e22e"&gt;rowCount&lt;/span&gt;() &lt;span style="color:#f92672"&gt;&amp;lt;=&lt;/span&gt; &lt;span style="color:#ae81ff"&gt;0&lt;/span&gt;) {
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#66d9ef"&gt;throw&lt;/span&gt; &lt;span style="color:#66d9ef"&gt;new&lt;/span&gt; &lt;span style="color:#a6e22e"&gt;NotFoundException&lt;/span&gt;();
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; }
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; $payment &lt;span style="color:#f92672"&gt;=&lt;/span&gt; $result&lt;span style="color:#f92672"&gt;-&amp;gt;&lt;/span&gt;&lt;span style="color:#a6e22e"&gt;fetchAssociative&lt;/span&gt;();
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#66d9ef"&gt;if&lt;/span&gt; (&lt;span style="color:#66d9ef"&gt;false&lt;/span&gt; &lt;span style="color:#f92672"&gt;===&lt;/span&gt; $payment) {
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#66d9ef"&gt;throw&lt;/span&gt; &lt;span style="color:#66d9ef"&gt;new&lt;/span&gt; &lt;span style="color:#a6e22e"&gt;NotFoundException&lt;/span&gt;();
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; }
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#66d9ef"&gt;return&lt;/span&gt; &lt;span style="color:#66d9ef"&gt;new&lt;/span&gt; &lt;span style="color:#a6e22e"&gt;Payment&lt;/span&gt;(
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#a6e22e"&gt;id&lt;/span&gt;&lt;span style="color:#f92672"&gt;:&lt;/span&gt; &lt;span style="color:#a6e22e"&gt;PaymentId&lt;/span&gt;&lt;span style="color:#f92672"&gt;::&lt;/span&gt;&lt;span style="color:#a6e22e"&gt;fromString&lt;/span&gt;($payment[&lt;span style="color:#e6db74"&gt;&amp;#39;uuid&amp;#39;&lt;/span&gt;]),
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#a6e22e"&gt;amount&lt;/span&gt;&lt;span style="color:#f92672"&gt;:&lt;/span&gt; &lt;span style="color:#66d9ef"&gt;new&lt;/span&gt; &lt;span style="color:#a6e22e"&gt;Amount&lt;/span&gt;($payment[&lt;span style="color:#e6db74"&gt;&amp;#39;amount&amp;#39;&lt;/span&gt;], &lt;span style="color:#a6e22e"&gt;Currencies&lt;/span&gt;&lt;span style="color:#f92672"&gt;::&lt;/span&gt;&lt;span style="color:#a6e22e"&gt;from&lt;/span&gt;($payment[&lt;span style="color:#e6db74"&gt;&amp;#39;currency&amp;#39;&lt;/span&gt;])),
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#a6e22e"&gt;status&lt;/span&gt;&lt;span style="color:#f92672"&gt;:&lt;/span&gt; &lt;span style="color:#a6e22e"&gt;PaymentStatus&lt;/span&gt;&lt;span style="color:#f92672"&gt;::&lt;/span&gt;&lt;span style="color:#a6e22e"&gt;from&lt;/span&gt;($payment[&lt;span style="color:#e6db74"&gt;&amp;#39;status&amp;#39;&lt;/span&gt;]),
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#a6e22e"&gt;authorizationCode&lt;/span&gt;&lt;span style="color:#f92672"&gt;:&lt;/span&gt; $payment[&lt;span style="color:#e6db74"&gt;&amp;#39;authorization_code&amp;#39;&lt;/span&gt;],
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#a6e22e"&gt;createdAt&lt;/span&gt;&lt;span style="color:#f92672"&gt;:&lt;/span&gt; &lt;span style="color:#66d9ef"&gt;new&lt;/span&gt; &lt;span style="color:#a6e22e"&gt;\DateTimeImmutable&lt;/span&gt;($payment[&lt;span style="color:#e6db74"&gt;&amp;#39;created_at&amp;#39;&lt;/span&gt;]),
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#a6e22e"&gt;processedAt&lt;/span&gt;&lt;span style="color:#f92672"&gt;:&lt;/span&gt; $payment[&lt;span style="color:#e6db74"&gt;&amp;#39;processed_at&amp;#39;&lt;/span&gt;] &lt;span style="color:#f92672"&gt;?&lt;/span&gt; &lt;span style="color:#66d9ef"&gt;new&lt;/span&gt; &lt;span style="color:#a6e22e"&gt;\DateTimeImmutable&lt;/span&gt;($payment[&lt;span style="color:#e6db74"&gt;&amp;#39;processed_at&amp;#39;&lt;/span&gt;]) &lt;span style="color:#f92672"&gt;:&lt;/span&gt; &lt;span style="color:#66d9ef"&gt;null&lt;/span&gt;,
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#a6e22e"&gt;cancelledAt&lt;/span&gt;&lt;span style="color:#f92672"&gt;:&lt;/span&gt; $payment[&lt;span style="color:#e6db74"&gt;&amp;#39;cancelled_at&amp;#39;&lt;/span&gt;] &lt;span style="color:#f92672"&gt;?&lt;/span&gt; &lt;span style="color:#66d9ef"&gt;new&lt;/span&gt; &lt;span style="color:#a6e22e"&gt;\DateTimeImmutable&lt;/span&gt;($payment[&lt;span style="color:#e6db74"&gt;&amp;#39;cancelled_at&amp;#39;&lt;/span&gt;]) &lt;span style="color:#f92672"&gt;:&lt;/span&gt; &lt;span style="color:#66d9ef"&gt;null&lt;/span&gt;,
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#a6e22e"&gt;version&lt;/span&gt;&lt;span style="color:#f92672"&gt;:&lt;/span&gt; $payment[&lt;span style="color:#e6db74"&gt;&amp;#39;version&amp;#39;&lt;/span&gt;]
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; );
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; }
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#66d9ef"&gt;public&lt;/span&gt; &lt;span style="color:#66d9ef"&gt;function&lt;/span&gt; &lt;span style="color:#a6e22e"&gt;save&lt;/span&gt;(&lt;span style="color:#a6e22e"&gt;Payment&lt;/span&gt; $payment)&lt;span style="color:#f92672"&gt;:&lt;/span&gt; &lt;span style="color:#a6e22e"&gt;void&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; {
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; $this&lt;span style="color:#f92672"&gt;-&amp;gt;&lt;/span&gt;&lt;span style="color:#a6e22e"&gt;connection&lt;/span&gt;&lt;span style="color:#f92672"&gt;-&amp;gt;&lt;/span&gt;&lt;span style="color:#a6e22e"&gt;beginTransaction&lt;/span&gt;();
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#66d9ef"&gt;try&lt;/span&gt; {
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; $events &lt;span style="color:#f92672"&gt;=&lt;/span&gt; $payment&lt;span style="color:#f92672"&gt;-&amp;gt;&lt;/span&gt;&lt;span style="color:#a6e22e"&gt;releaseEvents&lt;/span&gt;();
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#75715e"&gt;// Sauvegarder l&amp;#39;√©tat
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#75715e"&gt;&lt;/span&gt; $this&lt;span style="color:#f92672"&gt;-&amp;gt;&lt;/span&gt;&lt;span style="color:#a6e22e"&gt;savePayment&lt;/span&gt;($payment);
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#75715e"&gt;// √âmettre les √©v√©nements
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#75715e"&gt;&lt;/span&gt; &lt;span style="color:#66d9ef"&gt;foreach&lt;/span&gt; ($events &lt;span style="color:#66d9ef"&gt;as&lt;/span&gt; $event) {
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; $this&lt;span style="color:#f92672"&gt;-&amp;gt;&lt;/span&gt;&lt;span style="color:#a6e22e"&gt;eventBus&lt;/span&gt;&lt;span style="color:#f92672"&gt;-&amp;gt;&lt;/span&gt;&lt;span style="color:#a6e22e"&gt;emit&lt;/span&gt;($event);
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; }
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; $this&lt;span style="color:#f92672"&gt;-&amp;gt;&lt;/span&gt;&lt;span style="color:#a6e22e"&gt;connection&lt;/span&gt;&lt;span style="color:#f92672"&gt;-&amp;gt;&lt;/span&gt;&lt;span style="color:#a6e22e"&gt;commit&lt;/span&gt;();
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; } &lt;span style="color:#66d9ef"&gt;catch&lt;/span&gt; (&lt;span style="color:#a6e22e"&gt;\Throwable&lt;/span&gt; $exception) {
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; $this&lt;span style="color:#f92672"&gt;-&amp;gt;&lt;/span&gt;&lt;span style="color:#a6e22e"&gt;connection&lt;/span&gt;&lt;span style="color:#f92672"&gt;-&amp;gt;&lt;/span&gt;&lt;span style="color:#a6e22e"&gt;rollBack&lt;/span&gt;();
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#66d9ef"&gt;throw&lt;/span&gt; $exception;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; }
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; }
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#66d9ef"&gt;private&lt;/span&gt; &lt;span style="color:#66d9ef"&gt;function&lt;/span&gt; &lt;span style="color:#a6e22e"&gt;savePayment&lt;/span&gt;(&lt;span style="color:#a6e22e"&gt;Payment&lt;/span&gt; $payment)&lt;span style="color:#f92672"&gt;:&lt;/span&gt; &lt;span style="color:#a6e22e"&gt;void&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; {
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; $sql &lt;span style="color:#f92672"&gt;=&lt;/span&gt; &lt;span style="color:#e6db74"&gt;&amp;lt;&amp;lt;&amp;lt;&amp;#39;&lt;/span&gt;&lt;span style="color:#e6db74"&gt;SQL&lt;/span&gt;&lt;span style="color:#e6db74"&gt;&amp;#39;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#e6db74"&gt; INSERT INTO payments (
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#e6db74"&gt; uuid, amount, currency, status, authorization_code, 
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#e6db74"&gt; created_at, processed_at, cancelled_at, version
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#e6db74"&gt; ) VALUES (
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#e6db74"&gt; :uuid, :amount, :currency, :status, :authorization_code,
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#e6db74"&gt; :created_at, :processed_at, :cancelled_at, :version
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#e6db74"&gt; ) ON DUPLICATE KEY UPDATE
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#e6db74"&gt; amount = VALUES(amount),
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#e6db74"&gt; currency = VALUES(currency),
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#e6db74"&gt; status = VALUES(status),
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#e6db74"&gt; authorization_code = VALUES(authorization_code),
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#e6db74"&gt; processed_at = VALUES(processed_at),
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#e6db74"&gt; cancelled_at = VALUES(cancelled_at),
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#e6db74"&gt; version = VALUES(version)
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#e6db74"&gt; &lt;/span&gt;&lt;span style="color:#e6db74"&gt;SQL&lt;/span&gt;;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; $statement &lt;span style="color:#f92672"&gt;=&lt;/span&gt; $this&lt;span style="color:#f92672"&gt;-&amp;gt;&lt;/span&gt;&lt;span style="color:#a6e22e"&gt;connection&lt;/span&gt;&lt;span style="color:#f92672"&gt;-&amp;gt;&lt;/span&gt;&lt;span style="color:#a6e22e"&gt;prepare&lt;/span&gt;($sql);
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; $statement&lt;span style="color:#f92672"&gt;-&amp;gt;&lt;/span&gt;&lt;span style="color:#a6e22e"&gt;bindValue&lt;/span&gt;(&lt;span style="color:#e6db74"&gt;&amp;#39;:uuid&amp;#39;&lt;/span&gt;, $payment&lt;span style="color:#f92672"&gt;-&amp;gt;&lt;/span&gt;&lt;span style="color:#a6e22e"&gt;getId&lt;/span&gt;()&lt;span style="color:#f92672"&gt;-&amp;gt;&lt;/span&gt;&lt;span style="color:#a6e22e"&gt;toString&lt;/span&gt;(), &lt;span style="color:#a6e22e"&gt;ParameterType&lt;/span&gt;&lt;span style="color:#f92672"&gt;::&lt;/span&gt;&lt;span style="color:#a6e22e"&gt;STRING&lt;/span&gt;);
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; $statement&lt;span style="color:#f92672"&gt;-&amp;gt;&lt;/span&gt;&lt;span style="color:#a6e22e"&gt;bindValue&lt;/span&gt;(&lt;span style="color:#e6db74"&gt;&amp;#39;:amount&amp;#39;&lt;/span&gt;, $payment&lt;span style="color:#f92672"&gt;-&amp;gt;&lt;/span&gt;&lt;span style="color:#a6e22e"&gt;getAmount&lt;/span&gt;()&lt;span style="color:#f92672"&gt;-&amp;gt;&lt;/span&gt;&lt;span style="color:#a6e22e"&gt;getValue&lt;/span&gt;(), &lt;span style="color:#a6e22e"&gt;ParameterType&lt;/span&gt;&lt;span style="color:#f92672"&gt;::&lt;/span&gt;&lt;span style="color:#a6e22e"&gt;STRING&lt;/span&gt;);
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; $statement&lt;span style="color:#f92672"&gt;-&amp;gt;&lt;/span&gt;&lt;span style="color:#a6e22e"&gt;bindValue&lt;/span&gt;(&lt;span style="color:#e6db74"&gt;&amp;#39;:currency&amp;#39;&lt;/span&gt;, $payment&lt;span style="color:#f92672"&gt;-&amp;gt;&lt;/span&gt;&lt;span style="color:#a6e22e"&gt;getAmount&lt;/span&gt;()&lt;span style="color:#f92672"&gt;-&amp;gt;&lt;/span&gt;&lt;span style="color:#a6e22e"&gt;getCurrency&lt;/span&gt;()&lt;span style="color:#f92672"&gt;-&amp;gt;&lt;/span&gt;&lt;span style="color:#a6e22e"&gt;value&lt;/span&gt;, &lt;span style="color:#a6e22e"&gt;ParameterType&lt;/span&gt;&lt;span style="color:#f92672"&gt;::&lt;/span&gt;&lt;span style="color:#a6e22e"&gt;STRING&lt;/span&gt;);
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; $statement&lt;span style="color:#f92672"&gt;-&amp;gt;&lt;/span&gt;&lt;span style="color:#a6e22e"&gt;bindValue&lt;/span&gt;(&lt;span style="color:#e6db74"&gt;&amp;#39;:status&amp;#39;&lt;/span&gt;, $payment&lt;span style="color:#f92672"&gt;-&amp;gt;&lt;/span&gt;&lt;span style="color:#a6e22e"&gt;getStatus&lt;/span&gt;()&lt;span style="color:#f92672"&gt;-&amp;gt;&lt;/span&gt;&lt;span style="color:#a6e22e"&gt;value&lt;/span&gt;, &lt;span style="color:#a6e22e"&gt;ParameterType&lt;/span&gt;&lt;span style="color:#f92672"&gt;::&lt;/span&gt;&lt;span style="color:#a6e22e"&gt;STRING&lt;/span&gt;);
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; $statement&lt;span style="color:#f92672"&gt;-&amp;gt;&lt;/span&gt;&lt;span style="color:#a6e22e"&gt;bindValue&lt;/span&gt;(&lt;span style="color:#e6db74"&gt;&amp;#39;:authorization_code&amp;#39;&lt;/span&gt;, $payment&lt;span style="color:#f92672"&gt;-&amp;gt;&lt;/span&gt;&lt;span style="color:#a6e22e"&gt;getAuthorizationCode&lt;/span&gt;(), &lt;span style="color:#a6e22e"&gt;ParameterType&lt;/span&gt;&lt;span style="color:#f92672"&gt;::&lt;/span&gt;&lt;span style="color:#a6e22e"&gt;STRING&lt;/span&gt;);
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; $statement&lt;span style="color:#f92672"&gt;-&amp;gt;&lt;/span&gt;&lt;span style="color:#a6e22e"&gt;bindValue&lt;/span&gt;(&lt;span style="color:#e6db74"&gt;&amp;#39;:created_at&amp;#39;&lt;/span&gt;, $payment&lt;span style="color:#f92672"&gt;-&amp;gt;&lt;/span&gt;&lt;span style="color:#a6e22e"&gt;getCreatedAt&lt;/span&gt;()&lt;span style="color:#f92672"&gt;-&amp;gt;&lt;/span&gt;&lt;span style="color:#a6e22e"&gt;format&lt;/span&gt;(&lt;span style="color:#e6db74"&gt;&amp;#39;Y-m-d H:i:s&amp;#39;&lt;/span&gt;), &lt;span style="color:#a6e22e"&gt;ParameterType&lt;/span&gt;&lt;span style="color:#f92672"&gt;::&lt;/span&gt;&lt;span style="color:#a6e22e"&gt;STRING&lt;/span&gt;);
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; $statement&lt;span style="color:#f92672"&gt;-&amp;gt;&lt;/span&gt;&lt;span style="color:#a6e22e"&gt;bindValue&lt;/span&gt;(&lt;span style="color:#e6db74"&gt;&amp;#39;:processed_at&amp;#39;&lt;/span&gt;, $payment&lt;span style="color:#f92672"&gt;-&amp;gt;&lt;/span&gt;&lt;span style="color:#a6e22e"&gt;getProcessedAt&lt;/span&gt;()&lt;span style="color:#f92672"&gt;?-&amp;gt;&lt;/span&gt;&lt;span style="color:#a6e22e"&gt;format&lt;/span&gt;(&lt;span style="color:#e6db74"&gt;&amp;#39;Y-m-d H:i:s&amp;#39;&lt;/span&gt;), &lt;span style="color:#a6e22e"&gt;ParameterType&lt;/span&gt;&lt;span style="color:#f92672"&gt;::&lt;/span&gt;&lt;span style="color:#a6e22e"&gt;STRING&lt;/span&gt;);
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; $statement&lt;span style="color:#f92672"&gt;-&amp;gt;&lt;/span&gt;&lt;span style="color:#a6e22e"&gt;bindValue&lt;/span&gt;(&lt;span style="color:#e6db74"&gt;&amp;#39;:cancelled_at&amp;#39;&lt;/span&gt;, $payment&lt;span style="color:#f92672"&gt;-&amp;gt;&lt;/span&gt;&lt;span style="color:#a6e22e"&gt;getCancelledAt&lt;/span&gt;()&lt;span style="color:#f92672"&gt;?-&amp;gt;&lt;/span&gt;&lt;span style="color:#a6e22e"&gt;format&lt;/span&gt;(&lt;span style="color:#e6db74"&gt;&amp;#39;Y-m-d H:i:s&amp;#39;&lt;/span&gt;), &lt;span style="color:#a6e22e"&gt;ParameterType&lt;/span&gt;&lt;span style="color:#f92672"&gt;::&lt;/span&gt;&lt;span style="color:#a6e22e"&gt;STRING&lt;/span&gt;);
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; $statement&lt;span style="color:#f92672"&gt;-&amp;gt;&lt;/span&gt;&lt;span style="color:#a6e22e"&gt;bindValue&lt;/span&gt;(&lt;span style="color:#e6db74"&gt;&amp;#39;:version&amp;#39;&lt;/span&gt;, $payment&lt;span style="color:#f92672"&gt;-&amp;gt;&lt;/span&gt;&lt;span style="color:#a6e22e"&gt;getVersion&lt;/span&gt;(), &lt;span style="color:#a6e22e"&gt;ParameterType&lt;/span&gt;&lt;span style="color:#f92672"&gt;::&lt;/span&gt;&lt;span style="color:#a6e22e"&gt;INTEGER&lt;/span&gt;);
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; $statement&lt;span style="color:#f92672"&gt;-&amp;gt;&lt;/span&gt;&lt;span style="color:#a6e22e"&gt;executeStatement&lt;/span&gt;();
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; }
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h3 id="2-stockage-sql---approche-cqs"&gt;2. Stockage SQL - Approche CQS&lt;/h3&gt;
&lt;h4 id="exemple--repository-de-paiement-cqs"&gt;Exemple : Repository de Paiement CQS&lt;/h4&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"&gt;&lt;code class="language-php" data-lang="php"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#75715e"&gt;// Repository de Paiement CQS - Projet Gyroscops Cloud
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#75715e"&gt;&lt;/span&gt;&lt;span style="color:#66d9ef"&gt;final&lt;/span&gt; &lt;span style="color:#66d9ef"&gt;class&lt;/span&gt; &lt;span style="color:#a6e22e"&gt;DatabasePaymentCQSRepository&lt;/span&gt; &lt;span style="color:#66d9ef"&gt;implements&lt;/span&gt; &lt;span style="color:#a6e22e"&gt;PaymentCQSRepositoryInterface&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;{
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#66d9ef"&gt;public&lt;/span&gt; &lt;span style="color:#66d9ef"&gt;function&lt;/span&gt; &lt;span style="color:#a6e22e"&gt;__construct&lt;/span&gt;(
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#66d9ef"&gt;private&lt;/span&gt; &lt;span style="color:#a6e22e"&gt;Connection&lt;/span&gt; $connection,
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#66d9ef"&gt;private&lt;/span&gt; &lt;span style="color:#a6e22e"&gt;EventBusInterface&lt;/span&gt; $eventBus,
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; ) {
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; }
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#75715e"&gt;// ===== COMMANDES =====
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#75715e"&gt;&lt;/span&gt; 
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#66d9ef"&gt;public&lt;/span&gt; &lt;span style="color:#66d9ef"&gt;function&lt;/span&gt; &lt;span style="color:#a6e22e"&gt;save&lt;/span&gt;(&lt;span style="color:#a6e22e"&gt;PaymentCommand&lt;/span&gt; $payment)&lt;span style="color:#f92672"&gt;:&lt;/span&gt; &lt;span style="color:#a6e22e"&gt;void&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; {
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; $this&lt;span style="color:#f92672"&gt;-&amp;gt;&lt;/span&gt;&lt;span style="color:#a6e22e"&gt;connection&lt;/span&gt;&lt;span style="color:#f92672"&gt;-&amp;gt;&lt;/span&gt;&lt;span style="color:#a6e22e"&gt;beginTransaction&lt;/span&gt;();
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#66d9ef"&gt;try&lt;/span&gt; {
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; $events &lt;span style="color:#f92672"&gt;=&lt;/span&gt; $payment&lt;span style="color:#f92672"&gt;-&amp;gt;&lt;/span&gt;&lt;span style="color:#a6e22e"&gt;releaseEvents&lt;/span&gt;();
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#75715e"&gt;// Sauvegarder l&amp;#39;√©tat
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#75715e"&gt;&lt;/span&gt; $this&lt;span style="color:#f92672"&gt;-&amp;gt;&lt;/span&gt;&lt;span style="color:#a6e22e"&gt;savePaymentCommand&lt;/span&gt;($payment);
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#75715e"&gt;// √âmettre les √©v√©nements
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#75715e"&gt;&lt;/span&gt; &lt;span style="color:#66d9ef"&gt;foreach&lt;/span&gt; ($events &lt;span style="color:#66d9ef"&gt;as&lt;/span&gt; $event) {
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; $this&lt;span style="color:#f92672"&gt;-&amp;gt;&lt;/span&gt;&lt;span style="color:#a6e22e"&gt;eventBus&lt;/span&gt;&lt;span style="color:#f92672"&gt;-&amp;gt;&lt;/span&gt;&lt;span style="color:#a6e22e"&gt;emit&lt;/span&gt;($event);
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; }
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; $this&lt;span style="color:#f92672"&gt;-&amp;gt;&lt;/span&gt;&lt;span style="color:#a6e22e"&gt;connection&lt;/span&gt;&lt;span style="color:#f92672"&gt;-&amp;gt;&lt;/span&gt;&lt;span style="color:#a6e22e"&gt;commit&lt;/span&gt;();
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; } &lt;span style="color:#66d9ef"&gt;catch&lt;/span&gt; (&lt;span style="color:#a6e22e"&gt;\Throwable&lt;/span&gt; $exception) {
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; $this&lt;span style="color:#f92672"&gt;-&amp;gt;&lt;/span&gt;&lt;span style="color:#a6e22e"&gt;connection&lt;/span&gt;&lt;span style="color:#f92672"&gt;-&amp;gt;&lt;/span&gt;&lt;span style="color:#a6e22e"&gt;rollBack&lt;/span&gt;();
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#66d9ef"&gt;throw&lt;/span&gt; $exception;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; }
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; }
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#66d9ef"&gt;private&lt;/span&gt; &lt;span style="color:#66d9ef"&gt;function&lt;/span&gt; &lt;span style="color:#a6e22e"&gt;savePaymentCommand&lt;/span&gt;(&lt;span style="color:#a6e22e"&gt;PaymentCommand&lt;/span&gt; $payment)&lt;span style="color:#f92672"&gt;:&lt;/span&gt; &lt;span style="color:#a6e22e"&gt;void&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; {
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; $sql &lt;span style="color:#f92672"&gt;=&lt;/span&gt; &lt;span style="color:#e6db74"&gt;&amp;lt;&amp;lt;&amp;lt;&amp;#39;&lt;/span&gt;&lt;span style="color:#e6db74"&gt;SQL&lt;/span&gt;&lt;span style="color:#e6db74"&gt;&amp;#39;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#e6db74"&gt; INSERT INTO payments_command (
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#e6db74"&gt; uuid, amount, currency, status, authorization_code,
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#e6db74"&gt; created_at, processed_at, cancelled_at, version
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#e6db74"&gt; ) VALUES (
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#e6db74"&gt; :uuid, :amount, :currency, :status, :authorization_code,
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#e6db74"&gt; :created_at, :processed_at, :cancelled_at, :version
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#e6db74"&gt; ) ON DUPLICATE KEY UPDATE
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#e6db74"&gt; amount = VALUES(amount),
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#e6db74"&gt; currency = VALUES(currency),
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#e6db74"&gt; status = VALUES(status),
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#e6db74"&gt; authorization_code = VALUES(authorization_code),
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#e6db74"&gt; processed_at = VALUES(processed_at),
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#e6db74"&gt; cancelled_at = VALUES(cancelled_at),
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#e6db74"&gt; version = VALUES(version)
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#e6db74"&gt; &lt;/span&gt;&lt;span style="color:#e6db74"&gt;SQL&lt;/span&gt;;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; $statement &lt;span style="color:#f92672"&gt;=&lt;/span&gt; $this&lt;span style="color:#f92672"&gt;-&amp;gt;&lt;/span&gt;&lt;span style="color:#a6e22e"&gt;connection&lt;/span&gt;&lt;span style="color:#f92672"&gt;-&amp;gt;&lt;/span&gt;&lt;span style="color:#a6e22e"&gt;prepare&lt;/span&gt;($sql);
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; $statement&lt;span style="color:#f92672"&gt;-&amp;gt;&lt;/span&gt;&lt;span style="color:#a6e22e"&gt;bindValue&lt;/span&gt;(&lt;span style="color:#e6db74"&gt;&amp;#39;:uuid&amp;#39;&lt;/span&gt;, $payment&lt;span style="color:#f92672"&gt;-&amp;gt;&lt;/span&gt;&lt;span style="color:#a6e22e"&gt;getId&lt;/span&gt;()&lt;span style="color:#f92672"&gt;-&amp;gt;&lt;/span&gt;&lt;span style="color:#a6e22e"&gt;toString&lt;/span&gt;(), &lt;span style="color:#a6e22e"&gt;ParameterType&lt;/span&gt;&lt;span style="color:#f92672"&gt;::&lt;/span&gt;&lt;span style="color:#a6e22e"&gt;STRING&lt;/span&gt;);
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; $statement&lt;span style="color:#f92672"&gt;-&amp;gt;&lt;/span&gt;&lt;span style="color:#a6e22e"&gt;bindValue&lt;/span&gt;(&lt;span style="color:#e6db74"&gt;&amp;#39;:amount&amp;#39;&lt;/span&gt;, $payment&lt;span style="color:#f92672"&gt;-&amp;gt;&lt;/span&gt;&lt;span style="color:#a6e22e"&gt;getAmount&lt;/span&gt;()&lt;span style="color:#f92672"&gt;-&amp;gt;&lt;/span&gt;&lt;span style="color:#a6e22e"&gt;getValue&lt;/span&gt;(), &lt;span style="color:#a6e22e"&gt;ParameterType&lt;/span&gt;&lt;span style="color:#f92672"&gt;::&lt;/span&gt;&lt;span style="color:#a6e22e"&gt;STRING&lt;/span&gt;);
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; $statement&lt;span style="color:#f92672"&gt;-&amp;gt;&lt;/span&gt;&lt;span style="color:#a6e22e"&gt;bindValue&lt;/span&gt;(&lt;span style="color:#e6db74"&gt;&amp;#39;:currency&amp;#39;&lt;/span&gt;, $payment&lt;span style="color:#f92672"&gt;-&amp;gt;&lt;/span&gt;&lt;span style="color:#a6e22e"&gt;getAmount&lt;/span&gt;()&lt;span style="color:#f92672"&gt;-&amp;gt;&lt;/span&gt;&lt;span style="color:#a6e22e"&gt;getCurrency&lt;/span&gt;()&lt;span style="color:#f92672"&gt;-&amp;gt;&lt;/span&gt;&lt;span style="color:#a6e22e"&gt;value&lt;/span&gt;, &lt;span style="color:#a6e22e"&gt;ParameterType&lt;/span&gt;&lt;span style="color:#f92672"&gt;::&lt;/span&gt;&lt;span style="color:#a6e22e"&gt;STRING&lt;/span&gt;);
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; $statement&lt;span style="color:#f92672"&gt;-&amp;gt;&lt;/span&gt;&lt;span style="color:#a6e22e"&gt;bindValue&lt;/span&gt;(&lt;span style="color:#e6db74"&gt;&amp;#39;:status&amp;#39;&lt;/span&gt;, $payment&lt;span style="color:#f92672"&gt;-&amp;gt;&lt;/span&gt;&lt;span style="color:#a6e22e"&gt;getStatus&lt;/span&gt;()&lt;span style="color:#f92672"&gt;-&amp;gt;&lt;/span&gt;&lt;span style="color:#a6e22e"&gt;value&lt;/span&gt;, &lt;span style="color:#a6e22e"&gt;ParameterType&lt;/span&gt;&lt;span style="color:#f92672"&gt;::&lt;/span&gt;&lt;span style="color:#a6e22e"&gt;STRING&lt;/span&gt;);
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; $statement&lt;span style="color:#f92672"&gt;-&amp;gt;&lt;/span&gt;&lt;span style="color:#a6e22e"&gt;bindValue&lt;/span&gt;(&lt;span style="color:#e6db74"&gt;&amp;#39;:authorization_code&amp;#39;&lt;/span&gt;, $payment&lt;span style="color:#f92672"&gt;-&amp;gt;&lt;/span&gt;&lt;span style="color:#a6e22e"&gt;getAuthorizationCode&lt;/span&gt;(), &lt;span style="color:#a6e22e"&gt;ParameterType&lt;/span&gt;&lt;span style="color:#f92672"&gt;::&lt;/span&gt;&lt;span style="color:#a6e22e"&gt;STRING&lt;/span&gt;);
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; $statement&lt;span style="color:#f92672"&gt;-&amp;gt;&lt;/span&gt;&lt;span style="color:#a6e22e"&gt;bindValue&lt;/span&gt;(&lt;span style="color:#e6db74"&gt;&amp;#39;:created_at&amp;#39;&lt;/span&gt;, $payment&lt;span style="color:#f92672"&gt;-&amp;gt;&lt;/span&gt;&lt;span style="color:#a6e22e"&gt;getCreatedAt&lt;/span&gt;()&lt;span style="color:#f92672"&gt;-&amp;gt;&lt;/span&gt;&lt;span style="color:#a6e22e"&gt;format&lt;/span&gt;(&lt;span style="color:#e6db74"&gt;&amp;#39;Y-m-d H:i:s&amp;#39;&lt;/span&gt;), &lt;span style="color:#a6e22e"&gt;ParameterType&lt;/span&gt;&lt;span style="color:#f92672"&gt;::&lt;/span&gt;&lt;span style="color:#a6e22e"&gt;STRING&lt;/span&gt;);
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; $statement&lt;span style="color:#f92672"&gt;-&amp;gt;&lt;/span&gt;&lt;span style="color:#a6e22e"&gt;bindValue&lt;/span&gt;(&lt;span style="color:#e6db74"&gt;&amp;#39;:processed_at&amp;#39;&lt;/span&gt;, $payment&lt;span style="color:#f92672"&gt;-&amp;gt;&lt;/span&gt;&lt;span style="color:#a6e22e"&gt;getProcessedAt&lt;/span&gt;()&lt;span style="color:#f92672"&gt;?-&amp;gt;&lt;/span&gt;&lt;span style="color:#a6e22e"&gt;format&lt;/span&gt;(&lt;span style="color:#e6db74"&gt;&amp;#39;Y-m-d H:i:s&amp;#39;&lt;/span&gt;), &lt;span style="color:#a6e22e"&gt;ParameterType&lt;/span&gt;&lt;span style="color:#f92672"&gt;::&lt;/span&gt;&lt;span style="color:#a6e22e"&gt;STRING&lt;/span&gt;);
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; $statement&lt;span style="color:#f92672"&gt;-&amp;gt;&lt;/span&gt;&lt;span style="color:#a6e22e"&gt;bindValue&lt;/span&gt;(&lt;span style="color:#e6db74"&gt;&amp;#39;:cancelled_at&amp;#39;&lt;/span&gt;, $payment&lt;span style="color:#f92672"&gt;-&amp;gt;&lt;/span&gt;&lt;span style="color:#a6e22e"&gt;getCancelledAt&lt;/span&gt;()&lt;span style="color:#f92672"&gt;?-&amp;gt;&lt;/span&gt;&lt;span style="color:#a6e22e"&gt;format&lt;/span&gt;(&lt;span style="color:#e6db74"&gt;&amp;#39;Y-m-d H:i:s&amp;#39;&lt;/span&gt;), &lt;span style="color:#a6e22e"&gt;ParameterType&lt;/span&gt;&lt;span style="color:#f92672"&gt;::&lt;/span&gt;&lt;span style="color:#a6e22e"&gt;STRING&lt;/span&gt;);
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; $statement&lt;span style="color:#f92672"&gt;-&amp;gt;&lt;/span&gt;&lt;span style="color:#a6e22e"&gt;bindValue&lt;/span&gt;(&lt;span style="color:#e6db74"&gt;&amp;#39;:version&amp;#39;&lt;/span&gt;, $payment&lt;span style="color:#f92672"&gt;-&amp;gt;&lt;/span&gt;&lt;span style="color:#a6e22e"&gt;getVersion&lt;/span&gt;(), &lt;span style="color:#a6e22e"&gt;ParameterType&lt;/span&gt;&lt;span style="color:#f92672"&gt;::&lt;/span&gt;&lt;span style="color:#a6e22e"&gt;INTEGER&lt;/span&gt;);
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; $statement&lt;span style="color:#f92672"&gt;-&amp;gt;&lt;/span&gt;&lt;span style="color:#a6e22e"&gt;executeStatement&lt;/span&gt;();
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; }
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#75715e"&gt;// ===== REQU√äTES =====
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#75715e"&gt;&lt;/span&gt; 
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#66d9ef"&gt;public&lt;/span&gt; &lt;span style="color:#66d9ef"&gt;function&lt;/span&gt; &lt;span style="color:#a6e22e"&gt;find&lt;/span&gt;(&lt;span style="color:#a6e22e"&gt;PaymentId&lt;/span&gt; $id)&lt;span style="color:#f92672"&gt;:&lt;/span&gt; &lt;span style="color:#f92672"&gt;?&lt;/span&gt;&lt;span style="color:#a6e22e"&gt;PaymentQuery&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; {
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; $sql &lt;span style="color:#f92672"&gt;=&lt;/span&gt; &lt;span style="color:#e6db74"&gt;&amp;lt;&amp;lt;&amp;lt;&amp;#39;&lt;/span&gt;&lt;span style="color:#e6db74"&gt;SQL&lt;/span&gt;&lt;span style="color:#e6db74"&gt;&amp;#39;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#e6db74"&gt; SELECT 
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#e6db74"&gt; uuid,
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#e6db74"&gt; amount,
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#e6db74"&gt; currency,
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#e6db74"&gt; status,
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#e6db74"&gt; authorization_code,
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#e6db74"&gt; created_at,
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#e6db74"&gt; processed_at,
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#e6db74"&gt; cancelled_at,
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#e6db74"&gt; version,
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#e6db74"&gt; metadata
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#e6db74"&gt; FROM payments_query
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#e6db74"&gt; WHERE uuid = :uuid
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#e6db74"&gt; LIMIT 1
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#e6db74"&gt; &lt;/span&gt;&lt;span style="color:#e6db74"&gt;SQL&lt;/span&gt;;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; $statement &lt;span style="color:#f92672"&gt;=&lt;/span&gt; $this&lt;span style="color:#f92672"&gt;-&amp;gt;&lt;/span&gt;&lt;span style="color:#a6e22e"&gt;connection&lt;/span&gt;&lt;span style="color:#f92672"&gt;-&amp;gt;&lt;/span&gt;&lt;span style="color:#a6e22e"&gt;prepare&lt;/span&gt;($sql);
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; $statement&lt;span style="color:#f92672"&gt;-&amp;gt;&lt;/span&gt;&lt;span style="color:#a6e22e"&gt;bindValue&lt;/span&gt;(&lt;span style="color:#e6db74"&gt;&amp;#39;:uuid&amp;#39;&lt;/span&gt;, $id&lt;span style="color:#f92672"&gt;-&amp;gt;&lt;/span&gt;&lt;span style="color:#a6e22e"&gt;toString&lt;/span&gt;(), &lt;span style="color:#a6e22e"&gt;ParameterType&lt;/span&gt;&lt;span style="color:#f92672"&gt;::&lt;/span&gt;&lt;span style="color:#a6e22e"&gt;STRING&lt;/span&gt;);
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; $result &lt;span style="color:#f92672"&gt;=&lt;/span&gt; $statement&lt;span style="color:#f92672"&gt;-&amp;gt;&lt;/span&gt;&lt;span style="color:#a6e22e"&gt;executeQuery&lt;/span&gt;();
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#66d9ef"&gt;if&lt;/span&gt; ($result&lt;span style="color:#f92672"&gt;-&amp;gt;&lt;/span&gt;&lt;span style="color:#a6e22e"&gt;rowCount&lt;/span&gt;() &lt;span style="color:#f92672"&gt;&amp;lt;=&lt;/span&gt; &lt;span style="color:#ae81ff"&gt;0&lt;/span&gt;) {
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#66d9ef"&gt;return&lt;/span&gt; &lt;span style="color:#66d9ef"&gt;null&lt;/span&gt;;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; }
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; $payment &lt;span style="color:#f92672"&gt;=&lt;/span&gt; $result&lt;span style="color:#f92672"&gt;-&amp;gt;&lt;/span&gt;&lt;span style="color:#a6e22e"&gt;fetchAssociative&lt;/span&gt;();
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#66d9ef"&gt;if&lt;/span&gt; (&lt;span style="color:#66d9ef"&gt;false&lt;/span&gt; &lt;span style="color:#f92672"&gt;===&lt;/span&gt; $payment) {
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#66d9ef"&gt;return&lt;/span&gt; &lt;span style="color:#66d9ef"&gt;null&lt;/span&gt;;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; }
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#66d9ef"&gt;return&lt;/span&gt; &lt;span style="color:#66d9ef"&gt;new&lt;/span&gt; &lt;span style="color:#a6e22e"&gt;PaymentQuery&lt;/span&gt;(
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#a6e22e"&gt;id&lt;/span&gt;&lt;span style="color:#f92672"&gt;:&lt;/span&gt; &lt;span style="color:#a6e22e"&gt;PaymentId&lt;/span&gt;&lt;span style="color:#f92672"&gt;::&lt;/span&gt;&lt;span style="color:#a6e22e"&gt;fromString&lt;/span&gt;($payment[&lt;span style="color:#e6db74"&gt;&amp;#39;uuid&amp;#39;&lt;/span&gt;]),
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#a6e22e"&gt;amount&lt;/span&gt;&lt;span style="color:#f92672"&gt;:&lt;/span&gt; &lt;span style="color:#66d9ef"&gt;new&lt;/span&gt; &lt;span style="color:#a6e22e"&gt;Amount&lt;/span&gt;($payment[&lt;span style="color:#e6db74"&gt;&amp;#39;amount&amp;#39;&lt;/span&gt;], &lt;span style="color:#a6e22e"&gt;Currencies&lt;/span&gt;&lt;span style="color:#f92672"&gt;::&lt;/span&gt;&lt;span style="color:#a6e22e"&gt;from&lt;/span&gt;($payment[&lt;span style="color:#e6db74"&gt;&amp;#39;currency&amp;#39;&lt;/span&gt;])),
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#a6e22e"&gt;status&lt;/span&gt;&lt;span style="color:#f92672"&gt;:&lt;/span&gt; &lt;span style="color:#a6e22e"&gt;PaymentStatus&lt;/span&gt;&lt;span style="color:#f92672"&gt;::&lt;/span&gt;&lt;span style="color:#a6e22e"&gt;from&lt;/span&gt;($payment[&lt;span style="color:#e6db74"&gt;&amp;#39;status&amp;#39;&lt;/span&gt;]),
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#a6e22e"&gt;authorizationCode&lt;/span&gt;&lt;span style="color:#f92672"&gt;:&lt;/span&gt; $payment[&lt;span style="color:#e6db74"&gt;&amp;#39;authorization_code&amp;#39;&lt;/span&gt;],
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#a6e22e"&gt;createdAt&lt;/span&gt;&lt;span style="color:#f92672"&gt;:&lt;/span&gt; &lt;span style="color:#66d9ef"&gt;new&lt;/span&gt; &lt;span style="color:#a6e22e"&gt;\DateTimeImmutable&lt;/span&gt;($payment[&lt;span style="color:#e6db74"&gt;&amp;#39;created_at&amp;#39;&lt;/span&gt;]),
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#a6e22e"&gt;processedAt&lt;/span&gt;&lt;span style="color:#f92672"&gt;:&lt;/span&gt; $payment[&lt;span style="color:#e6db74"&gt;&amp;#39;processed_at&amp;#39;&lt;/span&gt;] &lt;span style="color:#f92672"&gt;?&lt;/span&gt; &lt;span style="color:#66d9ef"&gt;new&lt;/span&gt; &lt;span style="color:#a6e22e"&gt;\DateTimeImmutable&lt;/span&gt;($payment[&lt;span style="color:#e6db74"&gt;&amp;#39;processed_at&amp;#39;&lt;/span&gt;]) &lt;span style="color:#f92672"&gt;:&lt;/span&gt; &lt;span style="color:#66d9ef"&gt;null&lt;/span&gt;,
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#a6e22e"&gt;cancelledAt&lt;/span&gt;&lt;span style="color:#f92672"&gt;:&lt;/span&gt; $payment[&lt;span style="color:#e6db74"&gt;&amp;#39;cancelled_at&amp;#39;&lt;/span&gt;] &lt;span style="color:#f92672"&gt;?&lt;/span&gt; &lt;span style="color:#66d9ef"&gt;new&lt;/span&gt; &lt;span style="color:#a6e22e"&gt;\DateTimeImmutable&lt;/span&gt;($payment[&lt;span style="color:#e6db74"&gt;&amp;#39;cancelled_at&amp;#39;&lt;/span&gt;]) &lt;span style="color:#f92672"&gt;:&lt;/span&gt; &lt;span style="color:#66d9ef"&gt;null&lt;/span&gt;,
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#a6e22e"&gt;version&lt;/span&gt;&lt;span style="color:#f92672"&gt;:&lt;/span&gt; $payment[&lt;span style="color:#e6db74"&gt;&amp;#39;version&amp;#39;&lt;/span&gt;],
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#a6e22e"&gt;metadata&lt;/span&gt;&lt;span style="color:#f92672"&gt;:&lt;/span&gt; &lt;span style="color:#a6e22e"&gt;json_decode&lt;/span&gt;($payment[&lt;span style="color:#e6db74"&gt;&amp;#39;metadata&amp;#39;&lt;/span&gt;], &lt;span style="color:#66d9ef"&gt;true&lt;/span&gt;) &lt;span style="color:#f92672"&gt;??&lt;/span&gt; []
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; );
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; }
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#66d9ef"&gt;public&lt;/span&gt; &lt;span style="color:#66d9ef"&gt;function&lt;/span&gt; &lt;span style="color:#a6e22e"&gt;findByOrganization&lt;/span&gt;(&lt;span style="color:#a6e22e"&gt;OrganizationId&lt;/span&gt; $organizationId)&lt;span style="color:#f92672"&gt;:&lt;/span&gt; &lt;span style="color:#66d9ef"&gt;array&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; {
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; $sql &lt;span style="color:#f92672"&gt;=&lt;/span&gt; &lt;span style="color:#e6db74"&gt;&amp;lt;&amp;lt;&amp;lt;&amp;#39;&lt;/span&gt;&lt;span style="color:#e6db74"&gt;SQL&lt;/span&gt;&lt;span style="color:#e6db74"&gt;&amp;#39;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#e6db74"&gt; SELECT 
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#e6db74"&gt; uuid,
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#e6db74"&gt; amount,
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#e6db74"&gt; currency,
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#e6db74"&gt; status,
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#e6db74"&gt; authorization_code,
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#e6db74"&gt; created_at,
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#e6db74"&gt; processed_at,
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#e6db74"&gt; cancelled_at,
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#e6db74"&gt; version,
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#e6db74"&gt; metadata
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#e6db74"&gt; FROM payments_query
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#e6db74"&gt; WHERE organization_id = :organization_id
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#e6db74"&gt; ORDER BY created_at DESC
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#e6db74"&gt; &lt;/span&gt;&lt;span style="color:#e6db74"&gt;SQL&lt;/span&gt;;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; $statement &lt;span style="color:#f92672"&gt;=&lt;/span&gt; $this&lt;span style="color:#f92672"&gt;-&amp;gt;&lt;/span&gt;&lt;span style="color:#a6e22e"&gt;connection&lt;/span&gt;&lt;span style="color:#f92672"&gt;-&amp;gt;&lt;/span&gt;&lt;span style="color:#a6e22e"&gt;prepare&lt;/span&gt;($sql);
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; $statement&lt;span style="color:#f92672"&gt;-&amp;gt;&lt;/span&gt;&lt;span style="color:#a6e22e"&gt;bindValue&lt;/span&gt;(&lt;span style="color:#e6db74"&gt;&amp;#39;:organization_id&amp;#39;&lt;/span&gt;, $organizationId&lt;span style="color:#f92672"&gt;-&amp;gt;&lt;/span&gt;&lt;span style="color:#a6e22e"&gt;toString&lt;/span&gt;(), &lt;span style="color:#a6e22e"&gt;ParameterType&lt;/span&gt;&lt;span style="color:#f92672"&gt;::&lt;/span&gt;&lt;span style="color:#a6e22e"&gt;STRING&lt;/span&gt;);
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; $result &lt;span style="color:#f92672"&gt;=&lt;/span&gt; $statement&lt;span style="color:#f92672"&gt;-&amp;gt;&lt;/span&gt;&lt;span style="color:#a6e22e"&gt;executeQuery&lt;/span&gt;();
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; $payments &lt;span style="color:#f92672"&gt;=&lt;/span&gt; [];
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#66d9ef"&gt;while&lt;/span&gt; ($payment &lt;span style="color:#f92672"&gt;=&lt;/span&gt; $result&lt;span style="color:#f92672"&gt;-&amp;gt;&lt;/span&gt;&lt;span style="color:#a6e22e"&gt;fetchAssociative&lt;/span&gt;()) {
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; $payments[] &lt;span style="color:#f92672"&gt;=&lt;/span&gt; &lt;span style="color:#66d9ef"&gt;new&lt;/span&gt; &lt;span style="color:#a6e22e"&gt;PaymentQuery&lt;/span&gt;(
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#a6e22e"&gt;id&lt;/span&gt;&lt;span style="color:#f92672"&gt;:&lt;/span&gt; &lt;span style="color:#a6e22e"&gt;PaymentId&lt;/span&gt;&lt;span style="color:#f92672"&gt;::&lt;/span&gt;&lt;span style="color:#a6e22e"&gt;fromString&lt;/span&gt;($payment[&lt;span style="color:#e6db74"&gt;&amp;#39;uuid&amp;#39;&lt;/span&gt;]),
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#a6e22e"&gt;amount&lt;/span&gt;&lt;span style="color:#f92672"&gt;:&lt;/span&gt; &lt;span style="color:#66d9ef"&gt;new&lt;/span&gt; &lt;span style="color:#a6e22e"&gt;Amount&lt;/span&gt;($payment[&lt;span style="color:#e6db74"&gt;&amp;#39;amount&amp;#39;&lt;/span&gt;], &lt;span style="color:#a6e22e"&gt;Currencies&lt;/span&gt;&lt;span style="color:#f92672"&gt;::&lt;/span&gt;&lt;span style="color:#a6e22e"&gt;from&lt;/span&gt;($payment[&lt;span style="color:#e6db74"&gt;&amp;#39;currency&amp;#39;&lt;/span&gt;])),
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#a6e22e"&gt;status&lt;/span&gt;&lt;span style="color:#f92672"&gt;:&lt;/span&gt; &lt;span style="color:#a6e22e"&gt;PaymentStatus&lt;/span&gt;&lt;span style="color:#f92672"&gt;::&lt;/span&gt;&lt;span style="color:#a6e22e"&gt;from&lt;/span&gt;($payment[&lt;span style="color:#e6db74"&gt;&amp;#39;status&amp;#39;&lt;/span&gt;]),
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#a6e22e"&gt;authorizationCode&lt;/span&gt;&lt;span style="color:#f92672"&gt;:&lt;/span&gt; $payment[&lt;span style="color:#e6db74"&gt;&amp;#39;authorization_code&amp;#39;&lt;/span&gt;],
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#a6e22e"&gt;createdAt&lt;/span&gt;&lt;span style="color:#f92672"&gt;:&lt;/span&gt; &lt;span style="color:#66d9ef"&gt;new&lt;/span&gt; &lt;span style="color:#a6e22e"&gt;\DateTimeImmutable&lt;/span&gt;($payment[&lt;span style="color:#e6db74"&gt;&amp;#39;created_at&amp;#39;&lt;/span&gt;]),
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#a6e22e"&gt;processedAt&lt;/span&gt;&lt;span style="color:#f92672"&gt;:&lt;/span&gt; $payment[&lt;span style="color:#e6db74"&gt;&amp;#39;processed_at&amp;#39;&lt;/span&gt;] &lt;span style="color:#f92672"&gt;?&lt;/span&gt; &lt;span style="color:#66d9ef"&gt;new&lt;/span&gt; &lt;span style="color:#a6e22e"&gt;\DateTimeImmutable&lt;/span&gt;($payment[&lt;span style="color:#e6db74"&gt;&amp;#39;processed_at&amp;#39;&lt;/span&gt;]) &lt;span style="color:#f92672"&gt;:&lt;/span&gt; &lt;span style="color:#66d9ef"&gt;null&lt;/span&gt;,
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#a6e22e"&gt;cancelledAt&lt;/span&gt;&lt;span style="color:#f92672"&gt;:&lt;/span&gt; $payment[&lt;span style="color:#e6db74"&gt;&amp;#39;cancelled_at&amp;#39;&lt;/span&gt;] &lt;span style="color:#f92672"&gt;?&lt;/span&gt; &lt;span style="color:#66d9ef"&gt;new&lt;/span&gt; &lt;span style="color:#a6e22e"&gt;\DateTimeImmutable&lt;/span&gt;($payment[&lt;span style="color:#e6db74"&gt;&amp;#39;cancelled_at&amp;#39;&lt;/span&gt;]) &lt;span style="color:#f92672"&gt;:&lt;/span&gt; &lt;span style="color:#66d9ef"&gt;null&lt;/span&gt;,
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#a6e22e"&gt;version&lt;/span&gt;&lt;span style="color:#f92672"&gt;:&lt;/span&gt; $payment[&lt;span style="color:#e6db74"&gt;&amp;#39;version&amp;#39;&lt;/span&gt;],
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#a6e22e"&gt;metadata&lt;/span&gt;&lt;span style="color:#f92672"&gt;:&lt;/span&gt; &lt;span style="color:#a6e22e"&gt;json_decode&lt;/span&gt;($payment[&lt;span style="color:#e6db74"&gt;&amp;#39;metadata&amp;#39;&lt;/span&gt;], &lt;span style="color:#66d9ef"&gt;true&lt;/span&gt;) &lt;span style="color:#f92672"&gt;??&lt;/span&gt; []
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; );
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; }
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#66d9ef"&gt;return&lt;/span&gt; $payments;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; }
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h3 id="3-stockage-sql---approche-cqrs"&gt;3. Stockage SQL - Approche CQRS&lt;/h3&gt;
&lt;h4 id="exemple--repository-de-paiement-cqrs"&gt;Exemple : Repository de Paiement CQRS&lt;/h4&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"&gt;&lt;code class="language-php" data-lang="php"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#75715e"&gt;// Repository de Paiement CQRS - Projet Gyroscops Cloud
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#75715e"&gt;&lt;/span&gt;&lt;span style="color:#66d9ef"&gt;final&lt;/span&gt; &lt;span style="color:#66d9ef"&gt;class&lt;/span&gt; &lt;span style="color:#a6e22e"&gt;DatabasePaymentCQRSRepository&lt;/span&gt; &lt;span style="color:#66d9ef"&gt;implements&lt;/span&gt; &lt;span style="color:#a6e22e"&gt;PaymentCQRSRepositoryInterface&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;{
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#66d9ef"&gt;public&lt;/span&gt; &lt;span style="color:#66d9ef"&gt;function&lt;/span&gt; &lt;span style="color:#a6e22e"&gt;__construct&lt;/span&gt;(
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#66d9ef"&gt;private&lt;/span&gt; &lt;span style="color:#a6e22e"&gt;Connection&lt;/span&gt; $connection,
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#66d9ef"&gt;private&lt;/span&gt; &lt;span style="color:#a6e22e"&gt;EventBusInterface&lt;/span&gt; $eventBus,
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; ) {
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; }
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#75715e"&gt;// ===== COMMANDES =====
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#75715e"&gt;&lt;/span&gt; 
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#66d9ef"&gt;public&lt;/span&gt; &lt;span style="color:#66d9ef"&gt;function&lt;/span&gt; &lt;span style="color:#a6e22e"&gt;save&lt;/span&gt;(&lt;span style="color:#a6e22e"&gt;PaymentCommand&lt;/span&gt; $payment)&lt;span style="color:#f92672"&gt;:&lt;/span&gt; &lt;span style="color:#a6e22e"&gt;void&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; {
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; $this&lt;span style="color:#f92672"&gt;-&amp;gt;&lt;/span&gt;&lt;span style="color:#a6e22e"&gt;connection&lt;/span&gt;&lt;span style="color:#f92672"&gt;-&amp;gt;&lt;/span&gt;&lt;span style="color:#a6e22e"&gt;beginTransaction&lt;/span&gt;();
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#66d9ef"&gt;try&lt;/span&gt; {
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; $events &lt;span style="color:#f92672"&gt;=&lt;/span&gt; $payment&lt;span style="color:#f92672"&gt;-&amp;gt;&lt;/span&gt;&lt;span style="color:#a6e22e"&gt;releaseEvents&lt;/span&gt;();
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#75715e"&gt;// Sauvegarder l&amp;#39;√©tat
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#75715e"&gt;&lt;/span&gt; $this&lt;span style="color:#f92672"&gt;-&amp;gt;&lt;/span&gt;&lt;span style="color:#a6e22e"&gt;savePaymentCommand&lt;/span&gt;($payment);
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#75715e"&gt;// √âmettre les √©v√©nements
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#75715e"&gt;&lt;/span&gt; &lt;span style="color:#66d9ef"&gt;foreach&lt;/span&gt; ($events &lt;span style="color:#66d9ef"&gt;as&lt;/span&gt; $event) {
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; $this&lt;span style="color:#f92672"&gt;-&amp;gt;&lt;/span&gt;&lt;span style="color:#a6e22e"&gt;eventBus&lt;/span&gt;&lt;span style="color:#f92672"&gt;-&amp;gt;&lt;/span&gt;&lt;span style="color:#a6e22e"&gt;emit&lt;/span&gt;($event);
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; }
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; $this&lt;span style="color:#f92672"&gt;-&amp;gt;&lt;/span&gt;&lt;span style="color:#a6e22e"&gt;connection&lt;/span&gt;&lt;span style="color:#f92672"&gt;-&amp;gt;&lt;/span&gt;&lt;span style="color:#a6e22e"&gt;commit&lt;/span&gt;();
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; } &lt;span style="color:#66d9ef"&gt;catch&lt;/span&gt; (&lt;span style="color:#a6e22e"&gt;\Throwable&lt;/span&gt; $exception) {
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; $this&lt;span style="color:#f92672"&gt;-&amp;gt;&lt;/span&gt;&lt;span style="color:#a6e22e"&gt;connection&lt;/span&gt;&lt;span style="color:#f92672"&gt;-&amp;gt;&lt;/span&gt;&lt;span style="color:#a6e22e"&gt;rollBack&lt;/span&gt;();
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#66d9ef"&gt;throw&lt;/span&gt; $exception;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; }
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; }
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#66d9ef"&gt;private&lt;/span&gt; &lt;span style="color:#66d9ef"&gt;function&lt;/span&gt; &lt;span style="color:#a6e22e"&gt;savePaymentCommand&lt;/span&gt;(&lt;span style="color:#a6e22e"&gt;PaymentCommand&lt;/span&gt; $payment)&lt;span style="color:#f92672"&gt;:&lt;/span&gt; &lt;span style="color:#a6e22e"&gt;void&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; {
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; $sql &lt;span style="color:#f92672"&gt;=&lt;/span&gt; &lt;span style="color:#e6db74"&gt;&amp;lt;&amp;lt;&amp;lt;&amp;#39;&lt;/span&gt;&lt;span style="color:#e6db74"&gt;SQL&lt;/span&gt;&lt;span style="color:#e6db74"&gt;&amp;#39;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#e6db74"&gt; INSERT INTO payments_command (
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#e6db74"&gt; uuid, amount, currency, status, authorization_code,
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#e6db74"&gt; created_at, processed_at, cancelled_at, version
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#e6db74"&gt; ) VALUES (
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#e6db74"&gt; :uuid, :amount, :currency, :status, :authorization_code,
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#e6db74"&gt; :created_at, :processed_at, :cancelled_at, :version
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#e6db74"&gt; ) ON DUPLICATE KEY UPDATE
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#e6db74"&gt; amount = VALUES(amount),
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#e6db74"&gt; currency = VALUES(currency),
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#e6db74"&gt; status = VALUES(status),
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#e6db74"&gt; authorization_code = VALUES(authorization_code),
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#e6db74"&gt; processed_at = VALUES(processed_at),
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#e6db74"&gt; cancelled_at = VALUES(cancelled_at),
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#e6db74"&gt; version = VALUES(version)
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#e6db74"&gt; &lt;/span&gt;&lt;span style="color:#e6db74"&gt;SQL&lt;/span&gt;;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; $statement &lt;span style="color:#f92672"&gt;=&lt;/span&gt; $this&lt;span style="color:#f92672"&gt;-&amp;gt;&lt;/span&gt;&lt;span style="color:#a6e22e"&gt;connection&lt;/span&gt;&lt;span style="color:#f92672"&gt;-&amp;gt;&lt;/span&gt;&lt;span style="color:#a6e22e"&gt;prepare&lt;/span&gt;($sql);
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; $statement&lt;span style="color:#f92672"&gt;-&amp;gt;&lt;/span&gt;&lt;span style="color:#a6e22e"&gt;bindValue&lt;/span&gt;(&lt;span style="color:#e6db74"&gt;&amp;#39;:uuid&amp;#39;&lt;/span&gt;, $payment&lt;span style="color:#f92672"&gt;-&amp;gt;&lt;/span&gt;&lt;span style="color:#a6e22e"&gt;getId&lt;/span&gt;()&lt;span style="color:#f92672"&gt;-&amp;gt;&lt;/span&gt;&lt;span style="color:#a6e22e"&gt;toString&lt;/span&gt;(), &lt;span style="color:#a6e22e"&gt;ParameterType&lt;/span&gt;&lt;span style="color:#f92672"&gt;::&lt;/span&gt;&lt;span style="color:#a6e22e"&gt;STRING&lt;/span&gt;);
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; $statement&lt;span style="color:#f92672"&gt;-&amp;gt;&lt;/span&gt;&lt;span style="color:#a6e22e"&gt;bindValue&lt;/span&gt;(&lt;span style="color:#e6db74"&gt;&amp;#39;:amount&amp;#39;&lt;/span&gt;, $payment&lt;span style="color:#f92672"&gt;-&amp;gt;&lt;/span&gt;&lt;span style="color:#a6e22e"&gt;getAmount&lt;/span&gt;()&lt;span style="color:#f92672"&gt;-&amp;gt;&lt;/span&gt;&lt;span style="color:#a6e22e"&gt;getValue&lt;/span&gt;(), &lt;span style="color:#a6e22e"&gt;ParameterType&lt;/span&gt;&lt;span style="color:#f92672"&gt;::&lt;/span&gt;&lt;span style="color:#a6e22e"&gt;STRING&lt;/span&gt;);
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; $statement&lt;span style="color:#f92672"&gt;-&amp;gt;&lt;/span&gt;&lt;span style="color:#a6e22e"&gt;bindValue&lt;/span&gt;(&lt;span style="color:#e6db74"&gt;&amp;#39;:currency&amp;#39;&lt;/span&gt;, $payment&lt;span style="color:#f92672"&gt;-&amp;gt;&lt;/span&gt;&lt;span style="color:#a6e22e"&gt;getAmount&lt;/span&gt;()&lt;span style="color:#f92672"&gt;-&amp;gt;&lt;/span&gt;&lt;span style="color:#a6e22e"&gt;getCurrency&lt;/span&gt;()&lt;span style="color:#f92672"&gt;-&amp;gt;&lt;/span&gt;&lt;span style="color:#a6e22e"&gt;value&lt;/span&gt;, &lt;span style="color:#a6e22e"&gt;ParameterType&lt;/span&gt;&lt;span style="color:#f92672"&gt;::&lt;/span&gt;&lt;span style="color:#a6e22e"&gt;STRING&lt;/span&gt;);
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; $statement&lt;span style="color:#f92672"&gt;-&amp;gt;&lt;/span&gt;&lt;span style="color:#a6e22e"&gt;bindValue&lt;/span&gt;(&lt;span style="color:#e6db74"&gt;&amp;#39;:status&amp;#39;&lt;/span&gt;, $payment&lt;span style="color:#f92672"&gt;-&amp;gt;&lt;/span&gt;&lt;span style="color:#a6e22e"&gt;getStatus&lt;/span&gt;()&lt;span style="color:#f92672"&gt;-&amp;gt;&lt;/span&gt;&lt;span style="color:#a6e22e"&gt;value&lt;/span&gt;, &lt;span style="color:#a6e22e"&gt;ParameterType&lt;/span&gt;&lt;span style="color:#f92672"&gt;::&lt;/span&gt;&lt;span style="color:#a6e22e"&gt;STRING&lt;/span&gt;);
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; $statement&lt;span style="color:#f92672"&gt;-&amp;gt;&lt;/span&gt;&lt;span style="color:#a6e22e"&gt;bindValue&lt;/span&gt;(&lt;span style="color:#e6db74"&gt;&amp;#39;:authorization_code&amp;#39;&lt;/span&gt;, $payment&lt;span style="color:#f92672"&gt;-&amp;gt;&lt;/span&gt;&lt;span style="color:#a6e22e"&gt;getAuthorizationCode&lt;/span&gt;(), &lt;span style="color:#a6e22e"&gt;ParameterType&lt;/span&gt;&lt;span style="color:#f92672"&gt;::&lt;/span&gt;&lt;span style="color:#a6e22e"&gt;STRING&lt;/span&gt;);
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; $statement&lt;span style="color:#f92672"&gt;-&amp;gt;&lt;/span&gt;&lt;span style="color:#a6e22e"&gt;bindValue&lt;/span&gt;(&lt;span style="color:#e6db74"&gt;&amp;#39;:created_at&amp;#39;&lt;/span&gt;, $payment&lt;span style="color:#f92672"&gt;-&amp;gt;&lt;/span&gt;&lt;span style="color:#a6e22e"&gt;getCreatedAt&lt;/span&gt;()&lt;span style="color:#f92672"&gt;-&amp;gt;&lt;/span&gt;&lt;span style="color:#a6e22e"&gt;format&lt;/span&gt;(&lt;span style="color:#e6db74"&gt;&amp;#39;Y-m-d H:i:s&amp;#39;&lt;/span&gt;), &lt;span style="color:#a6e22e"&gt;ParameterType&lt;/span&gt;&lt;span style="color:#f92672"&gt;::&lt;/span&gt;&lt;span style="color:#a6e22e"&gt;STRING&lt;/span&gt;);
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; $statement&lt;span style="color:#f92672"&gt;-&amp;gt;&lt;/span&gt;&lt;span style="color:#a6e22e"&gt;bindValue&lt;/span&gt;(&lt;span style="color:#e6db74"&gt;&amp;#39;:processed_at&amp;#39;&lt;/span&gt;, $payment&lt;span style="color:#f92672"&gt;-&amp;gt;&lt;/span&gt;&lt;span style="color:#a6e22e"&gt;getProcessedAt&lt;/span&gt;()&lt;span style="color:#f92672"&gt;?-&amp;gt;&lt;/span&gt;&lt;span style="color:#a6e22e"&gt;format&lt;/span&gt;(&lt;span style="color:#e6db74"&gt;&amp;#39;Y-m-d H:i:s&amp;#39;&lt;/span&gt;), &lt;span style="color:#a6e22e"&gt;ParameterType&lt;/span&gt;&lt;span style="color:#f92672"&gt;::&lt;/span&gt;&lt;span style="color:#a6e22e"&gt;STRING&lt;/span&gt;);
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; $statement&lt;span style="color:#f92672"&gt;-&amp;gt;&lt;/span&gt;&lt;span style="color:#a6e22e"&gt;bindValue&lt;/span&gt;(&lt;span style="color:#e6db74"&gt;&amp;#39;:cancelled_at&amp;#39;&lt;/span&gt;, $payment&lt;span style="color:#f92672"&gt;-&amp;gt;&lt;/span&gt;&lt;span style="color:#a6e22e"&gt;getCancelledAt&lt;/span&gt;()&lt;span style="color:#f92672"&gt;?-&amp;gt;&lt;/span&gt;&lt;span style="color:#a6e22e"&gt;format&lt;/span&gt;(&lt;span style="color:#e6db74"&gt;&amp;#39;Y-m-d H:i:s&amp;#39;&lt;/span&gt;), &lt;span style="color:#a6e22e"&gt;ParameterType&lt;/span&gt;&lt;span style="color:#f92672"&gt;::&lt;/span&gt;&lt;span style="color:#a6e22e"&gt;STRING&lt;/span&gt;);
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; $statement&lt;span style="color:#f92672"&gt;-&amp;gt;&lt;/span&gt;&lt;span style="color:#a6e22e"&gt;bindValue&lt;/span&gt;(&lt;span style="color:#e6db74"&gt;&amp;#39;:version&amp;#39;&lt;/span&gt;, $payment&lt;span style="color:#f92672"&gt;-&amp;gt;&lt;/span&gt;&lt;span style="color:#a6e22e"&gt;getVersion&lt;/span&gt;(), &lt;span style="color:#a6e22e"&gt;ParameterType&lt;/span&gt;&lt;span style="color:#f92672"&gt;::&lt;/span&gt;&lt;span style="color:#a6e22e"&gt;INTEGER&lt;/span&gt;);
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; $statement&lt;span style="color:#f92672"&gt;-&amp;gt;&lt;/span&gt;&lt;span style="color:#a6e22e"&gt;executeStatement&lt;/span&gt;();
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; }
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#75715e"&gt;// ===== REQU√äTES =====
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#75715e"&gt;&lt;/span&gt; 
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#66d9ef"&gt;public&lt;/span&gt; &lt;span style="color:#66d9ef"&gt;function&lt;/span&gt; &lt;span style="color:#a6e22e"&gt;find&lt;/span&gt;(&lt;span style="color:#a6e22e"&gt;PaymentId&lt;/span&gt; $id)&lt;span style="color:#f92672"&gt;:&lt;/span&gt; &lt;span style="color:#f92672"&gt;?&lt;/span&gt;&lt;span style="color:#a6e22e"&gt;PaymentQuery&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; {
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; $sql &lt;span style="color:#f92672"&gt;=&lt;/span&gt; &lt;span style="color:#e6db74"&gt;&amp;lt;&amp;lt;&amp;lt;&amp;#39;&lt;/span&gt;&lt;span style="color:#e6db74"&gt;SQL&lt;/span&gt;&lt;span style="color:#e6db74"&gt;&amp;#39;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#e6db74"&gt; SELECT 
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#e6db74"&gt; uuid,
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#e6db74"&gt; amount,
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#e6db74"&gt; currency,
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#e6db74"&gt; status,
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#e6db74"&gt; authorization_code,
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#e6db74"&gt; created_at,
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#e6db74"&gt; processed_at,
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#e6db74"&gt; cancelled_at,
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#e6db74"&gt; version,
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#e6db74"&gt; metadata
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#e6db74"&gt; FROM payments_query
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#e6db74"&gt; WHERE uuid = :uuid
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#e6db74"&gt; LIMIT 1
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#e6db74"&gt; &lt;/span&gt;&lt;span style="color:#e6db74"&gt;SQL&lt;/span&gt;;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; $statement &lt;span style="color:#f92672"&gt;=&lt;/span&gt; $this&lt;span style="color:#f92672"&gt;-&amp;gt;&lt;/span&gt;&lt;span style="color:#a6e22e"&gt;connection&lt;/span&gt;&lt;span style="color:#f92672"&gt;-&amp;gt;&lt;/span&gt;&lt;span style="color:#a6e22e"&gt;prepare&lt;/span&gt;($sql);
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; $statement&lt;span style="color:#f92672"&gt;-&amp;gt;&lt;/span&gt;&lt;span style="color:#a6e22e"&gt;bindValue&lt;/span&gt;(&lt;span style="color:#e6db74"&gt;&amp;#39;:uuid&amp;#39;&lt;/span&gt;, $id&lt;span style="color:#f92672"&gt;-&amp;gt;&lt;/span&gt;&lt;span style="color:#a6e22e"&gt;toString&lt;/span&gt;(), &lt;span style="color:#a6e22e"&gt;ParameterType&lt;/span&gt;&lt;span style="color:#f92672"&gt;::&lt;/span&gt;&lt;span style="color:#a6e22e"&gt;STRING&lt;/span&gt;);
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; $result &lt;span style="color:#f92672"&gt;=&lt;/span&gt; $statement&lt;span style="color:#f92672"&gt;-&amp;gt;&lt;/span&gt;&lt;span style="color:#a6e22e"&gt;executeQuery&lt;/span&gt;();
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#66d9ef"&gt;if&lt;/span&gt; ($result&lt;span style="color:#f92672"&gt;-&amp;gt;&lt;/span&gt;&lt;span style="color:#a6e22e"&gt;rowCount&lt;/span&gt;() &lt;span style="color:#f92672"&gt;&amp;lt;=&lt;/span&gt; &lt;span style="color:#ae81ff"&gt;0&lt;/span&gt;) {
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#66d9ef"&gt;return&lt;/span&gt; &lt;span style="color:#66d9ef"&gt;null&lt;/span&gt;;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; }
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; $payment &lt;span style="color:#f92672"&gt;=&lt;/span&gt; $result&lt;span style="color:#f92672"&gt;-&amp;gt;&lt;/span&gt;&lt;span style="color:#a6e22e"&gt;fetchAssociative&lt;/span&gt;();
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#66d9ef"&gt;if&lt;/span&gt; (&lt;span style="color:#66d9ef"&gt;false&lt;/span&gt; &lt;span style="color:#f92672"&gt;===&lt;/span&gt; $payment) {
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#66d9ef"&gt;return&lt;/span&gt; &lt;span style="color:#66d9ef"&gt;null&lt;/span&gt;;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; }
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#66d9ef"&gt;return&lt;/span&gt; &lt;span style="color:#66d9ef"&gt;new&lt;/span&gt; &lt;span style="color:#a6e22e"&gt;PaymentQuery&lt;/span&gt;(
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#a6e22e"&gt;id&lt;/span&gt;&lt;span style="color:#f92672"&gt;:&lt;/span&gt; &lt;span style="color:#a6e22e"&gt;PaymentId&lt;/span&gt;&lt;span style="color:#f92672"&gt;::&lt;/span&gt;&lt;span style="color:#a6e22e"&gt;fromString&lt;/span&gt;($payment[&lt;span style="color:#e6db74"&gt;&amp;#39;uuid&amp;#39;&lt;/span&gt;]),
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#a6e22e"&gt;amount&lt;/span&gt;&lt;span style="color:#f92672"&gt;:&lt;/span&gt; &lt;span style="color:#66d9ef"&gt;new&lt;/span&gt; &lt;span style="color:#a6e22e"&gt;Amount&lt;/span&gt;($payment[&lt;span style="color:#e6db74"&gt;&amp;#39;amount&amp;#39;&lt;/span&gt;], &lt;span style="color:#a6e22e"&gt;Currencies&lt;/span&gt;&lt;span style="color:#f92672"&gt;::&lt;/span&gt;&lt;span style="color:#a6e22e"&gt;from&lt;/span&gt;($payment[&lt;span style="color:#e6db74"&gt;&amp;#39;currency&amp;#39;&lt;/span&gt;])),
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#a6e22e"&gt;status&lt;/span&gt;&lt;span style="color:#f92672"&gt;:&lt;/span&gt; &lt;span style="color:#a6e22e"&gt;PaymentStatus&lt;/span&gt;&lt;span style="color:#f92672"&gt;::&lt;/span&gt;&lt;span style="color:#a6e22e"&gt;from&lt;/span&gt;($payment[&lt;span style="color:#e6db74"&gt;&amp;#39;status&amp;#39;&lt;/span&gt;]),
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#a6e22e"&gt;authorizationCode&lt;/span&gt;&lt;span style="color:#f92672"&gt;:&lt;/span&gt; $payment[&lt;span style="color:#e6db74"&gt;&amp;#39;authorization_code&amp;#39;&lt;/span&gt;],
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#a6e22e"&gt;createdAt&lt;/span&gt;&lt;span style="color:#f92672"&gt;:&lt;/span&gt; &lt;span style="color:#66d9ef"&gt;new&lt;/span&gt; &lt;span style="color:#a6e22e"&gt;\DateTimeImmutable&lt;/span&gt;($payment[&lt;span style="color:#e6db74"&gt;&amp;#39;created_at&amp;#39;&lt;/span&gt;]),
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#a6e22e"&gt;processedAt&lt;/span&gt;&lt;span style="color:#f92672"&gt;:&lt;/span&gt; $payment[&lt;span style="color:#e6db74"&gt;&amp;#39;processed_at&amp;#39;&lt;/span&gt;] &lt;span style="color:#f92672"&gt;?&lt;/span&gt; &lt;span style="color:#66d9ef"&gt;new&lt;/span&gt; &lt;span style="color:#a6e22e"&gt;\DateTimeImmutable&lt;/span&gt;($payment[&lt;span style="color:#e6db74"&gt;&amp;#39;processed_at&amp;#39;&lt;/span&gt;]) &lt;span style="color:#f92672"&gt;:&lt;/span&gt; &lt;span style="color:#66d9ef"&gt;null&lt;/span&gt;,
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#a6e22e"&gt;cancelledAt&lt;/span&gt;&lt;span style="color:#f92672"&gt;:&lt;/span&gt; $payment[&lt;span style="color:#e6db74"&gt;&amp;#39;cancelled_at&amp;#39;&lt;/span&gt;] &lt;span style="color:#f92672"&gt;?&lt;/span&gt; &lt;span style="color:#66d9ef"&gt;new&lt;/span&gt; &lt;span style="color:#a6e22e"&gt;\DateTimeImmutable&lt;/span&gt;($payment[&lt;span style="color:#e6db74"&gt;&amp;#39;cancelled_at&amp;#39;&lt;/span&gt;]) &lt;span style="color:#f92672"&gt;:&lt;/span&gt; &lt;span style="color:#66d9ef"&gt;null&lt;/span&gt;,
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#a6e22e"&gt;version&lt;/span&gt;&lt;span style="color:#f92672"&gt;:&lt;/span&gt; $payment[&lt;span style="color:#e6db74"&gt;&amp;#39;version&amp;#39;&lt;/span&gt;],
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#a6e22e"&gt;metadata&lt;/span&gt;&lt;span style="color:#f92672"&gt;:&lt;/span&gt; &lt;span style="color:#a6e22e"&gt;json_decode&lt;/span&gt;($payment[&lt;span style="color:#e6db74"&gt;&amp;#39;metadata&amp;#39;&lt;/span&gt;], &lt;span style="color:#66d9ef"&gt;true&lt;/span&gt;) &lt;span style="color:#f92672"&gt;??&lt;/span&gt; []
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; );
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; }
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#66d9ef"&gt;public&lt;/span&gt; &lt;span style="color:#66d9ef"&gt;function&lt;/span&gt; &lt;span style="color:#a6e22e"&gt;findByOrganization&lt;/span&gt;(&lt;span style="color:#a6e22e"&gt;OrganizationId&lt;/span&gt; $organizationId)&lt;span style="color:#f92672"&gt;:&lt;/span&gt; &lt;span style="color:#66d9ef"&gt;array&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; {
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; $sql &lt;span style="color:#f92672"&gt;=&lt;/span&gt; &lt;span style="color:#e6db74"&gt;&amp;lt;&amp;lt;&amp;lt;&amp;#39;&lt;/span&gt;&lt;span style="color:#e6db74"&gt;SQL&lt;/span&gt;&lt;span style="color:#e6db74"&gt;&amp;#39;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#e6db74"&gt; SELECT 
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#e6db74"&gt; uuid,
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#e6db74"&gt; amount,
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#e6db74"&gt; currency,
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#e6db74"&gt; status,
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#e6db74"&gt; authorization_code,
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#e6db74"&gt; created_at,
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#e6db74"&gt; processed_at,
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#e6db74"&gt; cancelled_at,
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#e6db74"&gt; version,
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#e6db74"&gt; metadata
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#e6db74"&gt; FROM payments_query
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#e6db74"&gt; WHERE organization_id = :organization_id
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#e6db74"&gt; ORDER BY created_at DESC
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#e6db74"&gt; &lt;/span&gt;&lt;span style="color:#e6db74"&gt;SQL&lt;/span&gt;;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; $statement &lt;span style="color:#f92672"&gt;=&lt;/span&gt; $this&lt;span style="color:#f92672"&gt;-&amp;gt;&lt;/span&gt;&lt;span style="color:#a6e22e"&gt;connection&lt;/span&gt;&lt;span style="color:#f92672"&gt;-&amp;gt;&lt;/span&gt;&lt;span style="color:#a6e22e"&gt;prepare&lt;/span&gt;($sql);
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; $statement&lt;span style="color:#f92672"&gt;-&amp;gt;&lt;/span&gt;&lt;span style="color:#a6e22e"&gt;bindValue&lt;/span&gt;(&lt;span style="color:#e6db74"&gt;&amp;#39;:organization_id&amp;#39;&lt;/span&gt;, $organizationId&lt;span style="color:#f92672"&gt;-&amp;gt;&lt;/span&gt;&lt;span style="color:#a6e22e"&gt;toString&lt;/span&gt;(), &lt;span style="color:#a6e22e"&gt;ParameterType&lt;/span&gt;&lt;span style="color:#f92672"&gt;::&lt;/span&gt;&lt;span style="color:#a6e22e"&gt;STRING&lt;/span&gt;);
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; $result &lt;span style="color:#f92672"&gt;=&lt;/span&gt; $statement&lt;span style="color:#f92672"&gt;-&amp;gt;&lt;/span&gt;&lt;span style="color:#a6e22e"&gt;executeQuery&lt;/span&gt;();
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; $payments &lt;span style="color:#f92672"&gt;=&lt;/span&gt; [];
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#66d9ef"&gt;while&lt;/span&gt; ($payment &lt;span style="color:#f92672"&gt;=&lt;/span&gt; $result&lt;span style="color:#f92672"&gt;-&amp;gt;&lt;/span&gt;&lt;span style="color:#a6e22e"&gt;fetchAssociative&lt;/span&gt;()) {
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; $payments[] &lt;span style="color:#f92672"&gt;=&lt;/span&gt; &lt;span style="color:#66d9ef"&gt;new&lt;/span&gt; &lt;span style="color:#a6e22e"&gt;PaymentQuery&lt;/span&gt;(
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#a6e22e"&gt;id&lt;/span&gt;&lt;span style="color:#f92672"&gt;:&lt;/span&gt; &lt;span style="color:#a6e22e"&gt;PaymentId&lt;/span&gt;&lt;span style="color:#f92672"&gt;::&lt;/span&gt;&lt;span style="color:#a6e22e"&gt;fromString&lt;/span&gt;($payment[&lt;span style="color:#e6db74"&gt;&amp;#39;uuid&amp;#39;&lt;/span&gt;]),
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#a6e22e"&gt;amount&lt;/span&gt;&lt;span style="color:#f92672"&gt;:&lt;/span&gt; &lt;span style="color:#66d9ef"&gt;new&lt;/span&gt; &lt;span style="color:#a6e22e"&gt;Amount&lt;/span&gt;($payment[&lt;span style="color:#e6db74"&gt;&amp;#39;amount&amp;#39;&lt;/span&gt;], &lt;span style="color:#a6e22e"&gt;Currencies&lt;/span&gt;&lt;span style="color:#f92672"&gt;::&lt;/span&gt;&lt;span style="color:#a6e22e"&gt;from&lt;/span&gt;($payment[&lt;span style="color:#e6db74"&gt;&amp;#39;currency&amp;#39;&lt;/span&gt;])),
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#a6e22e"&gt;status&lt;/span&gt;&lt;span style="color:#f92672"&gt;:&lt;/span&gt; &lt;span style="color:#a6e22e"&gt;PaymentStatus&lt;/span&gt;&lt;span style="color:#f92672"&gt;::&lt;/span&gt;&lt;span style="color:#a6e22e"&gt;from&lt;/span&gt;($payment[&lt;span style="color:#e6db74"&gt;&amp;#39;status&amp;#39;&lt;/span&gt;]),
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#a6e22e"&gt;authorizationCode&lt;/span&gt;&lt;span style="color:#f92672"&gt;:&lt;/span&gt; $payment[&lt;span style="color:#e6db74"&gt;&amp;#39;authorization_code&amp;#39;&lt;/span&gt;],
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#a6e22e"&gt;createdAt&lt;/span&gt;&lt;span style="color:#f92672"&gt;:&lt;/span&gt; &lt;span style="color:#66d9ef"&gt;new&lt;/span&gt; &lt;span style="color:#a6e22e"&gt;\DateTimeImmutable&lt;/span&gt;($payment[&lt;span style="color:#e6db74"&gt;&amp;#39;created_at&amp;#39;&lt;/span&gt;]),
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#a6e22e"&gt;processedAt&lt;/span&gt;&lt;span style="color:#f92672"&gt;:&lt;/span&gt; $payment[&lt;span style="color:#e6db74"&gt;&amp;#39;processed_at&amp;#39;&lt;/span&gt;] &lt;span style="color:#f92672"&gt;?&lt;/span&gt; &lt;span style="color:#66d9ef"&gt;new&lt;/span&gt; &lt;span style="color:#a6e22e"&gt;\DateTimeImmutable&lt;/span&gt;($payment[&lt;span style="color:#e6db74"&gt;&amp;#39;processed_at&amp;#39;&lt;/span&gt;]) &lt;span style="color:#f92672"&gt;:&lt;/span&gt; &lt;span style="color:#66d9ef"&gt;null&lt;/span&gt;,
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#a6e22e"&gt;cancelledAt&lt;/span&gt;&lt;span style="color:#f92672"&gt;:&lt;/span&gt; $payment[&lt;span style="color:#e6db74"&gt;&amp;#39;cancelled_at&amp;#39;&lt;/span&gt;] &lt;span style="color:#f92672"&gt;?&lt;/span&gt; &lt;span style="color:#66d9ef"&gt;new&lt;/span&gt; &lt;span style="color:#a6e22e"&gt;\DateTimeImmutable&lt;/span&gt;($payment[&lt;span style="color:#e6db74"&gt;&amp;#39;cancelled_at&amp;#39;&lt;/span&gt;]) &lt;span style="color:#f92672"&gt;:&lt;/span&gt; &lt;span style="color:#66d9ef"&gt;null&lt;/span&gt;,
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#a6e22e"&gt;version&lt;/span&gt;&lt;span style="color:#f92672"&gt;:&lt;/span&gt; $payment[&lt;span style="color:#e6db74"&gt;&amp;#39;version&amp;#39;&lt;/span&gt;],
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#a6e22e"&gt;metadata&lt;/span&gt;&lt;span style="color:#f92672"&gt;:&lt;/span&gt; &lt;span style="color:#a6e22e"&gt;json_decode&lt;/span&gt;($payment[&lt;span style="color:#e6db74"&gt;&amp;#39;metadata&amp;#39;&lt;/span&gt;], &lt;span style="color:#66d9ef"&gt;true&lt;/span&gt;) &lt;span style="color:#f92672"&gt;??&lt;/span&gt; []
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; );
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; }
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#66d9ef"&gt;return&lt;/span&gt; $payments;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; }
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h3 id="4-stockage-sql---event-sourcing"&gt;4. Stockage SQL - Event Sourcing&lt;/h3&gt;
&lt;h4 id="exemple--repository-de-paiement-event-sourcing"&gt;Exemple : Repository de Paiement Event Sourcing&lt;/h4&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"&gt;&lt;code class="language-php" data-lang="php"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#75715e"&gt;// Repository de Paiement Event Sourcing - Projet Gyroscops Cloud
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#75715e"&gt;&lt;/span&gt;&lt;span style="color:#66d9ef"&gt;final&lt;/span&gt; &lt;span style="color:#66d9ef"&gt;class&lt;/span&gt; &lt;span style="color:#a6e22e"&gt;DatabasePaymentEventSourcingRepository&lt;/span&gt; &lt;span style="color:#66d9ef"&gt;implements&lt;/span&gt; &lt;span style="color:#a6e22e"&gt;PaymentEventSourcingRepositoryInterface&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;{
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#66d9ef"&gt;public&lt;/span&gt; &lt;span style="color:#66d9ef"&gt;function&lt;/span&gt; &lt;span style="color:#a6e22e"&gt;__construct&lt;/span&gt;(
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#66d9ef"&gt;private&lt;/span&gt; &lt;span style="color:#a6e22e"&gt;Connection&lt;/span&gt; $connection,
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#66d9ef"&gt;private&lt;/span&gt; &lt;span style="color:#a6e22e"&gt;EventBusInterface&lt;/span&gt; $eventBus,
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; ) {
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; }
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#66d9ef"&gt;public&lt;/span&gt; &lt;span style="color:#66d9ef"&gt;function&lt;/span&gt; &lt;span style="color:#a6e22e"&gt;get&lt;/span&gt;(&lt;span style="color:#a6e22e"&gt;PaymentId&lt;/span&gt; $id)&lt;span style="color:#f92672"&gt;:&lt;/span&gt; &lt;span style="color:#a6e22e"&gt;Payment&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; {
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; $events &lt;span style="color:#f92672"&gt;=&lt;/span&gt; $this&lt;span style="color:#f92672"&gt;-&amp;gt;&lt;/span&gt;&lt;span style="color:#a6e22e"&gt;getEvents&lt;/span&gt;($id);
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; 
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#66d9ef"&gt;if&lt;/span&gt; (&lt;span style="color:#66d9ef"&gt;empty&lt;/span&gt;($events)) {
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#66d9ef"&gt;throw&lt;/span&gt; &lt;span style="color:#66d9ef"&gt;new&lt;/span&gt; &lt;span style="color:#a6e22e"&gt;NotFoundException&lt;/span&gt;();
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; }
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#66d9ef"&gt;return&lt;/span&gt; $this&lt;span style="color:#f92672"&gt;-&amp;gt;&lt;/span&gt;&lt;span style="color:#a6e22e"&gt;reconstructFromEvents&lt;/span&gt;($events);
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; }
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#66d9ef"&gt;public&lt;/span&gt; &lt;span style="color:#66d9ef"&gt;function&lt;/span&gt; &lt;span style="color:#a6e22e"&gt;save&lt;/span&gt;(&lt;span style="color:#a6e22e"&gt;Payment&lt;/span&gt; $payment)&lt;span style="color:#f92672"&gt;:&lt;/span&gt; &lt;span style="color:#a6e22e"&gt;void&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; {
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; $this&lt;span style="color:#f92672"&gt;-&amp;gt;&lt;/span&gt;&lt;span style="color:#a6e22e"&gt;connection&lt;/span&gt;&lt;span style="color:#f92672"&gt;-&amp;gt;&lt;/span&gt;&lt;span style="color:#a6e22e"&gt;beginTransaction&lt;/span&gt;();
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#66d9ef"&gt;try&lt;/span&gt; {
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; $events &lt;span style="color:#f92672"&gt;=&lt;/span&gt; $payment&lt;span style="color:#f92672"&gt;-&amp;gt;&lt;/span&gt;&lt;span style="color:#a6e22e"&gt;releaseEvents&lt;/span&gt;();
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#75715e"&gt;// Sauvegarder les √©v√©nements
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#75715e"&gt;&lt;/span&gt; &lt;span style="color:#66d9ef"&gt;foreach&lt;/span&gt; ($events &lt;span style="color:#66d9ef"&gt;as&lt;/span&gt; $event) {
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; $this&lt;span style="color:#f92672"&gt;-&amp;gt;&lt;/span&gt;&lt;span style="color:#a6e22e"&gt;saveEvent&lt;/span&gt;($event);
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; }
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#75715e"&gt;// √âmettre les √©v√©nements
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#75715e"&gt;&lt;/span&gt; &lt;span style="color:#66d9ef"&gt;foreach&lt;/span&gt; ($events &lt;span style="color:#66d9ef"&gt;as&lt;/span&gt; $event) {
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; $this&lt;span style="color:#f92672"&gt;-&amp;gt;&lt;/span&gt;&lt;span style="color:#a6e22e"&gt;eventBus&lt;/span&gt;&lt;span style="color:#f92672"&gt;-&amp;gt;&lt;/span&gt;&lt;span style="color:#a6e22e"&gt;emit&lt;/span&gt;($event);
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; }
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; $this&lt;span style="color:#f92672"&gt;-&amp;gt;&lt;/span&gt;&lt;span style="color:#a6e22e"&gt;connection&lt;/span&gt;&lt;span style="color:#f92672"&gt;-&amp;gt;&lt;/span&gt;&lt;span style="color:#a6e22e"&gt;commit&lt;/span&gt;();
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; } &lt;span style="color:#66d9ef"&gt;catch&lt;/span&gt; (&lt;span style="color:#a6e22e"&gt;\Throwable&lt;/span&gt; $exception) {
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; $this&lt;span style="color:#f92672"&gt;-&amp;gt;&lt;/span&gt;&lt;span style="color:#a6e22e"&gt;connection&lt;/span&gt;&lt;span style="color:#f92672"&gt;-&amp;gt;&lt;/span&gt;&lt;span style="color:#a6e22e"&gt;rollBack&lt;/span&gt;();
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#66d9ef"&gt;throw&lt;/span&gt; $exception;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; }
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; }
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#66d9ef"&gt;private&lt;/span&gt; &lt;span style="color:#66d9ef"&gt;function&lt;/span&gt; &lt;span style="color:#a6e22e"&gt;getEvents&lt;/span&gt;(&lt;span style="color:#a6e22e"&gt;PaymentId&lt;/span&gt; $id)&lt;span style="color:#f92672"&gt;:&lt;/span&gt; &lt;span style="color:#66d9ef"&gt;array&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; {
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; $sql &lt;span style="color:#f92672"&gt;=&lt;/span&gt; &lt;span style="color:#e6db74"&gt;&amp;lt;&amp;lt;&amp;lt;&amp;#39;&lt;/span&gt;&lt;span style="color:#e6db74"&gt;SQL&lt;/span&gt;&lt;span style="color:#e6db74"&gt;&amp;#39;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#e6db74"&gt; SELECT event_type, event_data, occurred_on, version
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#e6db74"&gt; FROM events
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#e6db74"&gt; WHERE aggregate_id = :aggregate_id
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#e6db74"&gt; ORDER BY version ASC
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#e6db74"&gt; &lt;/span&gt;&lt;span style="color:#e6db74"&gt;SQL&lt;/span&gt;;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; $statement &lt;span style="color:#f92672"&gt;=&lt;/span&gt; $this&lt;span style="color:#f92672"&gt;-&amp;gt;&lt;/span&gt;&lt;span style="color:#a6e22e"&gt;connection&lt;/span&gt;&lt;span style="color:#f92672"&gt;-&amp;gt;&lt;/span&gt;&lt;span style="color:#a6e22e"&gt;prepare&lt;/span&gt;($sql);
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; $statement&lt;span style="color:#f92672"&gt;-&amp;gt;&lt;/span&gt;&lt;span style="color:#a6e22e"&gt;bindValue&lt;/span&gt;(&lt;span style="color:#e6db74"&gt;&amp;#39;:aggregate_id&amp;#39;&lt;/span&gt;, $id&lt;span style="color:#f92672"&gt;-&amp;gt;&lt;/span&gt;&lt;span style="color:#a6e22e"&gt;toString&lt;/span&gt;(), &lt;span style="color:#a6e22e"&gt;ParameterType&lt;/span&gt;&lt;span style="color:#f92672"&gt;::&lt;/span&gt;&lt;span style="color:#a6e22e"&gt;STRING&lt;/span&gt;);
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; $result &lt;span style="color:#f92672"&gt;=&lt;/span&gt; $statement&lt;span style="color:#f92672"&gt;-&amp;gt;&lt;/span&gt;&lt;span style="color:#a6e22e"&gt;executeQuery&lt;/span&gt;();
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; $events &lt;span style="color:#f92672"&gt;=&lt;/span&gt; [];
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#66d9ef"&gt;while&lt;/span&gt; ($row &lt;span style="color:#f92672"&gt;=&lt;/span&gt; $result&lt;span style="color:#f92672"&gt;-&amp;gt;&lt;/span&gt;&lt;span style="color:#a6e22e"&gt;fetchAssociative&lt;/span&gt;()) {
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; $events[] &lt;span style="color:#f92672"&gt;=&lt;/span&gt; $this&lt;span style="color:#f92672"&gt;-&amp;gt;&lt;/span&gt;&lt;span style="color:#a6e22e"&gt;deserializeEvent&lt;/span&gt;($row[&lt;span style="color:#e6db74"&gt;&amp;#39;event_type&amp;#39;&lt;/span&gt;], $row[&lt;span style="color:#e6db74"&gt;&amp;#39;event_data&amp;#39;&lt;/span&gt;]);
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; }
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#66d9ef"&gt;return&lt;/span&gt; $events;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; }
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#66d9ef"&gt;private&lt;/span&gt; &lt;span style="color:#66d9ef"&gt;function&lt;/span&gt; &lt;span style="color:#a6e22e"&gt;saveEvent&lt;/span&gt;(&lt;span style="color:#a6e22e"&gt;object&lt;/span&gt; $event)&lt;span style="color:#f92672"&gt;:&lt;/span&gt; &lt;span style="color:#a6e22e"&gt;void&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; {
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; $sql &lt;span style="color:#f92672"&gt;=&lt;/span&gt; &lt;span style="color:#e6db74"&gt;&amp;lt;&amp;lt;&amp;lt;&amp;#39;&lt;/span&gt;&lt;span style="color:#e6db74"&gt;SQL&lt;/span&gt;&lt;span style="color:#e6db74"&gt;&amp;#39;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#e6db74"&gt; INSERT INTO events (
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#e6db74"&gt; aggregate_id, event_type, event_data, occurred_on, version
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#e6db74"&gt; ) VALUES (
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#e6db74"&gt; :aggregate_id, :event_type, :event_data, :occurred_on, :version
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#e6db74"&gt; )
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#e6db74"&gt; &lt;/span&gt;&lt;span style="color:#e6db74"&gt;SQL&lt;/span&gt;;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; $statement &lt;span style="color:#f92672"&gt;=&lt;/span&gt; $this&lt;span style="color:#f92672"&gt;-&amp;gt;&lt;/span&gt;&lt;span style="color:#a6e22e"&gt;connection&lt;/span&gt;&lt;span style="color:#f92672"&gt;-&amp;gt;&lt;/span&gt;&lt;span style="color:#a6e22e"&gt;prepare&lt;/span&gt;($sql);
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; $statement&lt;span style="color:#f92672"&gt;-&amp;gt;&lt;/span&gt;&lt;span style="color:#a6e22e"&gt;bindValue&lt;/span&gt;(&lt;span style="color:#e6db74"&gt;&amp;#39;:aggregate_id&amp;#39;&lt;/span&gt;, $this&lt;span style="color:#f92672"&gt;-&amp;gt;&lt;/span&gt;&lt;span style="color:#a6e22e"&gt;getAggregateId&lt;/span&gt;($event), &lt;span style="color:#a6e22e"&gt;ParameterType&lt;/span&gt;&lt;span style="color:#f92672"&gt;::&lt;/span&gt;&lt;span style="color:#a6e22e"&gt;STRING&lt;/span&gt;);
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; $statement&lt;span style="color:#f92672"&gt;-&amp;gt;&lt;/span&gt;&lt;span style="color:#a6e22e"&gt;bindValue&lt;/span&gt;(&lt;span style="color:#e6db74"&gt;&amp;#39;:event_type&amp;#39;&lt;/span&gt;, $event&lt;span style="color:#f92672"&gt;::&lt;/span&gt;&lt;span style="color:#a6e22e"&gt;class&lt;/span&gt;, &lt;span style="color:#a6e22e"&gt;ParameterType&lt;/span&gt;&lt;span style="color:#f92672"&gt;::&lt;/span&gt;&lt;span style="color:#a6e22e"&gt;STRING&lt;/span&gt;);
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; $statement&lt;span style="color:#f92672"&gt;-&amp;gt;&lt;/span&gt;&lt;span style="color:#a6e22e"&gt;bindValue&lt;/span&gt;(&lt;span style="color:#e6db74"&gt;&amp;#39;:event_data&amp;#39;&lt;/span&gt;, &lt;span style="color:#a6e22e"&gt;json_encode&lt;/span&gt;($this&lt;span style="color:#f92672"&gt;-&amp;gt;&lt;/span&gt;&lt;span style="color:#a6e22e"&gt;serializeEvent&lt;/span&gt;($event)), &lt;span style="color:#a6e22e"&gt;ParameterType&lt;/span&gt;&lt;span style="color:#f92672"&gt;::&lt;/span&gt;&lt;span style="color:#a6e22e"&gt;STRING&lt;/span&gt;);
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; $statement&lt;span style="color:#f92672"&gt;-&amp;gt;&lt;/span&gt;&lt;span style="color:#a6e22e"&gt;bindValue&lt;/span&gt;(&lt;span style="color:#e6db74"&gt;&amp;#39;:occurred_on&amp;#39;&lt;/span&gt;, $this&lt;span style="color:#f92672"&gt;-&amp;gt;&lt;/span&gt;&lt;span style="color:#a6e22e"&gt;getOccurredOn&lt;/span&gt;($event)&lt;span style="color:#f92672"&gt;-&amp;gt;&lt;/span&gt;&lt;span style="color:#a6e22e"&gt;format&lt;/span&gt;(&lt;span style="color:#e6db74"&gt;&amp;#39;Y-m-d H:i:s&amp;#39;&lt;/span&gt;), &lt;span style="color:#a6e22e"&gt;ParameterType&lt;/span&gt;&lt;span style="color:#f92672"&gt;::&lt;/span&gt;&lt;span style="color:#a6e22e"&gt;STRING&lt;/span&gt;);
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; $statement&lt;span style="color:#f92672"&gt;-&amp;gt;&lt;/span&gt;&lt;span style="color:#a6e22e"&gt;bindValue&lt;/span&gt;(&lt;span style="color:#e6db74"&gt;&amp;#39;:version&amp;#39;&lt;/span&gt;, $this&lt;span style="color:#f92672"&gt;-&amp;gt;&lt;/span&gt;&lt;span style="color:#a6e22e"&gt;getVersion&lt;/span&gt;($event), &lt;span style="color:#a6e22e"&gt;ParameterType&lt;/span&gt;&lt;span style="color:#f92672"&gt;::&lt;/span&gt;&lt;span style="color:#a6e22e"&gt;INTEGER&lt;/span&gt;);
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; $statement&lt;span style="color:#f92672"&gt;-&amp;gt;&lt;/span&gt;&lt;span style="color:#a6e22e"&gt;executeStatement&lt;/span&gt;();
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; }
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#66d9ef"&gt;private&lt;/span&gt; &lt;span style="color:#66d9ef"&gt;function&lt;/span&gt; &lt;span style="color:#a6e22e"&gt;reconstructFromEvents&lt;/span&gt;(&lt;span style="color:#66d9ef"&gt;array&lt;/span&gt; $events)&lt;span style="color:#f92672"&gt;:&lt;/span&gt; &lt;span style="color:#a6e22e"&gt;Payment&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; {
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; $payment &lt;span style="color:#f92672"&gt;=&lt;/span&gt; &lt;span style="color:#66d9ef"&gt;null&lt;/span&gt;;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; 
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#66d9ef"&gt;foreach&lt;/span&gt; ($events &lt;span style="color:#66d9ef"&gt;as&lt;/span&gt; $event) {
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#66d9ef"&gt;if&lt;/span&gt; ($event &lt;span style="color:#a6e22e"&gt;instanceof&lt;/span&gt; &lt;span style="color:#a6e22e"&gt;PaymentCreated&lt;/span&gt;) {
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; $payment &lt;span style="color:#f92672"&gt;=&lt;/span&gt; &lt;span style="color:#66d9ef"&gt;new&lt;/span&gt; &lt;span style="color:#a6e22e"&gt;Payment&lt;/span&gt;(
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#a6e22e"&gt;id&lt;/span&gt;&lt;span style="color:#f92672"&gt;:&lt;/span&gt; $event&lt;span style="color:#f92672"&gt;-&amp;gt;&lt;/span&gt;&lt;span style="color:#a6e22e"&gt;paymentId&lt;/span&gt;,
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#a6e22e"&gt;amount&lt;/span&gt;&lt;span style="color:#f92672"&gt;:&lt;/span&gt; $event&lt;span style="color:#f92672"&gt;-&amp;gt;&lt;/span&gt;&lt;span style="color:#a6e22e"&gt;amount&lt;/span&gt;,
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#a6e22e"&gt;status&lt;/span&gt;&lt;span style="color:#f92672"&gt;:&lt;/span&gt; &lt;span style="color:#a6e22e"&gt;PaymentStatus&lt;/span&gt;&lt;span style="color:#f92672"&gt;::&lt;/span&gt;&lt;span style="color:#a6e22e"&gt;PENDING&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; );
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; } &lt;span style="color:#66d9ef"&gt;else&lt;/span&gt; {
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; $payment&lt;span style="color:#f92672"&gt;-&amp;gt;&lt;/span&gt;&lt;span style="color:#a6e22e"&gt;apply&lt;/span&gt;($event);
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; }
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; }
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; 
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#66d9ef"&gt;return&lt;/span&gt; $payment;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; }
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#66d9ef"&gt;private&lt;/span&gt; &lt;span style="color:#66d9ef"&gt;function&lt;/span&gt; &lt;span style="color:#a6e22e"&gt;deserializeEvent&lt;/span&gt;(&lt;span style="color:#a6e22e"&gt;string&lt;/span&gt; $eventType, &lt;span style="color:#a6e22e"&gt;string&lt;/span&gt; $eventData)&lt;span style="color:#f92672"&gt;:&lt;/span&gt; &lt;span style="color:#a6e22e"&gt;object&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; {
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; $data &lt;span style="color:#f92672"&gt;=&lt;/span&gt; &lt;span style="color:#a6e22e"&gt;json_decode&lt;/span&gt;($eventData, &lt;span style="color:#66d9ef"&gt;true&lt;/span&gt;);
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; $eventClass &lt;span style="color:#f92672"&gt;=&lt;/span&gt; $eventType;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#66d9ef"&gt;return&lt;/span&gt; &lt;span style="color:#66d9ef"&gt;new&lt;/span&gt; $eventClass(&lt;span style="color:#f92672"&gt;...&lt;/span&gt;$data);
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; }
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#66d9ef"&gt;private&lt;/span&gt; &lt;span style="color:#66d9ef"&gt;function&lt;/span&gt; &lt;span style="color:#a6e22e"&gt;serializeEvent&lt;/span&gt;(&lt;span style="color:#a6e22e"&gt;object&lt;/span&gt; $event)&lt;span style="color:#f92672"&gt;:&lt;/span&gt; &lt;span style="color:#66d9ef"&gt;array&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; {
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#75715e"&gt;// Impl√©mentation de la s√©rialisation
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#75715e"&gt;&lt;/span&gt; &lt;span style="color:#66d9ef"&gt;return&lt;/span&gt; [];
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; }
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#66d9ef"&gt;private&lt;/span&gt; &lt;span style="color:#66d9ef"&gt;function&lt;/span&gt; &lt;span style="color:#a6e22e"&gt;getAggregateId&lt;/span&gt;(&lt;span style="color:#a6e22e"&gt;object&lt;/span&gt; $event)&lt;span style="color:#f92672"&gt;:&lt;/span&gt; &lt;span style="color:#a6e22e"&gt;string&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; {
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#75715e"&gt;// Impl√©mentation de l&amp;#39;extraction de l&amp;#39;ID d&amp;#39;agr√©gat
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#75715e"&gt;&lt;/span&gt; &lt;span style="color:#66d9ef"&gt;return&lt;/span&gt; &lt;span style="color:#e6db74"&gt;&amp;#39;&amp;#39;&lt;/span&gt;;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; }
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#66d9ef"&gt;private&lt;/span&gt; &lt;span style="color:#66d9ef"&gt;function&lt;/span&gt; &lt;span style="color:#a6e22e"&gt;getOccurredOn&lt;/span&gt;(&lt;span style="color:#a6e22e"&gt;object&lt;/span&gt; $event)&lt;span style="color:#f92672"&gt;:&lt;/span&gt; &lt;span style="color:#a6e22e"&gt;\DateTimeInterface&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; {
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#75715e"&gt;// Impl√©mentation de l&amp;#39;extraction de la date d&amp;#39;occurrence
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#75715e"&gt;&lt;/span&gt; &lt;span style="color:#66d9ef"&gt;return&lt;/span&gt; &lt;span style="color:#66d9ef"&gt;new&lt;/span&gt; &lt;span style="color:#a6e22e"&gt;\DateTimeImmutable&lt;/span&gt;();
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; }
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#66d9ef"&gt;private&lt;/span&gt; &lt;span style="color:#66d9ef"&gt;function&lt;/span&gt; &lt;span style="color:#a6e22e"&gt;getVersion&lt;/span&gt;(&lt;span style="color:#a6e22e"&gt;object&lt;/span&gt; $event)&lt;span style="color:#f92672"&gt;:&lt;/span&gt; &lt;span style="color:#a6e22e"&gt;int&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; {
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#75715e"&gt;// Impl√©mentation de l&amp;#39;extraction de la version
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#75715e"&gt;&lt;/span&gt; &lt;span style="color:#66d9ef"&gt;return&lt;/span&gt; &lt;span style="color:#ae81ff"&gt;1&lt;/span&gt;;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; }
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h3 id="5-stockage-api---approche-classique"&gt;5. Stockage API - Approche Classique&lt;/h3&gt;
&lt;h4 id="exemple--repository-de-paiement-api"&gt;Exemple : Repository de Paiement API&lt;/h4&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"&gt;&lt;code class="language-php" data-lang="php"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#75715e"&gt;// Repository de Paiement API - Projet Gyroscops Cloud
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#75715e"&gt;&lt;/span&gt;&lt;span style="color:#66d9ef"&gt;final&lt;/span&gt; &lt;span style="color:#66d9ef"&gt;class&lt;/span&gt; &lt;span style="color:#a6e22e"&gt;ApiPaymentRepository&lt;/span&gt; &lt;span style="color:#66d9ef"&gt;implements&lt;/span&gt; &lt;span style="color:#a6e22e"&gt;PaymentRepositoryInterface&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;{
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#66d9ef"&gt;public&lt;/span&gt; &lt;span style="color:#66d9ef"&gt;function&lt;/span&gt; &lt;span style="color:#a6e22e"&gt;__construct&lt;/span&gt;(
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#66d9ef"&gt;private&lt;/span&gt; &lt;span style="color:#a6e22e"&gt;HttpClientInterface&lt;/span&gt; $httpClient,
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#66d9ef"&gt;private&lt;/span&gt; &lt;span style="color:#a6e22e"&gt;string&lt;/span&gt; $apiBaseUrl,
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#66d9ef"&gt;private&lt;/span&gt; &lt;span style="color:#a6e22e"&gt;string&lt;/span&gt; $apiKey,
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#66d9ef"&gt;private&lt;/span&gt; &lt;span style="color:#a6e22e"&gt;EventBusInterface&lt;/span&gt; $eventBus,
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; ) {
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; }
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#66d9ef"&gt;public&lt;/span&gt; &lt;span style="color:#66d9ef"&gt;function&lt;/span&gt; &lt;span style="color:#a6e22e"&gt;get&lt;/span&gt;(&lt;span style="color:#a6e22e"&gt;PaymentId&lt;/span&gt; $id)&lt;span style="color:#f92672"&gt;:&lt;/span&gt; &lt;span style="color:#a6e22e"&gt;Payment&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; {
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; $response &lt;span style="color:#f92672"&gt;=&lt;/span&gt; $this&lt;span style="color:#f92672"&gt;-&amp;gt;&lt;/span&gt;&lt;span style="color:#a6e22e"&gt;httpClient&lt;/span&gt;&lt;span style="color:#f92672"&gt;-&amp;gt;&lt;/span&gt;&lt;span style="color:#a6e22e"&gt;request&lt;/span&gt;(&lt;span style="color:#e6db74"&gt;&amp;#39;GET&amp;#39;&lt;/span&gt;, &lt;span style="color:#e6db74"&gt;&amp;#34;&lt;/span&gt;&lt;span style="color:#e6db74"&gt;{&lt;/span&gt;$this&lt;span style="color:#f92672"&gt;-&amp;gt;&lt;/span&gt;&lt;span style="color:#a6e22e"&gt;apiBaseUrl&lt;/span&gt;&lt;span style="color:#e6db74"&gt;}&lt;/span&gt;&lt;span style="color:#e6db74"&gt;/payments/&lt;/span&gt;&lt;span style="color:#e6db74"&gt;{&lt;/span&gt;$id&lt;span style="color:#f92672"&gt;-&amp;gt;&lt;/span&gt;&lt;span style="color:#a6e22e"&gt;toString&lt;/span&gt;()&lt;span style="color:#e6db74"&gt;}&lt;/span&gt;&lt;span style="color:#e6db74"&gt;&amp;#34;&lt;/span&gt;, [
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#e6db74"&gt;&amp;#39;headers&amp;#39;&lt;/span&gt; &lt;span style="color:#f92672"&gt;=&amp;gt;&lt;/span&gt; [
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#e6db74"&gt;&amp;#39;Authorization&amp;#39;&lt;/span&gt; &lt;span style="color:#f92672"&gt;=&amp;gt;&lt;/span&gt; &lt;span style="color:#e6db74"&gt;&amp;#34;Bearer &lt;/span&gt;&lt;span style="color:#e6db74"&gt;{&lt;/span&gt;$this&lt;span style="color:#f92672"&gt;-&amp;gt;&lt;/span&gt;&lt;span style="color:#a6e22e"&gt;apiKey&lt;/span&gt;&lt;span style="color:#e6db74"&gt;}&lt;/span&gt;&lt;span style="color:#e6db74"&gt;&amp;#34;&lt;/span&gt;,
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#e6db74"&gt;&amp;#39;Content-Type&amp;#39;&lt;/span&gt; &lt;span style="color:#f92672"&gt;=&amp;gt;&lt;/span&gt; &lt;span style="color:#e6db74"&gt;&amp;#39;application/json&amp;#39;&lt;/span&gt;,
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; ],
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; ]);
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#66d9ef"&gt;if&lt;/span&gt; ($response&lt;span style="color:#f92672"&gt;-&amp;gt;&lt;/span&gt;&lt;span style="color:#a6e22e"&gt;getStatusCode&lt;/span&gt;() &lt;span style="color:#f92672"&gt;===&lt;/span&gt; &lt;span style="color:#ae81ff"&gt;404&lt;/span&gt;) {
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#66d9ef"&gt;throw&lt;/span&gt; &lt;span style="color:#66d9ef"&gt;new&lt;/span&gt; &lt;span style="color:#a6e22e"&gt;NotFoundException&lt;/span&gt;();
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; }
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#66d9ef"&gt;if&lt;/span&gt; ($response&lt;span style="color:#f92672"&gt;-&amp;gt;&lt;/span&gt;&lt;span style="color:#a6e22e"&gt;getStatusCode&lt;/span&gt;() &lt;span style="color:#f92672"&gt;!==&lt;/span&gt; &lt;span style="color:#ae81ff"&gt;200&lt;/span&gt;) {
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#66d9ef"&gt;throw&lt;/span&gt; &lt;span style="color:#66d9ef"&gt;new&lt;/span&gt; &lt;span style="color:#a6e22e"&gt;\RuntimeException&lt;/span&gt;(&lt;span style="color:#e6db74"&gt;&amp;#39;API request failed&amp;#39;&lt;/span&gt;);
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; }
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; $data &lt;span style="color:#f92672"&gt;=&lt;/span&gt; &lt;span style="color:#a6e22e"&gt;json_decode&lt;/span&gt;($response&lt;span style="color:#f92672"&gt;-&amp;gt;&lt;/span&gt;&lt;span style="color:#a6e22e"&gt;getContent&lt;/span&gt;(), &lt;span style="color:#66d9ef"&gt;true&lt;/span&gt;);
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#66d9ef"&gt;return&lt;/span&gt; &lt;span style="color:#66d9ef"&gt;new&lt;/span&gt; &lt;span style="color:#a6e22e"&gt;Payment&lt;/span&gt;(
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#a6e22e"&gt;id&lt;/span&gt;&lt;span style="color:#f92672"&gt;:&lt;/span&gt; &lt;span style="color:#a6e22e"&gt;PaymentId&lt;/span&gt;&lt;span style="color:#f92672"&gt;::&lt;/span&gt;&lt;span style="color:#a6e22e"&gt;fromString&lt;/span&gt;($data[&lt;span style="color:#e6db74"&gt;&amp;#39;uuid&amp;#39;&lt;/span&gt;]),
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#a6e22e"&gt;amount&lt;/span&gt;&lt;span style="color:#f92672"&gt;:&lt;/span&gt; &lt;span style="color:#66d9ef"&gt;new&lt;/span&gt; &lt;span style="color:#a6e22e"&gt;Amount&lt;/span&gt;($data[&lt;span style="color:#e6db74"&gt;&amp;#39;amount&amp;#39;&lt;/span&gt;], &lt;span style="color:#a6e22e"&gt;Currencies&lt;/span&gt;&lt;span style="color:#f92672"&gt;::&lt;/span&gt;&lt;span style="color:#a6e22e"&gt;from&lt;/span&gt;($data[&lt;span style="color:#e6db74"&gt;&amp;#39;currency&amp;#39;&lt;/span&gt;])),
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#a6e22e"&gt;status&lt;/span&gt;&lt;span style="color:#f92672"&gt;:&lt;/span&gt; &lt;span style="color:#a6e22e"&gt;PaymentStatus&lt;/span&gt;&lt;span style="color:#f92672"&gt;::&lt;/span&gt;&lt;span style="color:#a6e22e"&gt;from&lt;/span&gt;($data[&lt;span style="color:#e6db74"&gt;&amp;#39;status&amp;#39;&lt;/span&gt;]),
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#a6e22e"&gt;authorizationCode&lt;/span&gt;&lt;span style="color:#f92672"&gt;:&lt;/span&gt; $data[&lt;span style="color:#e6db74"&gt;&amp;#39;authorization_code&amp;#39;&lt;/span&gt;] &lt;span style="color:#f92672"&gt;??&lt;/span&gt; &lt;span style="color:#66d9ef"&gt;null&lt;/span&gt;,
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#a6e22e"&gt;createdAt&lt;/span&gt;&lt;span style="color:#f92672"&gt;:&lt;/span&gt; &lt;span style="color:#66d9ef"&gt;new&lt;/span&gt; &lt;span style="color:#a6e22e"&gt;\DateTimeImmutable&lt;/span&gt;($data[&lt;span style="color:#e6db74"&gt;&amp;#39;created_at&amp;#39;&lt;/span&gt;]),
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#a6e22e"&gt;processedAt&lt;/span&gt;&lt;span style="color:#f92672"&gt;:&lt;/span&gt; $data[&lt;span style="color:#e6db74"&gt;&amp;#39;processed_at&amp;#39;&lt;/span&gt;] &lt;span style="color:#f92672"&gt;?&lt;/span&gt; &lt;span style="color:#66d9ef"&gt;new&lt;/span&gt; &lt;span style="color:#a6e22e"&gt;\DateTimeImmutable&lt;/span&gt;($data[&lt;span style="color:#e6db74"&gt;&amp;#39;processed_at&amp;#39;&lt;/span&gt;]) &lt;span style="color:#f92672"&gt;:&lt;/span&gt; &lt;span style="color:#66d9ef"&gt;null&lt;/span&gt;,
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#a6e22e"&gt;cancelledAt&lt;/span&gt;&lt;span style="color:#f92672"&gt;:&lt;/span&gt; $data[&lt;span style="color:#e6db74"&gt;&amp;#39;cancelled_at&amp;#39;&lt;/span&gt;] &lt;span style="color:#f92672"&gt;?&lt;/span&gt; &lt;span style="color:#66d9ef"&gt;new&lt;/span&gt; &lt;span style="color:#a6e22e"&gt;\DateTimeImmutable&lt;/span&gt;($data[&lt;span style="color:#e6db74"&gt;&amp;#39;cancelled_at&amp;#39;&lt;/span&gt;]) &lt;span style="color:#f92672"&gt;:&lt;/span&gt; &lt;span style="color:#66d9ef"&gt;null&lt;/span&gt;,
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#a6e22e"&gt;version&lt;/span&gt;&lt;span style="color:#f92672"&gt;:&lt;/span&gt; $data[&lt;span style="color:#e6db74"&gt;&amp;#39;version&amp;#39;&lt;/span&gt;]
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; );
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; }
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#66d9ef"&gt;public&lt;/span&gt; &lt;span style="color:#66d9ef"&gt;function&lt;/span&gt; &lt;span style="color:#a6e22e"&gt;save&lt;/span&gt;(&lt;span style="color:#a6e22e"&gt;Payment&lt;/span&gt; $payment)&lt;span style="color:#f92672"&gt;:&lt;/span&gt; &lt;span style="color:#a6e22e"&gt;void&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; {
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; $events &lt;span style="color:#f92672"&gt;=&lt;/span&gt; $payment&lt;span style="color:#f92672"&gt;-&amp;gt;&lt;/span&gt;&lt;span style="color:#a6e22e"&gt;releaseEvents&lt;/span&gt;();
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#75715e"&gt;// Sauvegarder via l&amp;#39;API
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#75715e"&gt;&lt;/span&gt; $this&lt;span style="color:#f92672"&gt;-&amp;gt;&lt;/span&gt;&lt;span style="color:#a6e22e"&gt;saveViaApi&lt;/span&gt;($payment);
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#75715e"&gt;// √âmettre les √©v√©nements
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#75715e"&gt;&lt;/span&gt; &lt;span style="color:#66d9ef"&gt;foreach&lt;/span&gt; ($events &lt;span style="color:#66d9ef"&gt;as&lt;/span&gt; $event) {
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; $this&lt;span style="color:#f92672"&gt;-&amp;gt;&lt;/span&gt;&lt;span style="color:#a6e22e"&gt;eventBus&lt;/span&gt;&lt;span style="color:#f92672"&gt;-&amp;gt;&lt;/span&gt;&lt;span style="color:#a6e22e"&gt;emit&lt;/span&gt;($event);
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; }
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; }
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#66d9ef"&gt;private&lt;/span&gt; &lt;span style="color:#66d9ef"&gt;function&lt;/span&gt; &lt;span style="color:#a6e22e"&gt;saveViaApi&lt;/span&gt;(&lt;span style="color:#a6e22e"&gt;Payment&lt;/span&gt; $payment)&lt;span style="color:#f92672"&gt;:&lt;/span&gt; &lt;span style="color:#a6e22e"&gt;void&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; {
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; $data &lt;span style="color:#f92672"&gt;=&lt;/span&gt; [
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#e6db74"&gt;&amp;#39;uuid&amp;#39;&lt;/span&gt; &lt;span style="color:#f92672"&gt;=&amp;gt;&lt;/span&gt; $payment&lt;span style="color:#f92672"&gt;-&amp;gt;&lt;/span&gt;&lt;span style="color:#a6e22e"&gt;getId&lt;/span&gt;()&lt;span style="color:#f92672"&gt;-&amp;gt;&lt;/span&gt;&lt;span style="color:#a6e22e"&gt;toString&lt;/span&gt;(),
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#e6db74"&gt;&amp;#39;amount&amp;#39;&lt;/span&gt; &lt;span style="color:#f92672"&gt;=&amp;gt;&lt;/span&gt; $payment&lt;span style="color:#f92672"&gt;-&amp;gt;&lt;/span&gt;&lt;span style="color:#a6e22e"&gt;getAmount&lt;/span&gt;()&lt;span style="color:#f92672"&gt;-&amp;gt;&lt;/span&gt;&lt;span style="color:#a6e22e"&gt;getValue&lt;/span&gt;(),
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#e6db74"&gt;&amp;#39;currency&amp;#39;&lt;/span&gt; &lt;span style="color:#f92672"&gt;=&amp;gt;&lt;/span&gt; $payment&lt;span style="color:#f92672"&gt;-&amp;gt;&lt;/span&gt;&lt;span style="color:#a6e22e"&gt;getAmount&lt;/span&gt;()&lt;span style="color:#f92672"&gt;-&amp;gt;&lt;/span&gt;&lt;span style="color:#a6e22e"&gt;getCurrency&lt;/span&gt;()&lt;span style="color:#f92672"&gt;-&amp;gt;&lt;/span&gt;&lt;span style="color:#a6e22e"&gt;value&lt;/span&gt;,
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#e6db74"&gt;&amp;#39;status&amp;#39;&lt;/span&gt; &lt;span style="color:#f92672"&gt;=&amp;gt;&lt;/span&gt; $payment&lt;span style="color:#f92672"&gt;-&amp;gt;&lt;/span&gt;&lt;span style="color:#a6e22e"&gt;getStatus&lt;/span&gt;()&lt;span style="color:#f92672"&gt;-&amp;gt;&lt;/span&gt;&lt;span style="color:#a6e22e"&gt;value&lt;/span&gt;,
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#e6db74"&gt;&amp;#39;authorization_code&amp;#39;&lt;/span&gt; &lt;span style="color:#f92672"&gt;=&amp;gt;&lt;/span&gt; $payment&lt;span style="color:#f92672"&gt;-&amp;gt;&lt;/span&gt;&lt;span style="color:#a6e22e"&gt;getAuthorizationCode&lt;/span&gt;(),
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#e6db74"&gt;&amp;#39;created_at&amp;#39;&lt;/span&gt; &lt;span style="color:#f92672"&gt;=&amp;gt;&lt;/span&gt; $payment&lt;span style="color:#f92672"&gt;-&amp;gt;&lt;/span&gt;&lt;span style="color:#a6e22e"&gt;getCreatedAt&lt;/span&gt;()&lt;span style="color:#f92672"&gt;-&amp;gt;&lt;/span&gt;&lt;span style="color:#a6e22e"&gt;format&lt;/span&gt;(&lt;span style="color:#e6db74"&gt;&amp;#39;Y-m-d H:i:s&amp;#39;&lt;/span&gt;),
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#e6db74"&gt;&amp;#39;processed_at&amp;#39;&lt;/span&gt; &lt;span style="color:#f92672"&gt;=&amp;gt;&lt;/span&gt; $payment&lt;span style="color:#f92672"&gt;-&amp;gt;&lt;/span&gt;&lt;span style="color:#a6e22e"&gt;getProcessedAt&lt;/span&gt;()&lt;span style="color:#f92672"&gt;?-&amp;gt;&lt;/span&gt;&lt;span style="color:#a6e22e"&gt;format&lt;/span&gt;(&lt;span style="color:#e6db74"&gt;&amp;#39;Y-m-d H:i:s&amp;#39;&lt;/span&gt;),
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#e6db74"&gt;&amp;#39;cancelled_at&amp;#39;&lt;/span&gt; &lt;span style="color:#f92672"&gt;=&amp;gt;&lt;/span&gt; $payment&lt;span style="color:#f92672"&gt;-&amp;gt;&lt;/span&gt;&lt;span style="color:#a6e22e"&gt;getCancelledAt&lt;/span&gt;()&lt;span style="color:#f92672"&gt;?-&amp;gt;&lt;/span&gt;&lt;span style="color:#a6e22e"&gt;format&lt;/span&gt;(&lt;span style="color:#e6db74"&gt;&amp;#39;Y-m-d H:i:s&amp;#39;&lt;/span&gt;),
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#e6db74"&gt;&amp;#39;version&amp;#39;&lt;/span&gt; &lt;span style="color:#f92672"&gt;=&amp;gt;&lt;/span&gt; $payment&lt;span style="color:#f92672"&gt;-&amp;gt;&lt;/span&gt;&lt;span style="color:#a6e22e"&gt;getVersion&lt;/span&gt;(),
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; ];
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; $response &lt;span style="color:#f92672"&gt;=&lt;/span&gt; $this&lt;span style="color:#f92672"&gt;-&amp;gt;&lt;/span&gt;&lt;span style="color:#a6e22e"&gt;httpClient&lt;/span&gt;&lt;span style="color:#f92672"&gt;-&amp;gt;&lt;/span&gt;&lt;span style="color:#a6e22e"&gt;request&lt;/span&gt;(&lt;span style="color:#e6db74"&gt;&amp;#39;PUT&amp;#39;&lt;/span&gt;, &lt;span style="color:#e6db74"&gt;&amp;#34;&lt;/span&gt;&lt;span style="color:#e6db74"&gt;{&lt;/span&gt;$this&lt;span style="color:#f92672"&gt;-&amp;gt;&lt;/span&gt;&lt;span style="color:#a6e22e"&gt;apiBaseUrl&lt;/span&gt;&lt;span style="color:#e6db74"&gt;}&lt;/span&gt;&lt;span style="color:#e6db74"&gt;/payments/&lt;/span&gt;&lt;span style="color:#e6db74"&gt;{&lt;/span&gt;$payment&lt;span style="color:#f92672"&gt;-&amp;gt;&lt;/span&gt;&lt;span style="color:#a6e22e"&gt;getId&lt;/span&gt;()&lt;span style="color:#f92672"&gt;-&amp;gt;&lt;/span&gt;&lt;span style="color:#a6e22e"&gt;toString&lt;/span&gt;()&lt;span style="color:#e6db74"&gt;}&lt;/span&gt;&lt;span style="color:#e6db74"&gt;&amp;#34;&lt;/span&gt;, [
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#e6db74"&gt;&amp;#39;headers&amp;#39;&lt;/span&gt; &lt;span style="color:#f92672"&gt;=&amp;gt;&lt;/span&gt; [
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#e6db74"&gt;&amp;#39;Authorization&amp;#39;&lt;/span&gt; &lt;span style="color:#f92672"&gt;=&amp;gt;&lt;/span&gt; &lt;span style="color:#e6db74"&gt;&amp;#34;Bearer &lt;/span&gt;&lt;span style="color:#e6db74"&gt;{&lt;/span&gt;$this&lt;span style="color:#f92672"&gt;-&amp;gt;&lt;/span&gt;&lt;span style="color:#a6e22e"&gt;apiKey&lt;/span&gt;&lt;span style="color:#e6db74"&gt;}&lt;/span&gt;&lt;span style="color:#e6db74"&gt;&amp;#34;&lt;/span&gt;,
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#e6db74"&gt;&amp;#39;Content-Type&amp;#39;&lt;/span&gt; &lt;span style="color:#f92672"&gt;=&amp;gt;&lt;/span&gt; &lt;span style="color:#e6db74"&gt;&amp;#39;application/json&amp;#39;&lt;/span&gt;,
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; ],
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#e6db74"&gt;&amp;#39;json&amp;#39;&lt;/span&gt; &lt;span style="color:#f92672"&gt;=&amp;gt;&lt;/span&gt; $data,
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; ]);
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#66d9ef"&gt;if&lt;/span&gt; ($response&lt;span style="color:#f92672"&gt;-&amp;gt;&lt;/span&gt;&lt;span style="color:#a6e22e"&gt;getStatusCode&lt;/span&gt;() &lt;span style="color:#f92672"&gt;!==&lt;/span&gt; &lt;span style="color:#ae81ff"&gt;200&lt;/span&gt;) {
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#66d9ef"&gt;throw&lt;/span&gt; &lt;span style="color:#66d9ef"&gt;new&lt;/span&gt; &lt;span style="color:#a6e22e"&gt;\RuntimeException&lt;/span&gt;(&lt;span style="color:#e6db74"&gt;&amp;#39;API request failed&amp;#39;&lt;/span&gt;);
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; }
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; }
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h3 id="6-stockage-elasticsearch---approche-classique"&gt;6. Stockage ElasticSearch - Approche Classique&lt;/h3&gt;
&lt;h4 id="exemple--repository-de-paiement-elasticsearch"&gt;Exemple : Repository de Paiement ElasticSearch&lt;/h4&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"&gt;&lt;code class="language-php" data-lang="php"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#75715e"&gt;// Repository de Paiement ElasticSearch - Projet Gyroscops Cloud
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#75715e"&gt;&lt;/span&gt;&lt;span style="color:#66d9ef"&gt;final&lt;/span&gt; &lt;span style="color:#66d9ef"&gt;class&lt;/span&gt; &lt;span style="color:#a6e22e"&gt;ElasticSearchPaymentRepository&lt;/span&gt; &lt;span style="color:#66d9ef"&gt;implements&lt;/span&gt; &lt;span style="color:#a6e22e"&gt;PaymentRepositoryInterface&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;{
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#66d9ef"&gt;public&lt;/span&gt; &lt;span style="color:#66d9ef"&gt;function&lt;/span&gt; &lt;span style="color:#a6e22e"&gt;__construct&lt;/span&gt;(
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#66d9ef"&gt;private&lt;/span&gt; &lt;span style="color:#a6e22e"&gt;Client&lt;/span&gt; $elasticsearchClient,
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#66d9ef"&gt;private&lt;/span&gt; &lt;span style="color:#a6e22e"&gt;string&lt;/span&gt; $indexName,
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#66d9ef"&gt;private&lt;/span&gt; &lt;span style="color:#a6e22e"&gt;EventBusInterface&lt;/span&gt; $eventBus,
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; ) {
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; }
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#66d9ef"&gt;public&lt;/span&gt; &lt;span style="color:#66d9ef"&gt;function&lt;/span&gt; &lt;span style="color:#a6e22e"&gt;get&lt;/span&gt;(&lt;span style="color:#a6e22e"&gt;PaymentId&lt;/span&gt; $id)&lt;span style="color:#f92672"&gt;:&lt;/span&gt; &lt;span style="color:#a6e22e"&gt;Payment&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; {
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; $response &lt;span style="color:#f92672"&gt;=&lt;/span&gt; $this&lt;span style="color:#f92672"&gt;-&amp;gt;&lt;/span&gt;&lt;span style="color:#a6e22e"&gt;elasticsearchClient&lt;/span&gt;&lt;span style="color:#f92672"&gt;-&amp;gt;&lt;/span&gt;&lt;span style="color:#a6e22e"&gt;get&lt;/span&gt;([
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#e6db74"&gt;&amp;#39;index&amp;#39;&lt;/span&gt; &lt;span style="color:#f92672"&gt;=&amp;gt;&lt;/span&gt; $this&lt;span style="color:#f92672"&gt;-&amp;gt;&lt;/span&gt;&lt;span style="color:#a6e22e"&gt;indexName&lt;/span&gt;,
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#e6db74"&gt;&amp;#39;id&amp;#39;&lt;/span&gt; &lt;span style="color:#f92672"&gt;=&amp;gt;&lt;/span&gt; $id&lt;span style="color:#f92672"&gt;-&amp;gt;&lt;/span&gt;&lt;span style="color:#a6e22e"&gt;toString&lt;/span&gt;(),
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; ]);
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#66d9ef"&gt;if&lt;/span&gt; (&lt;span style="color:#f92672"&gt;!&lt;/span&gt;$response[&lt;span style="color:#e6db74"&gt;&amp;#39;found&amp;#39;&lt;/span&gt;]) {
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#66d9ef"&gt;throw&lt;/span&gt; &lt;span style="color:#66d9ef"&gt;new&lt;/span&gt; &lt;span style="color:#a6e22e"&gt;NotFoundException&lt;/span&gt;();
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; }
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; $data &lt;span style="color:#f92672"&gt;=&lt;/span&gt; $response[&lt;span style="color:#e6db74"&gt;&amp;#39;_source&amp;#39;&lt;/span&gt;];
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#66d9ef"&gt;return&lt;/span&gt; &lt;span style="color:#66d9ef"&gt;new&lt;/span&gt; &lt;span style="color:#a6e22e"&gt;Payment&lt;/span&gt;(
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#a6e22e"&gt;id&lt;/span&gt;&lt;span style="color:#f92672"&gt;:&lt;/span&gt; &lt;span style="color:#a6e22e"&gt;PaymentId&lt;/span&gt;&lt;span style="color:#f92672"&gt;::&lt;/span&gt;&lt;span style="color:#a6e22e"&gt;fromString&lt;/span&gt;($data[&lt;span style="color:#e6db74"&gt;&amp;#39;uuid&amp;#39;&lt;/span&gt;]),
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#a6e22e"&gt;amount&lt;/span&gt;&lt;span style="color:#f92672"&gt;:&lt;/span&gt; &lt;span style="color:#66d9ef"&gt;new&lt;/span&gt; &lt;span style="color:#a6e22e"&gt;Amount&lt;/span&gt;($data[&lt;span style="color:#e6db74"&gt;&amp;#39;amount&amp;#39;&lt;/span&gt;], &lt;span style="color:#a6e22e"&gt;Currencies&lt;/span&gt;&lt;span style="color:#f92672"&gt;::&lt;/span&gt;&lt;span style="color:#a6e22e"&gt;from&lt;/span&gt;($data[&lt;span style="color:#e6db74"&gt;&amp;#39;currency&amp;#39;&lt;/span&gt;])),
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#a6e22e"&gt;status&lt;/span&gt;&lt;span style="color:#f92672"&gt;:&lt;/span&gt; &lt;span style="color:#a6e22e"&gt;PaymentStatus&lt;/span&gt;&lt;span style="color:#f92672"&gt;::&lt;/span&gt;&lt;span style="color:#a6e22e"&gt;from&lt;/span&gt;($data[&lt;span style="color:#e6db74"&gt;&amp;#39;status&amp;#39;&lt;/span&gt;]),
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#a6e22e"&gt;authorizationCode&lt;/span&gt;&lt;span style="color:#f92672"&gt;:&lt;/span&gt; $data[&lt;span style="color:#e6db74"&gt;&amp;#39;authorization_code&amp;#39;&lt;/span&gt;] &lt;span style="color:#f92672"&gt;??&lt;/span&gt; &lt;span style="color:#66d9ef"&gt;null&lt;/span&gt;,
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#a6e22e"&gt;createdAt&lt;/span&gt;&lt;span style="color:#f92672"&gt;:&lt;/span&gt; &lt;span style="color:#66d9ef"&gt;new&lt;/span&gt; &lt;span style="color:#a6e22e"&gt;\DateTimeImmutable&lt;/span&gt;($data[&lt;span style="color:#e6db74"&gt;&amp;#39;created_at&amp;#39;&lt;/span&gt;]),
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#a6e22e"&gt;processedAt&lt;/span&gt;&lt;span style="color:#f92672"&gt;:&lt;/span&gt; $data[&lt;span style="color:#e6db74"&gt;&amp;#39;processed_at&amp;#39;&lt;/span&gt;] &lt;span style="color:#f92672"&gt;?&lt;/span&gt; &lt;span style="color:#66d9ef"&gt;new&lt;/span&gt; &lt;span style="color:#a6e22e"&gt;\DateTimeImmutable&lt;/span&gt;($data[&lt;span style="color:#e6db74"&gt;&amp;#39;processed_at&amp;#39;&lt;/span&gt;]) &lt;span style="color:#f92672"&gt;:&lt;/span&gt; &lt;span style="color:#66d9ef"&gt;null&lt;/span&gt;,
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#a6e22e"&gt;cancelledAt&lt;/span&gt;&lt;span style="color:#f92672"&gt;:&lt;/span&gt; $data[&lt;span style="color:#e6db74"&gt;&amp;#39;cancelled_at&amp;#39;&lt;/span&gt;] &lt;span style="color:#f92672"&gt;?&lt;/span&gt; &lt;span style="color:#66d9ef"&gt;new&lt;/span&gt; &lt;span style="color:#a6e22e"&gt;\DateTimeImmutable&lt;/span&gt;($data[&lt;span style="color:#e6db74"&gt;&amp;#39;cancelled_at&amp;#39;&lt;/span&gt;]) &lt;span style="color:#f92672"&gt;:&lt;/span&gt; &lt;span style="color:#66d9ef"&gt;null&lt;/span&gt;,
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#a6e22e"&gt;version&lt;/span&gt;&lt;span style="color:#f92672"&gt;:&lt;/span&gt; $data[&lt;span style="color:#e6db74"&gt;&amp;#39;version&amp;#39;&lt;/span&gt;]
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; );
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; }
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#66d9ef"&gt;public&lt;/span&gt; &lt;span style="color:#66d9ef"&gt;function&lt;/span&gt; &lt;span style="color:#a6e22e"&gt;save&lt;/span&gt;(&lt;span style="color:#a6e22e"&gt;Payment&lt;/span&gt; $payment)&lt;span style="color:#f92672"&gt;:&lt;/span&gt; &lt;span style="color:#a6e22e"&gt;void&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; {
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; $events &lt;span style="color:#f92672"&gt;=&lt;/span&gt; $payment&lt;span style="color:#f92672"&gt;-&amp;gt;&lt;/span&gt;&lt;span style="color:#a6e22e"&gt;releaseEvents&lt;/span&gt;();
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#75715e"&gt;// Sauvegarder dans ElasticSearch
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#75715e"&gt;&lt;/span&gt; $this&lt;span style="color:#f92672"&gt;-&amp;gt;&lt;/span&gt;&lt;span style="color:#a6e22e"&gt;saveToElasticSearch&lt;/span&gt;($payment);
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#75715e"&gt;// √âmettre les √©v√©nements
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#75715e"&gt;&lt;/span&gt; &lt;span style="color:#66d9ef"&gt;foreach&lt;/span&gt; ($events &lt;span style="color:#66d9ef"&gt;as&lt;/span&gt; $event) {
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; $this&lt;span style="color:#f92672"&gt;-&amp;gt;&lt;/span&gt;&lt;span style="color:#a6e22e"&gt;eventBus&lt;/span&gt;&lt;span style="color:#f92672"&gt;-&amp;gt;&lt;/span&gt;&lt;span style="color:#a6e22e"&gt;emit&lt;/span&gt;($event);
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; }
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; }
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#66d9ef"&gt;private&lt;/span&gt; &lt;span style="color:#66d9ef"&gt;function&lt;/span&gt; &lt;span style="color:#a6e22e"&gt;saveToElasticSearch&lt;/span&gt;(&lt;span style="color:#a6e22e"&gt;Payment&lt;/span&gt; $payment)&lt;span style="color:#f92672"&gt;:&lt;/span&gt; &lt;span style="color:#a6e22e"&gt;void&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; {
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; $data &lt;span style="color:#f92672"&gt;=&lt;/span&gt; [
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#e6db74"&gt;&amp;#39;uuid&amp;#39;&lt;/span&gt; &lt;span style="color:#f92672"&gt;=&amp;gt;&lt;/span&gt; $payment&lt;span style="color:#f92672"&gt;-&amp;gt;&lt;/span&gt;&lt;span style="color:#a6e22e"&gt;getId&lt;/span&gt;()&lt;span style="color:#f92672"&gt;-&amp;gt;&lt;/span&gt;&lt;span style="color:#a6e22e"&gt;toString&lt;/span&gt;(),
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#e6db74"&gt;&amp;#39;amount&amp;#39;&lt;/span&gt; &lt;span style="color:#f92672"&gt;=&amp;gt;&lt;/span&gt; $payment&lt;span style="color:#f92672"&gt;-&amp;gt;&lt;/span&gt;&lt;span style="color:#a6e22e"&gt;getAmount&lt;/span&gt;()&lt;span style="color:#f92672"&gt;-&amp;gt;&lt;/span&gt;&lt;span style="color:#a6e22e"&gt;getValue&lt;/span&gt;(),
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#e6db74"&gt;&amp;#39;currency&amp;#39;&lt;/span&gt; &lt;span style="color:#f92672"&gt;=&amp;gt;&lt;/span&gt; $payment&lt;span style="color:#f92672"&gt;-&amp;gt;&lt;/span&gt;&lt;span style="color:#a6e22e"&gt;getAmount&lt;/span&gt;()&lt;span style="color:#f92672"&gt;-&amp;gt;&lt;/span&gt;&lt;span style="color:#a6e22e"&gt;getCurrency&lt;/span&gt;()&lt;span style="color:#f92672"&gt;-&amp;gt;&lt;/span&gt;&lt;span style="color:#a6e22e"&gt;value&lt;/span&gt;,
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#e6db74"&gt;&amp;#39;status&amp;#39;&lt;/span&gt; &lt;span style="color:#f92672"&gt;=&amp;gt;&lt;/span&gt; $payment&lt;span style="color:#f92672"&gt;-&amp;gt;&lt;/span&gt;&lt;span style="color:#a6e22e"&gt;getStatus&lt;/span&gt;()&lt;span style="color:#f92672"&gt;-&amp;gt;&lt;/span&gt;&lt;span style="color:#a6e22e"&gt;value&lt;/span&gt;,
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#e6db74"&gt;&amp;#39;authorization_code&amp;#39;&lt;/span&gt; &lt;span style="color:#f92672"&gt;=&amp;gt;&lt;/span&gt; $payment&lt;span style="color:#f92672"&gt;-&amp;gt;&lt;/span&gt;&lt;span style="color:#a6e22e"&gt;getAuthorizationCode&lt;/span&gt;(),
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#e6db74"&gt;&amp;#39;created_at&amp;#39;&lt;/span&gt; &lt;span style="color:#f92672"&gt;=&amp;gt;&lt;/span&gt; $payment&lt;span style="color:#f92672"&gt;-&amp;gt;&lt;/span&gt;&lt;span style="color:#a6e22e"&gt;getCreatedAt&lt;/span&gt;()&lt;span style="color:#f92672"&gt;-&amp;gt;&lt;/span&gt;&lt;span style="color:#a6e22e"&gt;format&lt;/span&gt;(&lt;span style="color:#e6db74"&gt;&amp;#39;Y-m-d H:i:s&amp;#39;&lt;/span&gt;),
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#e6db74"&gt;&amp;#39;processed_at&amp;#39;&lt;/span&gt; &lt;span style="color:#f92672"&gt;=&amp;gt;&lt;/span&gt; $payment&lt;span style="color:#f92672"&gt;-&amp;gt;&lt;/span&gt;&lt;span style="color:#a6e22e"&gt;getProcessedAt&lt;/span&gt;()&lt;span style="color:#f92672"&gt;?-&amp;gt;&lt;/span&gt;&lt;span style="color:#a6e22e"&gt;format&lt;/span&gt;(&lt;span style="color:#e6db74"&gt;&amp;#39;Y-m-d H:i:s&amp;#39;&lt;/span&gt;),
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#e6db74"&gt;&amp;#39;cancelled_at&amp;#39;&lt;/span&gt; &lt;span style="color:#f92672"&gt;=&amp;gt;&lt;/span&gt; $payment&lt;span style="color:#f92672"&gt;-&amp;gt;&lt;/span&gt;&lt;span style="color:#a6e22e"&gt;getCancelledAt&lt;/span&gt;()&lt;span style="color:#f92672"&gt;?-&amp;gt;&lt;/span&gt;&lt;span style="color:#a6e22e"&gt;format&lt;/span&gt;(&lt;span style="color:#e6db74"&gt;&amp;#39;Y-m-d H:i:s&amp;#39;&lt;/span&gt;),
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#e6db74"&gt;&amp;#39;version&amp;#39;&lt;/span&gt; &lt;span style="color:#f92672"&gt;=&amp;gt;&lt;/span&gt; $payment&lt;span style="color:#f92672"&gt;-&amp;gt;&lt;/span&gt;&lt;span style="color:#a6e22e"&gt;getVersion&lt;/span&gt;(),
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; ];
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; $this&lt;span style="color:#f92672"&gt;-&amp;gt;&lt;/span&gt;&lt;span style="color:#a6e22e"&gt;elasticsearchClient&lt;/span&gt;&lt;span style="color:#f92672"&gt;-&amp;gt;&lt;/span&gt;&lt;span style="color:#a6e22e"&gt;index&lt;/span&gt;([
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#e6db74"&gt;&amp;#39;index&amp;#39;&lt;/span&gt; &lt;span style="color:#f92672"&gt;=&amp;gt;&lt;/span&gt; $this&lt;span style="color:#f92672"&gt;-&amp;gt;&lt;/span&gt;&lt;span style="color:#a6e22e"&gt;indexName&lt;/span&gt;,
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#e6db74"&gt;&amp;#39;id&amp;#39;&lt;/span&gt; &lt;span style="color:#f92672"&gt;=&amp;gt;&lt;/span&gt; $payment&lt;span style="color:#f92672"&gt;-&amp;gt;&lt;/span&gt;&lt;span style="color:#a6e22e"&gt;getId&lt;/span&gt;()&lt;span style="color:#f92672"&gt;-&amp;gt;&lt;/span&gt;&lt;span style="color:#a6e22e"&gt;toString&lt;/span&gt;(),
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#e6db74"&gt;&amp;#39;body&amp;#39;&lt;/span&gt; &lt;span style="color:#f92672"&gt;=&amp;gt;&lt;/span&gt; $data,
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; ]);
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; }
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#66d9ef"&gt;public&lt;/span&gt; &lt;span style="color:#66d9ef"&gt;function&lt;/span&gt; &lt;span style="color:#a6e22e"&gt;search&lt;/span&gt;(&lt;span style="color:#66d9ef"&gt;array&lt;/span&gt; $criteria)&lt;span style="color:#f92672"&gt;:&lt;/span&gt; &lt;span style="color:#66d9ef"&gt;array&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; {
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; $query &lt;span style="color:#f92672"&gt;=&lt;/span&gt; [
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#e6db74"&gt;&amp;#39;bool&amp;#39;&lt;/span&gt; &lt;span style="color:#f92672"&gt;=&amp;gt;&lt;/span&gt; [
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#e6db74"&gt;&amp;#39;must&amp;#39;&lt;/span&gt; &lt;span style="color:#f92672"&gt;=&amp;gt;&lt;/span&gt; [],
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; ],
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; ];
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#66d9ef"&gt;if&lt;/span&gt; (&lt;span style="color:#a6e22e"&gt;isset&lt;/span&gt;($criteria[&lt;span style="color:#e6db74"&gt;&amp;#39;status&amp;#39;&lt;/span&gt;])) {
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; $query[&lt;span style="color:#e6db74"&gt;&amp;#39;bool&amp;#39;&lt;/span&gt;][&lt;span style="color:#e6db74"&gt;&amp;#39;must&amp;#39;&lt;/span&gt;][] &lt;span style="color:#f92672"&gt;=&lt;/span&gt; [
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#e6db74"&gt;&amp;#39;term&amp;#39;&lt;/span&gt; &lt;span style="color:#f92672"&gt;=&amp;gt;&lt;/span&gt; [&lt;span style="color:#e6db74"&gt;&amp;#39;status&amp;#39;&lt;/span&gt; &lt;span style="color:#f92672"&gt;=&amp;gt;&lt;/span&gt; $criteria[&lt;span style="color:#e6db74"&gt;&amp;#39;status&amp;#39;&lt;/span&gt;]],
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; ];
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; }
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#66d9ef"&gt;if&lt;/span&gt; (&lt;span style="color:#a6e22e"&gt;isset&lt;/span&gt;($criteria[&lt;span style="color:#e6db74"&gt;&amp;#39;organization_id&amp;#39;&lt;/span&gt;])) {
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; $query[&lt;span style="color:#e6db74"&gt;&amp;#39;bool&amp;#39;&lt;/span&gt;][&lt;span style="color:#e6db74"&gt;&amp;#39;must&amp;#39;&lt;/span&gt;][] &lt;span style="color:#f92672"&gt;=&lt;/span&gt; [
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#e6db74"&gt;&amp;#39;term&amp;#39;&lt;/span&gt; &lt;span style="color:#f92672"&gt;=&amp;gt;&lt;/span&gt; [&lt;span style="color:#e6db74"&gt;&amp;#39;organization_id&amp;#39;&lt;/span&gt; &lt;span style="color:#f92672"&gt;=&amp;gt;&lt;/span&gt; $criteria[&lt;span style="color:#e6db74"&gt;&amp;#39;organization_id&amp;#39;&lt;/span&gt;]],
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; ];
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; }
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#66d9ef"&gt;if&lt;/span&gt; (&lt;span style="color:#a6e22e"&gt;isset&lt;/span&gt;($criteria[&lt;span style="color:#e6db74"&gt;&amp;#39;date_from&amp;#39;&lt;/span&gt;])) {
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; $query[&lt;span style="color:#e6db74"&gt;&amp;#39;bool&amp;#39;&lt;/span&gt;][&lt;span style="color:#e6db74"&gt;&amp;#39;must&amp;#39;&lt;/span&gt;][] &lt;span style="color:#f92672"&gt;=&lt;/span&gt; [
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#e6db74"&gt;&amp;#39;range&amp;#39;&lt;/span&gt; &lt;span style="color:#f92672"&gt;=&amp;gt;&lt;/span&gt; [
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#e6db74"&gt;&amp;#39;created_at&amp;#39;&lt;/span&gt; &lt;span style="color:#f92672"&gt;=&amp;gt;&lt;/span&gt; [
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#e6db74"&gt;&amp;#39;gte&amp;#39;&lt;/span&gt; &lt;span style="color:#f92672"&gt;=&amp;gt;&lt;/span&gt; $criteria[&lt;span style="color:#e6db74"&gt;&amp;#39;date_from&amp;#39;&lt;/span&gt;],
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; ],
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; ],
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; ];
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; }
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#66d9ef"&gt;if&lt;/span&gt; (&lt;span style="color:#a6e22e"&gt;isset&lt;/span&gt;($criteria[&lt;span style="color:#e6db74"&gt;&amp;#39;date_to&amp;#39;&lt;/span&gt;])) {
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; $query[&lt;span style="color:#e6db74"&gt;&amp;#39;bool&amp;#39;&lt;/span&gt;][&lt;span style="color:#e6db74"&gt;&amp;#39;must&amp;#39;&lt;/span&gt;][] &lt;span style="color:#f92672"&gt;=&lt;/span&gt; [
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#e6db74"&gt;&amp;#39;range&amp;#39;&lt;/span&gt; &lt;span style="color:#f92672"&gt;=&amp;gt;&lt;/span&gt; [
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#e6db74"&gt;&amp;#39;created_at&amp;#39;&lt;/span&gt; &lt;span style="color:#f92672"&gt;=&amp;gt;&lt;/span&gt; [
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#e6db74"&gt;&amp;#39;lte&amp;#39;&lt;/span&gt; &lt;span style="color:#f92672"&gt;=&amp;gt;&lt;/span&gt; $criteria[&lt;span style="color:#e6db74"&gt;&amp;#39;date_to&amp;#39;&lt;/span&gt;],
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; ],
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; ],
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; ];
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; }
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; $response &lt;span style="color:#f92672"&gt;=&lt;/span&gt; $this&lt;span style="color:#f92672"&gt;-&amp;gt;&lt;/span&gt;&lt;span style="color:#a6e22e"&gt;elasticsearchClient&lt;/span&gt;&lt;span style="color:#f92672"&gt;-&amp;gt;&lt;/span&gt;&lt;span style="color:#a6e22e"&gt;search&lt;/span&gt;([
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#e6db74"&gt;&amp;#39;index&amp;#39;&lt;/span&gt; &lt;span style="color:#f92672"&gt;=&amp;gt;&lt;/span&gt; $this&lt;span style="color:#f92672"&gt;-&amp;gt;&lt;/span&gt;&lt;span style="color:#a6e22e"&gt;indexName&lt;/span&gt;,
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#e6db74"&gt;&amp;#39;body&amp;#39;&lt;/span&gt; &lt;span style="color:#f92672"&gt;=&amp;gt;&lt;/span&gt; [
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#e6db74"&gt;&amp;#39;query&amp;#39;&lt;/span&gt; &lt;span style="color:#f92672"&gt;=&amp;gt;&lt;/span&gt; $query,
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#e6db74"&gt;&amp;#39;sort&amp;#39;&lt;/span&gt; &lt;span style="color:#f92672"&gt;=&amp;gt;&lt;/span&gt; [
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; [&lt;span style="color:#e6db74"&gt;&amp;#39;created_at&amp;#39;&lt;/span&gt; &lt;span style="color:#f92672"&gt;=&amp;gt;&lt;/span&gt; [&lt;span style="color:#e6db74"&gt;&amp;#39;order&amp;#39;&lt;/span&gt; &lt;span style="color:#f92672"&gt;=&amp;gt;&lt;/span&gt; &lt;span style="color:#e6db74"&gt;&amp;#39;desc&amp;#39;&lt;/span&gt;]],
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; ],
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; ],
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; ]);
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; $payments &lt;span style="color:#f92672"&gt;=&lt;/span&gt; [];
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#66d9ef"&gt;foreach&lt;/span&gt; ($response[&lt;span style="color:#e6db74"&gt;&amp;#39;hits&amp;#39;&lt;/span&gt;][&lt;span style="color:#e6db74"&gt;&amp;#39;hits&amp;#39;&lt;/span&gt;] &lt;span style="color:#66d9ef"&gt;as&lt;/span&gt; $hit) {
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; $data &lt;span style="color:#f92672"&gt;=&lt;/span&gt; $hit[&lt;span style="color:#e6db74"&gt;&amp;#39;_source&amp;#39;&lt;/span&gt;];
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; $payments[] &lt;span style="color:#f92672"&gt;=&lt;/span&gt; &lt;span style="color:#66d9ef"&gt;new&lt;/span&gt; &lt;span style="color:#a6e22e"&gt;Payment&lt;/span&gt;(
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#a6e22e"&gt;id&lt;/span&gt;&lt;span style="color:#f92672"&gt;:&lt;/span&gt; &lt;span style="color:#a6e22e"&gt;PaymentId&lt;/span&gt;&lt;span style="color:#f92672"&gt;::&lt;/span&gt;&lt;span style="color:#a6e22e"&gt;fromString&lt;/span&gt;($data[&lt;span style="color:#e6db74"&gt;&amp;#39;uuid&amp;#39;&lt;/span&gt;]),
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#a6e22e"&gt;amount&lt;/span&gt;&lt;span style="color:#f92672"&gt;:&lt;/span&gt; &lt;span style="color:#66d9ef"&gt;new&lt;/span&gt; &lt;span style="color:#a6e22e"&gt;Amount&lt;/span&gt;($data[&lt;span style="color:#e6db74"&gt;&amp;#39;amount&amp;#39;&lt;/span&gt;], &lt;span style="color:#a6e22e"&gt;Currencies&lt;/span&gt;&lt;span style="color:#f92672"&gt;::&lt;/span&gt;&lt;span style="color:#a6e22e"&gt;from&lt;/span&gt;($data[&lt;span style="color:#e6db74"&gt;&amp;#39;currency&amp;#39;&lt;/span&gt;])),
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#a6e22e"&gt;status&lt;/span&gt;&lt;span style="color:#f92672"&gt;:&lt;/span&gt; &lt;span style="color:#a6e22e"&gt;PaymentStatus&lt;/span&gt;&lt;span style="color:#f92672"&gt;::&lt;/span&gt;&lt;span style="color:#a6e22e"&gt;from&lt;/span&gt;($data[&lt;span style="color:#e6db74"&gt;&amp;#39;status&amp;#39;&lt;/span&gt;]),
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#a6e22e"&gt;authorizationCode&lt;/span&gt;&lt;span style="color:#f92672"&gt;:&lt;/span&gt; $data[&lt;span style="color:#e6db74"&gt;&amp;#39;authorization_code&amp;#39;&lt;/span&gt;] &lt;span style="color:#f92672"&gt;??&lt;/span&gt; &lt;span style="color:#66d9ef"&gt;null&lt;/span&gt;,
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#a6e22e"&gt;createdAt&lt;/span&gt;&lt;span style="color:#f92672"&gt;:&lt;/span&gt; &lt;span style="color:#66d9ef"&gt;new&lt;/span&gt; &lt;span style="color:#a6e22e"&gt;\DateTimeImmutable&lt;/span&gt;($data[&lt;span style="color:#e6db74"&gt;&amp;#39;created_at&amp;#39;&lt;/span&gt;]),
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#a6e22e"&gt;processedAt&lt;/span&gt;&lt;span style="color:#f92672"&gt;:&lt;/span&gt; $data[&lt;span style="color:#e6db74"&gt;&amp;#39;processed_at&amp;#39;&lt;/span&gt;] &lt;span style="color:#f92672"&gt;?&lt;/span&gt; &lt;span style="color:#66d9ef"&gt;new&lt;/span&gt; &lt;span style="color:#a6e22e"&gt;\DateTimeImmutable&lt;/span&gt;($data[&lt;span style="color:#e6db74"&gt;&amp;#39;processed_at&amp;#39;&lt;/span&gt;]) &lt;span style="color:#f92672"&gt;:&lt;/span&gt; &lt;span style="color:#66d9ef"&gt;null&lt;/span&gt;,
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#a6e22e"&gt;cancelledAt&lt;/span&gt;&lt;span style="color:#f92672"&gt;:&lt;/span&gt; $data[&lt;span style="color:#e6db74"&gt;&amp;#39;cancelled_at&amp;#39;&lt;/span&gt;] &lt;span style="color:#f92672"&gt;?&lt;/span&gt; &lt;span style="color:#66d9ef"&gt;new&lt;/span&gt; &lt;span style="color:#a6e22e"&gt;\DateTimeImmutable&lt;/span&gt;($data[&lt;span style="color:#e6db74"&gt;&amp;#39;cancelled_at&amp;#39;&lt;/span&gt;]) &lt;span style="color:#f92672"&gt;:&lt;/span&gt; &lt;span style="color:#66d9ef"&gt;null&lt;/span&gt;,
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#a6e22e"&gt;version&lt;/span&gt;&lt;span style="color:#f92672"&gt;:&lt;/span&gt; $data[&lt;span style="color:#e6db74"&gt;&amp;#39;version&amp;#39;&lt;/span&gt;]
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; );
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; }
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#66d9ef"&gt;return&lt;/span&gt; $payments;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; }
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h3 id="7-stockage-mongodb---approche-classique"&gt;7. Stockage MongoDB - Approche Classique&lt;/h3&gt;
&lt;h4 id="exemple--repository-de-paiement-mongodb"&gt;Exemple : Repository de Paiement MongoDB&lt;/h4&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"&gt;&lt;code class="language-php" data-lang="php"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#75715e"&gt;// Repository de Paiement MongoDB - Projet Gyroscops Cloud
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#75715e"&gt;&lt;/span&gt;&lt;span style="color:#66d9ef"&gt;final&lt;/span&gt; &lt;span style="color:#66d9ef"&gt;class&lt;/span&gt; &lt;span style="color:#a6e22e"&gt;MongoPaymentRepository&lt;/span&gt; &lt;span style="color:#66d9ef"&gt;implements&lt;/span&gt; &lt;span style="color:#a6e22e"&gt;PaymentRepositoryInterface&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;{
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#66d9ef"&gt;public&lt;/span&gt; &lt;span style="color:#66d9ef"&gt;function&lt;/span&gt; &lt;span style="color:#a6e22e"&gt;__construct&lt;/span&gt;(
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#66d9ef"&gt;private&lt;/span&gt; &lt;span style="color:#a6e22e"&gt;Manager&lt;/span&gt; $mongoManager,
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#66d9ef"&gt;private&lt;/span&gt; &lt;span style="color:#a6e22e"&gt;string&lt;/span&gt; $databaseName,
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#66d9ef"&gt;private&lt;/span&gt; &lt;span style="color:#a6e22e"&gt;string&lt;/span&gt; $collectionName,
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#66d9ef"&gt;private&lt;/span&gt; &lt;span style="color:#a6e22e"&gt;EventBusInterface&lt;/span&gt; $eventBus,
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; ) {
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; }
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#66d9ef"&gt;public&lt;/span&gt; &lt;span style="color:#66d9ef"&gt;function&lt;/span&gt; &lt;span style="color:#a6e22e"&gt;get&lt;/span&gt;(&lt;span style="color:#a6e22e"&gt;PaymentId&lt;/span&gt; $id)&lt;span style="color:#f92672"&gt;:&lt;/span&gt; &lt;span style="color:#a6e22e"&gt;Payment&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; {
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; $collection &lt;span style="color:#f92672"&gt;=&lt;/span&gt; $this&lt;span style="color:#f92672"&gt;-&amp;gt;&lt;/span&gt;&lt;span style="color:#a6e22e"&gt;getCollection&lt;/span&gt;();
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; $document &lt;span style="color:#f92672"&gt;=&lt;/span&gt; $collection&lt;span style="color:#f92672"&gt;-&amp;gt;&lt;/span&gt;&lt;span style="color:#a6e22e"&gt;findOne&lt;/span&gt;([&lt;span style="color:#e6db74"&gt;&amp;#39;uuid&amp;#39;&lt;/span&gt; &lt;span style="color:#f92672"&gt;=&amp;gt;&lt;/span&gt; $id&lt;span style="color:#f92672"&gt;-&amp;gt;&lt;/span&gt;&lt;span style="color:#a6e22e"&gt;toString&lt;/span&gt;()]);
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#66d9ef"&gt;if&lt;/span&gt; (&lt;span style="color:#f92672"&gt;!&lt;/span&gt;$document) {
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#66d9ef"&gt;throw&lt;/span&gt; &lt;span style="color:#66d9ef"&gt;new&lt;/span&gt; &lt;span style="color:#a6e22e"&gt;NotFoundException&lt;/span&gt;();
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; }
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#66d9ef"&gt;return&lt;/span&gt; $this&lt;span style="color:#f92672"&gt;-&amp;gt;&lt;/span&gt;&lt;span style="color:#a6e22e"&gt;documentToPayment&lt;/span&gt;($document);
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; }
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#66d9ef"&gt;public&lt;/span&gt; &lt;span style="color:#66d9ef"&gt;function&lt;/span&gt; &lt;span style="color:#a6e22e"&gt;save&lt;/span&gt;(&lt;span style="color:#a6e22e"&gt;Payment&lt;/span&gt; $payment)&lt;span style="color:#f92672"&gt;:&lt;/span&gt; &lt;span style="color:#a6e22e"&gt;void&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; {
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; $events &lt;span style="color:#f92672"&gt;=&lt;/span&gt; $payment&lt;span style="color:#f92672"&gt;-&amp;gt;&lt;/span&gt;&lt;span style="color:#a6e22e"&gt;releaseEvents&lt;/span&gt;();
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#75715e"&gt;// Sauvegarder dans MongoDB
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#75715e"&gt;&lt;/span&gt; $this&lt;span style="color:#f92672"&gt;-&amp;gt;&lt;/span&gt;&lt;span style="color:#a6e22e"&gt;saveToMongo&lt;/span&gt;($payment);
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#75715e"&gt;// √âmettre les √©v√©nements
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#75715e"&gt;&lt;/span&gt; &lt;span style="color:#66d9ef"&gt;foreach&lt;/span&gt; ($events &lt;span style="color:#66d9ef"&gt;as&lt;/span&gt; $event) {
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; $this&lt;span style="color:#f92672"&gt;-&amp;gt;&lt;/span&gt;&lt;span style="color:#a6e22e"&gt;eventBus&lt;/span&gt;&lt;span style="color:#f92672"&gt;-&amp;gt;&lt;/span&gt;&lt;span style="color:#a6e22e"&gt;emit&lt;/span&gt;($event);
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; }
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; }
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#66d9ef"&gt;private&lt;/span&gt; &lt;span style="color:#66d9ef"&gt;function&lt;/span&gt; &lt;span style="color:#a6e22e"&gt;saveToMongo&lt;/span&gt;(&lt;span style="color:#a6e22e"&gt;Payment&lt;/span&gt; $payment)&lt;span style="color:#f92672"&gt;:&lt;/span&gt; &lt;span style="color:#a6e22e"&gt;void&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; {
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; $collection &lt;span style="color:#f92672"&gt;=&lt;/span&gt; $this&lt;span style="color:#f92672"&gt;-&amp;gt;&lt;/span&gt;&lt;span style="color:#a6e22e"&gt;getCollection&lt;/span&gt;();
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; 
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; $document &lt;span style="color:#f92672"&gt;=&lt;/span&gt; [
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#e6db74"&gt;&amp;#39;uuid&amp;#39;&lt;/span&gt; &lt;span style="color:#f92672"&gt;=&amp;gt;&lt;/span&gt; $payment&lt;span style="color:#f92672"&gt;-&amp;gt;&lt;/span&gt;&lt;span style="color:#a6e22e"&gt;getId&lt;/span&gt;()&lt;span style="color:#f92672"&gt;-&amp;gt;&lt;/span&gt;&lt;span style="color:#a6e22e"&gt;toString&lt;/span&gt;(),
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#e6db74"&gt;&amp;#39;amount&amp;#39;&lt;/span&gt; &lt;span style="color:#f92672"&gt;=&amp;gt;&lt;/span&gt; $payment&lt;span style="color:#f92672"&gt;-&amp;gt;&lt;/span&gt;&lt;span style="color:#a6e22e"&gt;getAmount&lt;/span&gt;()&lt;span style="color:#f92672"&gt;-&amp;gt;&lt;/span&gt;&lt;span style="color:#a6e22e"&gt;getValue&lt;/span&gt;(),
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#e6db74"&gt;&amp;#39;currency&amp;#39;&lt;/span&gt; &lt;span style="color:#f92672"&gt;=&amp;gt;&lt;/span&gt; $payment&lt;span style="color:#f92672"&gt;-&amp;gt;&lt;/span&gt;&lt;span style="color:#a6e22e"&gt;getAmount&lt;/span&gt;()&lt;span style="color:#f92672"&gt;-&amp;gt;&lt;/span&gt;&lt;span style="color:#a6e22e"&gt;getCurrency&lt;/span&gt;()&lt;span style="color:#f92672"&gt;-&amp;gt;&lt;/span&gt;&lt;span style="color:#a6e22e"&gt;value&lt;/span&gt;,
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#e6db74"&gt;&amp;#39;status&amp;#39;&lt;/span&gt; &lt;span style="color:#f92672"&gt;=&amp;gt;&lt;/span&gt; $payment&lt;span style="color:#f92672"&gt;-&amp;gt;&lt;/span&gt;&lt;span style="color:#a6e22e"&gt;getStatus&lt;/span&gt;()&lt;span style="color:#f92672"&gt;-&amp;gt;&lt;/span&gt;&lt;span style="color:#a6e22e"&gt;value&lt;/span&gt;,
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#e6db74"&gt;&amp;#39;authorization_code&amp;#39;&lt;/span&gt; &lt;span style="color:#f92672"&gt;=&amp;gt;&lt;/span&gt; $payment&lt;span style="color:#f92672"&gt;-&amp;gt;&lt;/span&gt;&lt;span style="color:#a6e22e"&gt;getAuthorizationCode&lt;/span&gt;(),
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#e6db74"&gt;&amp;#39;created_at&amp;#39;&lt;/span&gt; &lt;span style="color:#f92672"&gt;=&amp;gt;&lt;/span&gt; $payment&lt;span style="color:#f92672"&gt;-&amp;gt;&lt;/span&gt;&lt;span style="color:#a6e22e"&gt;getCreatedAt&lt;/span&gt;()&lt;span style="color:#f92672"&gt;-&amp;gt;&lt;/span&gt;&lt;span style="color:#a6e22e"&gt;format&lt;/span&gt;(&lt;span style="color:#e6db74"&gt;&amp;#39;Y-m-d H:i:s&amp;#39;&lt;/span&gt;),
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#e6db74"&gt;&amp;#39;processed_at&amp;#39;&lt;/span&gt; &lt;span style="color:#f92672"&gt;=&amp;gt;&lt;/span&gt; $payment&lt;span style="color:#f92672"&gt;-&amp;gt;&lt;/span&gt;&lt;span style="color:#a6e22e"&gt;getProcessedAt&lt;/span&gt;()&lt;span style="color:#f92672"&gt;?-&amp;gt;&lt;/span&gt;&lt;span style="color:#a6e22e"&gt;format&lt;/span&gt;(&lt;span style="color:#e6db74"&gt;&amp;#39;Y-m-d H:i:s&amp;#39;&lt;/span&gt;),
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#e6db74"&gt;&amp;#39;cancelled_at&amp;#39;&lt;/span&gt; &lt;span style="color:#f92672"&gt;=&amp;gt;&lt;/span&gt; $payment&lt;span style="color:#f92672"&gt;-&amp;gt;&lt;/span&gt;&lt;span style="color:#a6e22e"&gt;getCancelledAt&lt;/span&gt;()&lt;span style="color:#f92672"&gt;?-&amp;gt;&lt;/span&gt;&lt;span style="color:#a6e22e"&gt;format&lt;/span&gt;(&lt;span style="color:#e6db74"&gt;&amp;#39;Y-m-d H:i:s&amp;#39;&lt;/span&gt;),
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#e6db74"&gt;&amp;#39;version&amp;#39;&lt;/span&gt; &lt;span style="color:#f92672"&gt;=&amp;gt;&lt;/span&gt; $payment&lt;span style="color:#f92672"&gt;-&amp;gt;&lt;/span&gt;&lt;span style="color:#a6e22e"&gt;getVersion&lt;/span&gt;(),
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; ];
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; $collection&lt;span style="color:#f92672"&gt;-&amp;gt;&lt;/span&gt;&lt;span style="color:#a6e22e"&gt;replaceOne&lt;/span&gt;(
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; [&lt;span style="color:#e6db74"&gt;&amp;#39;uuid&amp;#39;&lt;/span&gt; &lt;span style="color:#f92672"&gt;=&amp;gt;&lt;/span&gt; $payment&lt;span style="color:#f92672"&gt;-&amp;gt;&lt;/span&gt;&lt;span style="color:#a6e22e"&gt;getId&lt;/span&gt;()&lt;span style="color:#f92672"&gt;-&amp;gt;&lt;/span&gt;&lt;span style="color:#a6e22e"&gt;toString&lt;/span&gt;()],
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; $document,
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; [&lt;span style="color:#e6db74"&gt;&amp;#39;upsert&amp;#39;&lt;/span&gt; &lt;span style="color:#f92672"&gt;=&amp;gt;&lt;/span&gt; &lt;span style="color:#66d9ef"&gt;true&lt;/span&gt;]
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; );
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; }
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#66d9ef"&gt;private&lt;/span&gt; &lt;span style="color:#66d9ef"&gt;function&lt;/span&gt; &lt;span style="color:#a6e22e"&gt;documentToPayment&lt;/span&gt;(&lt;span style="color:#66d9ef"&gt;array&lt;/span&gt; $document)&lt;span style="color:#f92672"&gt;:&lt;/span&gt; &lt;span style="color:#a6e22e"&gt;Payment&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; {
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#66d9ef"&gt;return&lt;/span&gt; &lt;span style="color:#66d9ef"&gt;new&lt;/span&gt; &lt;span style="color:#a6e22e"&gt;Payment&lt;/span&gt;(
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#a6e22e"&gt;id&lt;/span&gt;&lt;span style="color:#f92672"&gt;:&lt;/span&gt; &lt;span style="color:#a6e22e"&gt;PaymentId&lt;/span&gt;&lt;span style="color:#f92672"&gt;::&lt;/span&gt;&lt;span style="color:#a6e22e"&gt;fromString&lt;/span&gt;($document[&lt;span style="color:#e6db74"&gt;&amp;#39;uuid&amp;#39;&lt;/span&gt;]),
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#a6e22e"&gt;amount&lt;/span&gt;&lt;span style="color:#f92672"&gt;:&lt;/span&gt; &lt;span style="color:#66d9ef"&gt;new&lt;/span&gt; &lt;span style="color:#a6e22e"&gt;Amount&lt;/span&gt;($document[&lt;span style="color:#e6db74"&gt;&amp;#39;amount&amp;#39;&lt;/span&gt;], &lt;span style="color:#a6e22e"&gt;Currencies&lt;/span&gt;&lt;span style="color:#f92672"&gt;::&lt;/span&gt;&lt;span style="color:#a6e22e"&gt;from&lt;/span&gt;($document[&lt;span style="color:#e6db74"&gt;&amp;#39;currency&amp;#39;&lt;/span&gt;])),
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#a6e22e"&gt;status&lt;/span&gt;&lt;span style="color:#f92672"&gt;:&lt;/span&gt; &lt;span style="color:#a6e22e"&gt;PaymentStatus&lt;/span&gt;&lt;span style="color:#f92672"&gt;::&lt;/span&gt;&lt;span style="color:#a6e22e"&gt;from&lt;/span&gt;($document[&lt;span style="color:#e6db74"&gt;&amp;#39;status&amp;#39;&lt;/span&gt;]),
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#a6e22e"&gt;authorizationCode&lt;/span&gt;&lt;span style="color:#f92672"&gt;:&lt;/span&gt; $document[&lt;span style="color:#e6db74"&gt;&amp;#39;authorization_code&amp;#39;&lt;/span&gt;] &lt;span style="color:#f92672"&gt;??&lt;/span&gt; &lt;span style="color:#66d9ef"&gt;null&lt;/span&gt;,
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#a6e22e"&gt;createdAt&lt;/span&gt;&lt;span style="color:#f92672"&gt;:&lt;/span&gt; &lt;span style="color:#66d9ef"&gt;new&lt;/span&gt; &lt;span style="color:#a6e22e"&gt;\DateTimeImmutable&lt;/span&gt;($document[&lt;span style="color:#e6db74"&gt;&amp;#39;created_at&amp;#39;&lt;/span&gt;]),
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#a6e22e"&gt;processedAt&lt;/span&gt;&lt;span style="color:#f92672"&gt;:&lt;/span&gt; $document[&lt;span style="color:#e6db74"&gt;&amp;#39;processed_at&amp;#39;&lt;/span&gt;] &lt;span style="color:#f92672"&gt;?&lt;/span&gt; &lt;span style="color:#66d9ef"&gt;new&lt;/span&gt; &lt;span style="color:#a6e22e"&gt;\DateTimeImmutable&lt;/span&gt;($document[&lt;span style="color:#e6db74"&gt;&amp;#39;processed_at&amp;#39;&lt;/span&gt;]) &lt;span style="color:#f92672"&gt;:&lt;/span&gt; &lt;span style="color:#66d9ef"&gt;null&lt;/span&gt;,
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#a6e22e"&gt;cancelledAt&lt;/span&gt;&lt;span style="color:#f92672"&gt;:&lt;/span&gt; $document[&lt;span style="color:#e6db74"&gt;&amp;#39;cancelled_at&amp;#39;&lt;/span&gt;] &lt;span style="color:#f92672"&gt;?&lt;/span&gt; &lt;span style="color:#66d9ef"&gt;new&lt;/span&gt; &lt;span style="color:#a6e22e"&gt;\DateTimeImmutable&lt;/span&gt;($document[&lt;span style="color:#e6db74"&gt;&amp;#39;cancelled_at&amp;#39;&lt;/span&gt;]) &lt;span style="color:#f92672"&gt;:&lt;/span&gt; &lt;span style="color:#66d9ef"&gt;null&lt;/span&gt;,
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#a6e22e"&gt;version&lt;/span&gt;&lt;span style="color:#f92672"&gt;:&lt;/span&gt; $document[&lt;span style="color:#e6db74"&gt;&amp;#39;version&amp;#39;&lt;/span&gt;]
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; );
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; }
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#66d9ef"&gt;private&lt;/span&gt; &lt;span style="color:#66d9ef"&gt;function&lt;/span&gt; &lt;span style="color:#a6e22e"&gt;getCollection&lt;/span&gt;()&lt;span style="color:#f92672"&gt;:&lt;/span&gt; &lt;span style="color:#a6e22e"&gt;Collection&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; {
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#66d9ef"&gt;return&lt;/span&gt; $this&lt;span style="color:#f92672"&gt;-&amp;gt;&lt;/span&gt;&lt;span style="color:#a6e22e"&gt;mongoManager&lt;/span&gt;&lt;span style="color:#f92672"&gt;-&amp;gt;&lt;/span&gt;&lt;span style="color:#a6e22e"&gt;selectCollection&lt;/span&gt;($this&lt;span style="color:#f92672"&gt;-&amp;gt;&lt;/span&gt;&lt;span style="color:#a6e22e"&gt;databaseName&lt;/span&gt;, $this&lt;span style="color:#f92672"&gt;-&amp;gt;&lt;/span&gt;&lt;span style="color:#a6e22e"&gt;collectionName&lt;/span&gt;);
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; }
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h3 id="8-stockage-in-memory---approche-classique"&gt;8. Stockage In-Memory - Approche Classique&lt;/h3&gt;
&lt;h4 id="exemple--repository-de-paiement-in-memory"&gt;Exemple : Repository de Paiement In-Memory&lt;/h4&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"&gt;&lt;code class="language-php" data-lang="php"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#75715e"&gt;// Repository de Paiement In-Memory - Projet Gyroscops Cloud
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#75715e"&gt;&lt;/span&gt;&lt;span style="color:#66d9ef"&gt;final&lt;/span&gt; &lt;span style="color:#66d9ef"&gt;class&lt;/span&gt; &lt;span style="color:#a6e22e"&gt;InMemoryPaymentRepository&lt;/span&gt; &lt;span style="color:#66d9ef"&gt;implements&lt;/span&gt; &lt;span style="color:#a6e22e"&gt;PaymentRepositoryInterface&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;{
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#66d9ef"&gt;private&lt;/span&gt; &lt;span style="color:#66d9ef"&gt;array&lt;/span&gt; $payments &lt;span style="color:#f92672"&gt;=&lt;/span&gt; [];
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#66d9ef"&gt;public&lt;/span&gt; &lt;span style="color:#66d9ef"&gt;function&lt;/span&gt; &lt;span style="color:#a6e22e"&gt;__construct&lt;/span&gt;(
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#66d9ef"&gt;private&lt;/span&gt; &lt;span style="color:#a6e22e"&gt;EventBusInterface&lt;/span&gt; $eventBus,
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; ) {
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; }
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#66d9ef"&gt;public&lt;/span&gt; &lt;span style="color:#66d9ef"&gt;function&lt;/span&gt; &lt;span style="color:#a6e22e"&gt;get&lt;/span&gt;(&lt;span style="color:#a6e22e"&gt;PaymentId&lt;/span&gt; $id)&lt;span style="color:#f92672"&gt;:&lt;/span&gt; &lt;span style="color:#a6e22e"&gt;Payment&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; {
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#66d9ef"&gt;if&lt;/span&gt; (&lt;span style="color:#f92672"&gt;!&lt;/span&gt;&lt;span style="color:#a6e22e"&gt;isset&lt;/span&gt;($this&lt;span style="color:#f92672"&gt;-&amp;gt;&lt;/span&gt;&lt;span style="color:#a6e22e"&gt;payments&lt;/span&gt;[$id&lt;span style="color:#f92672"&gt;-&amp;gt;&lt;/span&gt;&lt;span style="color:#a6e22e"&gt;toString&lt;/span&gt;()])) {
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#66d9ef"&gt;throw&lt;/span&gt; &lt;span style="color:#66d9ef"&gt;new&lt;/span&gt; &lt;span style="color:#a6e22e"&gt;NotFoundException&lt;/span&gt;();
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; }
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#66d9ef"&gt;return&lt;/span&gt; $this&lt;span style="color:#f92672"&gt;-&amp;gt;&lt;/span&gt;&lt;span style="color:#a6e22e"&gt;payments&lt;/span&gt;[$id&lt;span style="color:#f92672"&gt;-&amp;gt;&lt;/span&gt;&lt;span style="color:#a6e22e"&gt;toString&lt;/span&gt;()];
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; }
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#66d9ef"&gt;public&lt;/span&gt; &lt;span style="color:#66d9ef"&gt;function&lt;/span&gt; &lt;span style="color:#a6e22e"&gt;save&lt;/span&gt;(&lt;span style="color:#a6e22e"&gt;Payment&lt;/span&gt; $payment)&lt;span style="color:#f92672"&gt;:&lt;/span&gt; &lt;span style="color:#a6e22e"&gt;void&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; {
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; $events &lt;span style="color:#f92672"&gt;=&lt;/span&gt; $payment&lt;span style="color:#f92672"&gt;-&amp;gt;&lt;/span&gt;&lt;span style="color:#a6e22e"&gt;releaseEvents&lt;/span&gt;();
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#75715e"&gt;// Sauvegarder en m√©moire
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#75715e"&gt;&lt;/span&gt; $this&lt;span style="color:#f92672"&gt;-&amp;gt;&lt;/span&gt;&lt;span style="color:#a6e22e"&gt;payments&lt;/span&gt;[$payment&lt;span style="color:#f92672"&gt;-&amp;gt;&lt;/span&gt;&lt;span style="color:#a6e22e"&gt;getId&lt;/span&gt;()&lt;span style="color:#f92672"&gt;-&amp;gt;&lt;/span&gt;&lt;span style="color:#a6e22e"&gt;toString&lt;/span&gt;()] &lt;span style="color:#f92672"&gt;=&lt;/span&gt; $payment;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#75715e"&gt;// √âmettre les √©v√©nements
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#75715e"&gt;&lt;/span&gt; &lt;span style="color:#66d9ef"&gt;foreach&lt;/span&gt; ($events &lt;span style="color:#66d9ef"&gt;as&lt;/span&gt; $event) {
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; $this&lt;span style="color:#f92672"&gt;-&amp;gt;&lt;/span&gt;&lt;span style="color:#a6e22e"&gt;eventBus&lt;/span&gt;&lt;span style="color:#f92672"&gt;-&amp;gt;&lt;/span&gt;&lt;span style="color:#a6e22e"&gt;emit&lt;/span&gt;($event);
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; }
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; }
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#66d9ef"&gt;public&lt;/span&gt; &lt;span style="color:#66d9ef"&gt;function&lt;/span&gt; &lt;span style="color:#a6e22e"&gt;findAll&lt;/span&gt;()&lt;span style="color:#f92672"&gt;:&lt;/span&gt; &lt;span style="color:#66d9ef"&gt;array&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; {
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#66d9ef"&gt;return&lt;/span&gt; &lt;span style="color:#a6e22e"&gt;array_values&lt;/span&gt;($this&lt;span style="color:#f92672"&gt;-&amp;gt;&lt;/span&gt;&lt;span style="color:#a6e22e"&gt;payments&lt;/span&gt;);
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; }
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#66d9ef"&gt;public&lt;/span&gt; &lt;span style="color:#66d9ef"&gt;function&lt;/span&gt; &lt;span style="color:#a6e22e"&gt;findByStatus&lt;/span&gt;(&lt;span style="color:#a6e22e"&gt;PaymentStatus&lt;/span&gt; $status)&lt;span style="color:#f92672"&gt;:&lt;/span&gt; &lt;span style="color:#66d9ef"&gt;array&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; {
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#66d9ef"&gt;return&lt;/span&gt; &lt;span style="color:#a6e22e"&gt;array_filter&lt;/span&gt;($this&lt;span style="color:#f92672"&gt;-&amp;gt;&lt;/span&gt;&lt;span style="color:#a6e22e"&gt;payments&lt;/span&gt;, &lt;span style="color:#a6e22e"&gt;fn&lt;/span&gt;($payment) &lt;span style="color:#f92672"&gt;=&amp;gt;&lt;/span&gt; $payment&lt;span style="color:#f92672"&gt;-&amp;gt;&lt;/span&gt;&lt;span style="color:#a6e22e"&gt;getStatus&lt;/span&gt;() &lt;span style="color:#f92672"&gt;===&lt;/span&gt; $status);
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; }
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#66d9ef"&gt;public&lt;/span&gt; &lt;span style="color:#66d9ef"&gt;function&lt;/span&gt; &lt;span style="color:#a6e22e"&gt;clear&lt;/span&gt;()&lt;span style="color:#f92672"&gt;:&lt;/span&gt; &lt;span style="color:#a6e22e"&gt;void&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; {
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; $this&lt;span style="color:#f92672"&gt;-&amp;gt;&lt;/span&gt;&lt;span style="color:#a6e22e"&gt;payments&lt;/span&gt; &lt;span style="color:#f92672"&gt;=&lt;/span&gt; [];
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; }
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h2 id="-patterns-dimpl√©mentation"&gt;üîß Patterns d&amp;rsquo;Impl√©mentation&lt;/h2&gt;
&lt;h3 id="1-factory-pattern-pour-les-repositories"&gt;1. Factory Pattern pour les Repositories&lt;/h3&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"&gt;&lt;code class="language-php" data-lang="php"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#75715e"&gt;// Factory Pattern - Projet Gyroscops Cloud
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#75715e"&gt;&lt;/span&gt;&lt;span style="color:#66d9ef"&gt;final&lt;/span&gt; &lt;span style="color:#66d9ef"&gt;class&lt;/span&gt; &lt;span style="color:#a6e22e"&gt;PaymentRepositoryFactory&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;{
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#66d9ef"&gt;public&lt;/span&gt; &lt;span style="color:#66d9ef"&gt;function&lt;/span&gt; &lt;span style="color:#a6e22e"&gt;__construct&lt;/span&gt;(
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#66d9ef"&gt;private&lt;/span&gt; &lt;span style="color:#a6e22e"&gt;Connection&lt;/span&gt; $connection,
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#66d9ef"&gt;private&lt;/span&gt; &lt;span style="color:#a6e22e"&gt;HttpClientInterface&lt;/span&gt; $httpClient,
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#66d9ef"&gt;private&lt;/span&gt; &lt;span style="color:#a6e22e"&gt;Client&lt;/span&gt; $elasticsearchClient,
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#66d9ef"&gt;private&lt;/span&gt; &lt;span style="color:#a6e22e"&gt;Manager&lt;/span&gt; $mongoManager,
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#66d9ef"&gt;private&lt;/span&gt; &lt;span style="color:#a6e22e"&gt;EventBusInterface&lt;/span&gt; $eventBus,
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; ) {
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; }
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#66d9ef"&gt;public&lt;/span&gt; &lt;span style="color:#66d9ef"&gt;function&lt;/span&gt; &lt;span style="color:#a6e22e"&gt;create&lt;/span&gt;(&lt;span style="color:#a6e22e"&gt;string&lt;/span&gt; $type, &lt;span style="color:#66d9ef"&gt;array&lt;/span&gt; $config &lt;span style="color:#f92672"&gt;=&lt;/span&gt; [])&lt;span style="color:#f92672"&gt;:&lt;/span&gt; &lt;span style="color:#a6e22e"&gt;PaymentRepositoryInterface&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; {
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#66d9ef"&gt;return&lt;/span&gt; &lt;span style="color:#a6e22e"&gt;match&lt;/span&gt; ($type) {
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#e6db74"&gt;&amp;#39;database&amp;#39;&lt;/span&gt; &lt;span style="color:#f92672"&gt;=&amp;gt;&lt;/span&gt; &lt;span style="color:#66d9ef"&gt;new&lt;/span&gt; &lt;span style="color:#a6e22e"&gt;DatabasePaymentRepository&lt;/span&gt;($this&lt;span style="color:#f92672"&gt;-&amp;gt;&lt;/span&gt;&lt;span style="color:#a6e22e"&gt;connection&lt;/span&gt;, $this&lt;span style="color:#f92672"&gt;-&amp;gt;&lt;/span&gt;&lt;span style="color:#a6e22e"&gt;eventBus&lt;/span&gt;),
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#e6db74"&gt;&amp;#39;api&amp;#39;&lt;/span&gt; &lt;span style="color:#f92672"&gt;=&amp;gt;&lt;/span&gt; &lt;span style="color:#66d9ef"&gt;new&lt;/span&gt; &lt;span style="color:#a6e22e"&gt;ApiPaymentRepository&lt;/span&gt;(
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; $this&lt;span style="color:#f92672"&gt;-&amp;gt;&lt;/span&gt;&lt;span style="color:#a6e22e"&gt;httpClient&lt;/span&gt;,
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; $config[&lt;span style="color:#e6db74"&gt;&amp;#39;api_base_url&amp;#39;&lt;/span&gt;],
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; $config[&lt;span style="color:#e6db74"&gt;&amp;#39;api_key&amp;#39;&lt;/span&gt;],
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; $this&lt;span style="color:#f92672"&gt;-&amp;gt;&lt;/span&gt;&lt;span style="color:#a6e22e"&gt;eventBus&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; ),
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#e6db74"&gt;&amp;#39;elasticsearch&amp;#39;&lt;/span&gt; &lt;span style="color:#f92672"&gt;=&amp;gt;&lt;/span&gt; &lt;span style="color:#66d9ef"&gt;new&lt;/span&gt; &lt;span style="color:#a6e22e"&gt;ElasticSearchPaymentRepository&lt;/span&gt;(
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; $this&lt;span style="color:#f92672"&gt;-&amp;gt;&lt;/span&gt;&lt;span style="color:#a6e22e"&gt;elasticsearchClient&lt;/span&gt;,
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; $config[&lt;span style="color:#e6db74"&gt;&amp;#39;index_name&amp;#39;&lt;/span&gt;],
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; $this&lt;span style="color:#f92672"&gt;-&amp;gt;&lt;/span&gt;&lt;span style="color:#a6e22e"&gt;eventBus&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; ),
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#e6db74"&gt;&amp;#39;mongodb&amp;#39;&lt;/span&gt; &lt;span style="color:#f92672"&gt;=&amp;gt;&lt;/span&gt; &lt;span style="color:#66d9ef"&gt;new&lt;/span&gt; &lt;span style="color:#a6e22e"&gt;MongoPaymentRepository&lt;/span&gt;(
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; $this&lt;span style="color:#f92672"&gt;-&amp;gt;&lt;/span&gt;&lt;span style="color:#a6e22e"&gt;mongoManager&lt;/span&gt;,
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; $config[&lt;span style="color:#e6db74"&gt;&amp;#39;database_name&amp;#39;&lt;/span&gt;],
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; $config[&lt;span style="color:#e6db74"&gt;&amp;#39;collection_name&amp;#39;&lt;/span&gt;],
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; $this&lt;span style="color:#f92672"&gt;-&amp;gt;&lt;/span&gt;&lt;span style="color:#a6e22e"&gt;eventBus&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; ),
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#e6db74"&gt;&amp;#39;in_memory&amp;#39;&lt;/span&gt; &lt;span style="color:#f92672"&gt;=&amp;gt;&lt;/span&gt; &lt;span style="color:#66d9ef"&gt;new&lt;/span&gt; &lt;span style="color:#a6e22e"&gt;InMemoryPaymentRepository&lt;/span&gt;($this&lt;span style="color:#f92672"&gt;-&amp;gt;&lt;/span&gt;&lt;span style="color:#a6e22e"&gt;eventBus&lt;/span&gt;),
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#66d9ef"&gt;default&lt;/span&gt; &lt;span style="color:#f92672"&gt;=&amp;gt;&lt;/span&gt; &lt;span style="color:#66d9ef"&gt;throw&lt;/span&gt; &lt;span style="color:#66d9ef"&gt;new&lt;/span&gt; &lt;span style="color:#a6e22e"&gt;\InvalidArgumentException&lt;/span&gt;(&lt;span style="color:#e6db74"&gt;&amp;#34;Unsupported repository type: &lt;/span&gt;&lt;span style="color:#e6db74"&gt;{&lt;/span&gt;$type&lt;span style="color:#e6db74"&gt;}&lt;/span&gt;&lt;span style="color:#e6db74"&gt;&amp;#34;&lt;/span&gt;),
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; };
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; }
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h3 id="2-strategy-pattern-pour-les-repositories"&gt;2. Strategy Pattern pour les Repositories&lt;/h3&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"&gt;&lt;code class="language-php" data-lang="php"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#75715e"&gt;// Strategy Pattern - Projet Gyroscops Cloud
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#75715e"&gt;&lt;/span&gt;&lt;span style="color:#66d9ef"&gt;interface&lt;/span&gt; &lt;span style="color:#a6e22e"&gt;PaymentRepositoryStrategyInterface&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;{
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#66d9ef"&gt;public&lt;/span&gt; &lt;span style="color:#66d9ef"&gt;function&lt;/span&gt; &lt;span style="color:#a6e22e"&gt;get&lt;/span&gt;(&lt;span style="color:#a6e22e"&gt;PaymentId&lt;/span&gt; $id)&lt;span style="color:#f92672"&gt;:&lt;/span&gt; &lt;span style="color:#a6e22e"&gt;Payment&lt;/span&gt;;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#66d9ef"&gt;public&lt;/span&gt; &lt;span style="color:#66d9ef"&gt;function&lt;/span&gt; &lt;span style="color:#a6e22e"&gt;save&lt;/span&gt;(&lt;span style="color:#a6e22e"&gt;Payment&lt;/span&gt; $payment)&lt;span style="color:#f92672"&gt;:&lt;/span&gt; &lt;span style="color:#a6e22e"&gt;void&lt;/span&gt;;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#66d9ef"&gt;final&lt;/span&gt; &lt;span style="color:#66d9ef"&gt;class&lt;/span&gt; &lt;span style="color:#a6e22e"&gt;PaymentRepositoryStrategy&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;{
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#66d9ef"&gt;public&lt;/span&gt; &lt;span style="color:#66d9ef"&gt;function&lt;/span&gt; &lt;span style="color:#a6e22e"&gt;__construct&lt;/span&gt;(
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#66d9ef"&gt;private&lt;/span&gt; &lt;span style="color:#a6e22e"&gt;PaymentRepositoryStrategyInterface&lt;/span&gt; $strategy
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; ) {
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; }
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#66d9ef"&gt;public&lt;/span&gt; &lt;span style="color:#66d9ef"&gt;function&lt;/span&gt; &lt;span style="color:#a6e22e"&gt;get&lt;/span&gt;(&lt;span style="color:#a6e22e"&gt;PaymentId&lt;/span&gt; $id)&lt;span style="color:#f92672"&gt;:&lt;/span&gt; &lt;span style="color:#a6e22e"&gt;Payment&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; {
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#66d9ef"&gt;return&lt;/span&gt; $this&lt;span style="color:#f92672"&gt;-&amp;gt;&lt;/span&gt;&lt;span style="color:#a6e22e"&gt;strategy&lt;/span&gt;&lt;span style="color:#f92672"&gt;-&amp;gt;&lt;/span&gt;&lt;span style="color:#a6e22e"&gt;get&lt;/span&gt;($id);
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; }
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#66d9ef"&gt;public&lt;/span&gt; &lt;span style="color:#66d9ef"&gt;function&lt;/span&gt; &lt;span style="color:#a6e22e"&gt;save&lt;/span&gt;(&lt;span style="color:#a6e22e"&gt;Payment&lt;/span&gt; $payment)&lt;span style="color:#f92672"&gt;:&lt;/span&gt; &lt;span style="color:#a6e22e"&gt;void&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; {
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; $this&lt;span style="color:#f92672"&gt;-&amp;gt;&lt;/span&gt;&lt;span style="color:#a6e22e"&gt;strategy&lt;/span&gt;&lt;span style="color:#f92672"&gt;-&amp;gt;&lt;/span&gt;&lt;span style="color:#a6e22e"&gt;save&lt;/span&gt;($payment);
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; }
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#66d9ef"&gt;public&lt;/span&gt; &lt;span style="color:#66d9ef"&gt;function&lt;/span&gt; &lt;span style="color:#a6e22e"&gt;setStrategy&lt;/span&gt;(&lt;span style="color:#a6e22e"&gt;PaymentRepositoryStrategyInterface&lt;/span&gt; $strategy)&lt;span style="color:#f92672"&gt;:&lt;/span&gt; &lt;span style="color:#a6e22e"&gt;void&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; {
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; $this&lt;span style="color:#f92672"&gt;-&amp;gt;&lt;/span&gt;&lt;span style="color:#a6e22e"&gt;strategy&lt;/span&gt; &lt;span style="color:#f92672"&gt;=&lt;/span&gt; $strategy;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; }
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h3 id="3-decorator-pattern-pour-les-repositories"&gt;3. Decorator Pattern pour les Repositories&lt;/h3&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"&gt;&lt;code class="language-php" data-lang="php"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#75715e"&gt;// Decorator Pattern - Projet Gyroscops Cloud
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#75715e"&gt;&lt;/span&gt;&lt;span style="color:#66d9ef"&gt;final&lt;/span&gt; &lt;span style="color:#66d9ef"&gt;class&lt;/span&gt; &lt;span style="color:#a6e22e"&gt;CachedPaymentRepository&lt;/span&gt; &lt;span style="color:#66d9ef"&gt;implements&lt;/span&gt; &lt;span style="color:#a6e22e"&gt;PaymentRepositoryInterface&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;{
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#66d9ef"&gt;public&lt;/span&gt; &lt;span style="color:#66d9ef"&gt;function&lt;/span&gt; &lt;span style="color:#a6e22e"&gt;__construct&lt;/span&gt;(
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#66d9ef"&gt;private&lt;/span&gt; &lt;span style="color:#a6e22e"&gt;PaymentRepositoryInterface&lt;/span&gt; $repository,
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#66d9ef"&gt;private&lt;/span&gt; &lt;span style="color:#a6e22e"&gt;CacheInterface&lt;/span&gt; $cache,
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#66d9ef"&gt;private&lt;/span&gt; &lt;span style="color:#a6e22e"&gt;int&lt;/span&gt; $ttl &lt;span style="color:#f92672"&gt;=&lt;/span&gt; &lt;span style="color:#ae81ff"&gt;3600&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; ) {
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; }
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#66d9ef"&gt;public&lt;/span&gt; &lt;span style="color:#66d9ef"&gt;function&lt;/span&gt; &lt;span style="color:#a6e22e"&gt;get&lt;/span&gt;(&lt;span style="color:#a6e22e"&gt;PaymentId&lt;/span&gt; $id)&lt;span style="color:#f92672"&gt;:&lt;/span&gt; &lt;span style="color:#a6e22e"&gt;Payment&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; {
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; $cacheKey &lt;span style="color:#f92672"&gt;=&lt;/span&gt; &lt;span style="color:#e6db74"&gt;&amp;#34;payment_&lt;/span&gt;&lt;span style="color:#e6db74"&gt;{&lt;/span&gt;$id&lt;span style="color:#f92672"&gt;-&amp;gt;&lt;/span&gt;&lt;span style="color:#a6e22e"&gt;toString&lt;/span&gt;()&lt;span style="color:#e6db74"&gt;}&lt;/span&gt;&lt;span style="color:#e6db74"&gt;&amp;#34;&lt;/span&gt;;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; 
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#66d9ef"&gt;if&lt;/span&gt; ($this&lt;span style="color:#f92672"&gt;-&amp;gt;&lt;/span&gt;&lt;span style="color:#a6e22e"&gt;cache&lt;/span&gt;&lt;span style="color:#f92672"&gt;-&amp;gt;&lt;/span&gt;&lt;span style="color:#a6e22e"&gt;has&lt;/span&gt;($cacheKey)) {
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#66d9ef"&gt;return&lt;/span&gt; $this&lt;span style="color:#f92672"&gt;-&amp;gt;&lt;/span&gt;&lt;span style="color:#a6e22e"&gt;cache&lt;/span&gt;&lt;span style="color:#f92672"&gt;-&amp;gt;&lt;/span&gt;&lt;span style="color:#a6e22e"&gt;get&lt;/span&gt;($cacheKey);
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; }
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; $payment &lt;span style="color:#f92672"&gt;=&lt;/span&gt; $this&lt;span style="color:#f92672"&gt;-&amp;gt;&lt;/span&gt;&lt;span style="color:#a6e22e"&gt;repository&lt;/span&gt;&lt;span style="color:#f92672"&gt;-&amp;gt;&lt;/span&gt;&lt;span style="color:#a6e22e"&gt;get&lt;/span&gt;($id);
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; $this&lt;span style="color:#f92672"&gt;-&amp;gt;&lt;/span&gt;&lt;span style="color:#a6e22e"&gt;cache&lt;/span&gt;&lt;span style="color:#f92672"&gt;-&amp;gt;&lt;/span&gt;&lt;span style="color:#a6e22e"&gt;set&lt;/span&gt;($cacheKey, $payment, $this&lt;span style="color:#f92672"&gt;-&amp;gt;&lt;/span&gt;&lt;span style="color:#a6e22e"&gt;ttl&lt;/span&gt;);
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#66d9ef"&gt;return&lt;/span&gt; $payment;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; }
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#66d9ef"&gt;public&lt;/span&gt; &lt;span style="color:#66d9ef"&gt;function&lt;/span&gt; &lt;span style="color:#a6e22e"&gt;save&lt;/span&gt;(&lt;span style="color:#a6e22e"&gt;Payment&lt;/span&gt; $payment)&lt;span style="color:#f92672"&gt;:&lt;/span&gt; &lt;span style="color:#a6e22e"&gt;void&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; {
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; $this&lt;span style="color:#f92672"&gt;-&amp;gt;&lt;/span&gt;&lt;span style="color:#a6e22e"&gt;repository&lt;/span&gt;&lt;span style="color:#f92672"&gt;-&amp;gt;&lt;/span&gt;&lt;span style="color:#a6e22e"&gt;save&lt;/span&gt;($payment);
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; 
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; $cacheKey &lt;span style="color:#f92672"&gt;=&lt;/span&gt; &lt;span style="color:#e6db74"&gt;&amp;#34;payment_&lt;/span&gt;&lt;span style="color:#e6db74"&gt;{&lt;/span&gt;$payment&lt;span style="color:#f92672"&gt;-&amp;gt;&lt;/span&gt;&lt;span style="color:#a6e22e"&gt;getId&lt;/span&gt;()&lt;span style="color:#f92672"&gt;-&amp;gt;&lt;/span&gt;&lt;span style="color:#a6e22e"&gt;toString&lt;/span&gt;()&lt;span style="color:#e6db74"&gt;}&lt;/span&gt;&lt;span style="color:#e6db74"&gt;&amp;#34;&lt;/span&gt;;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; $this&lt;span style="color:#f92672"&gt;-&amp;gt;&lt;/span&gt;&lt;span style="color:#a6e22e"&gt;cache&lt;/span&gt;&lt;span style="color:#f92672"&gt;-&amp;gt;&lt;/span&gt;&lt;span style="color:#a6e22e"&gt;delete&lt;/span&gt;($cacheKey);
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; }
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h2 id="-comparaison-des-approches"&gt;üìä Comparaison des Approches&lt;/h2&gt;
&lt;h3 id="performance"&gt;Performance&lt;/h3&gt;
&lt;table&gt;
 &lt;thead&gt;
 &lt;tr&gt;
 &lt;th&gt;Approche&lt;/th&gt;
 &lt;th&gt;Lecture&lt;/th&gt;
 &lt;th&gt;√âcriture&lt;/th&gt;
 &lt;th&gt;Complexit√©&lt;/th&gt;
 &lt;th&gt;Maintenance&lt;/th&gt;
 &lt;/tr&gt;
 &lt;/thead&gt;
 &lt;tbody&gt;
 &lt;tr&gt;
 &lt;td&gt;&lt;strong&gt;SQL Classique&lt;/strong&gt;&lt;/td&gt;
 &lt;td&gt;Bonne&lt;/td&gt;
 &lt;td&gt;Bonne&lt;/td&gt;
 &lt;td&gt;Faible&lt;/td&gt;
 &lt;td&gt;Simple&lt;/td&gt;
 &lt;/tr&gt;
 &lt;tr&gt;
 &lt;td&gt;&lt;strong&gt;SQL CQS&lt;/strong&gt;&lt;/td&gt;
 &lt;td&gt;Tr√®s Bonne&lt;/td&gt;
 &lt;td&gt;Bonne&lt;/td&gt;
 &lt;td&gt;Mod√©r√©e&lt;/td&gt;
 &lt;td&gt;Mod√©r√©e&lt;/td&gt;
 &lt;/tr&gt;
 &lt;tr&gt;
 &lt;td&gt;&lt;strong&gt;SQL CQRS&lt;/strong&gt;&lt;/td&gt;
 &lt;td&gt;Excellente&lt;/td&gt;
 &lt;td&gt;Excellente&lt;/td&gt;
 &lt;td&gt;√âlev√©e&lt;/td&gt;
 &lt;td&gt;Complexe&lt;/td&gt;
 &lt;/tr&gt;
 &lt;tr&gt;
 &lt;td&gt;&lt;strong&gt;SQL Event Sourcing&lt;/strong&gt;&lt;/td&gt;
 &lt;td&gt;Variable&lt;/td&gt;
 &lt;td&gt;Bonne&lt;/td&gt;
 &lt;td&gt;√âlev√©e&lt;/td&gt;
 &lt;td&gt;Complexe&lt;/td&gt;
 &lt;/tr&gt;
 &lt;tr&gt;
 &lt;td&gt;&lt;strong&gt;API&lt;/strong&gt;&lt;/td&gt;
 &lt;td&gt;Variable&lt;/td&gt;
 &lt;td&gt;Variable&lt;/td&gt;
 &lt;td&gt;Mod√©r√©e&lt;/td&gt;
 &lt;td&gt;Mod√©r√©e&lt;/td&gt;
 &lt;/tr&gt;
 &lt;tr&gt;
 &lt;td&gt;&lt;strong&gt;ElasticSearch&lt;/strong&gt;&lt;/td&gt;
 &lt;td&gt;Excellente&lt;/td&gt;
 &lt;td&gt;Bonne&lt;/td&gt;
 &lt;td&gt;Mod√©r√©e&lt;/td&gt;
 &lt;td&gt;Mod√©r√©e&lt;/td&gt;
 &lt;/tr&gt;
 &lt;tr&gt;
 &lt;td&gt;&lt;strong&gt;MongoDB&lt;/strong&gt;&lt;/td&gt;
 &lt;td&gt;Tr√®s Bonne&lt;/td&gt;
 &lt;td&gt;Tr√®s Bonne&lt;/td&gt;
 &lt;td&gt;Mod√©r√©e&lt;/td&gt;
 &lt;td&gt;Mod√©r√©e&lt;/td&gt;
 &lt;/tr&gt;
 &lt;tr&gt;
 &lt;td&gt;&lt;strong&gt;In-Memory&lt;/strong&gt;&lt;/td&gt;
 &lt;td&gt;Excellente&lt;/td&gt;
 &lt;td&gt;Excellente&lt;/td&gt;
 &lt;td&gt;Faible&lt;/td&gt;
 &lt;td&gt;Simple&lt;/td&gt;
 &lt;/tr&gt;
 &lt;/tbody&gt;
&lt;/table&gt;
&lt;h3 id="utilisation-recommand√©e"&gt;Utilisation Recommand√©e&lt;/h3&gt;
&lt;table&gt;
 &lt;thead&gt;
 &lt;tr&gt;
 &lt;th&gt;Approche&lt;/th&gt;
 &lt;th&gt;Cas d&amp;rsquo;Usage&lt;/th&gt;
 &lt;th&gt;√âquipe&lt;/th&gt;
 &lt;th&gt;Budget&lt;/th&gt;
 &lt;th&gt;Temps&lt;/th&gt;
 &lt;/tr&gt;
 &lt;/thead&gt;
 &lt;tbody&gt;
 &lt;tr&gt;
 &lt;td&gt;&lt;strong&gt;SQL Classique&lt;/strong&gt;&lt;/td&gt;
 &lt;td&gt;Application simple&lt;/td&gt;
 &lt;td&gt;Junior&lt;/td&gt;
 &lt;td&gt;Faible&lt;/td&gt;
 &lt;td&gt;1-2 semaines&lt;/td&gt;
 &lt;/tr&gt;
 &lt;tr&gt;
 &lt;td&gt;&lt;strong&gt;SQL CQS&lt;/strong&gt;&lt;/td&gt;
 &lt;td&gt;Performance mod√©r√©e&lt;/td&gt;
 &lt;td&gt;Interm√©diaire&lt;/td&gt;
 &lt;td&gt;Mod√©r√©&lt;/td&gt;
 &lt;td&gt;2-3 semaines&lt;/td&gt;
 &lt;/tr&gt;
 &lt;tr&gt;
 &lt;td&gt;&lt;strong&gt;SQL CQRS&lt;/strong&gt;&lt;/td&gt;
 &lt;td&gt;Performance critique&lt;/td&gt;
 &lt;td&gt;Exp√©riment√©e&lt;/td&gt;
 &lt;td&gt;√âlev√©&lt;/td&gt;
 &lt;td&gt;1-2 mois&lt;/td&gt;
 &lt;/tr&gt;
 &lt;tr&gt;
 &lt;td&gt;&lt;strong&gt;SQL Event Sourcing&lt;/strong&gt;&lt;/td&gt;
 &lt;td&gt;Audit trail critique&lt;/td&gt;
 &lt;td&gt;Exp√©riment√©e&lt;/td&gt;
 &lt;td&gt;√âlev√©&lt;/td&gt;
 &lt;td&gt;2-3 mois&lt;/td&gt;
 &lt;/tr&gt;
 &lt;tr&gt;
 &lt;td&gt;&lt;strong&gt;API&lt;/strong&gt;&lt;/td&gt;
 &lt;td&gt;Int√©gration externe&lt;/td&gt;
 &lt;td&gt;Interm√©diaire&lt;/td&gt;
 &lt;td&gt;Mod√©r√©&lt;/td&gt;
 &lt;td&gt;2-3 semaines&lt;/td&gt;
 &lt;/tr&gt;
 &lt;tr&gt;
 &lt;td&gt;&lt;strong&gt;ElasticSearch&lt;/strong&gt;&lt;/td&gt;
 &lt;td&gt;Recherche avanc√©e&lt;/td&gt;
 &lt;td&gt;Interm√©diaire&lt;/td&gt;
 &lt;td&gt;Mod√©r√©&lt;/td&gt;
 &lt;td&gt;2-3 semaines&lt;/td&gt;
 &lt;/tr&gt;
 &lt;tr&gt;
 &lt;td&gt;&lt;strong&gt;MongoDB&lt;/strong&gt;&lt;/td&gt;
 &lt;td&gt;Donn√©es flexibles&lt;/td&gt;
 &lt;td&gt;Interm√©diaire&lt;/td&gt;
 &lt;td&gt;Mod√©r√©&lt;/td&gt;
 &lt;td&gt;2-3 semaines&lt;/td&gt;
 &lt;/tr&gt;
 &lt;tr&gt;
 &lt;td&gt;&lt;strong&gt;In-Memory&lt;/strong&gt;&lt;/td&gt;
 &lt;td&gt;Tests et cache&lt;/td&gt;
 &lt;td&gt;Tous niveaux&lt;/td&gt;
 &lt;td&gt;Faible&lt;/td&gt;
 &lt;td&gt;1 semaine&lt;/td&gt;
 &lt;/tr&gt;
 &lt;/tbody&gt;
&lt;/table&gt;
&lt;hr&gt;
&lt;p&gt;&lt;em&gt;Ces exemples sont bas√©s sur les Architecture Decision Records (ADR) du Gyroscops Cloud et suivent les principes √©tablis dans &amp;ldquo;API Platform Con 2025 - Et si on utilisait l&amp;rsquo;Event Storming ?&amp;rdquo;&lt;/em&gt;&lt;/p&gt;</description></item><item><title/><link>http://localhost:1313/plan-complet/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>http://localhost:1313/plan-complet/</guid><description>&lt;h1 id="-plan-complet-avec-crit√®res-dadoption"&gt;üìã Plan Complet avec Crit√®res d&amp;rsquo;Adoption&lt;/h1&gt;
&lt;h2 id="-vue-densemble-du-plan"&gt;üéØ Vue d&amp;rsquo;Ensemble du Plan&lt;/h2&gt;
&lt;p&gt;Ce plan complet d√©taille tous les chapitres de la documentation avec leurs crit√®res d&amp;rsquo;adoption sp√©cifiques. Il sert de r√©f√©rence pour comprendre quand et pourquoi adopter chaque pattern architectural.&lt;/p&gt;
&lt;h2 id="-chapitres-fondamentaux-parcours-principal"&gt;üìö Chapitres Fondamentaux (Parcours Principal)&lt;/h2&gt;
&lt;h3 id="chapitre-1--introduction-√†-levent-storming-et-ddd"&gt;Chapitre 1 : Introduction √† l&amp;rsquo;Event Storming et DDD&lt;/h3&gt;
&lt;p&gt;&lt;strong&gt;Objectif&lt;/strong&gt; : Comprendre les probl√®mes des mod√®les an√©miques et d√©couvrir l&amp;rsquo;Event Storming&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Crit√®res d&amp;rsquo;adoption&lt;/strong&gt; :&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;‚úÖ &lt;strong&gt;Toujours n√©cessaire&lt;/strong&gt; : Chapitre de base pour tous les parcours&lt;/li&gt;
&lt;li&gt;‚úÖ &lt;strong&gt;Pr√©requis&lt;/strong&gt; : Aucun&lt;/li&gt;
&lt;li&gt;‚úÖ &lt;strong&gt;Dur√©e&lt;/strong&gt; : 30-45 minutes&lt;/li&gt;
&lt;li&gt;‚úÖ &lt;strong&gt;Public&lt;/strong&gt; : Tous les d√©veloppeurs&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;strong&gt;Contenu&lt;/strong&gt; :&lt;/p&gt;</description></item><item><title/><link>http://localhost:1313/templates/choix-interactifs/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>http://localhost:1313/templates/choix-interactifs/</guid><description>&lt;h1 id="templates-de-choix-interactifs"&gt;Templates de Choix Interactifs&lt;/h1&gt;
&lt;h2 id="template-de-base-pour-les-choix"&gt;Template de Base pour les Choix&lt;/h2&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"&gt;&lt;code class="language-markdown" data-lang="markdown"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#75715e"&gt;## üéØ Votre Prochaine √âtape
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#75715e"&gt;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;Maintenant que vous ma√Ætrisez [concept du chapitre], quel est votre contexte ?
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#75715e"&gt;### üü¢ Option A : [Titre court et accrocheur]
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#75715e"&gt;&lt;/span&gt;*[Description d√©taill√©e du contexte et de la situation]*
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="font-weight:bold"&gt;**Crit√®res**&lt;/span&gt; :
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#66d9ef"&gt;-&lt;/span&gt; [Crit√®re 1]
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#66d9ef"&gt;-&lt;/span&gt; [Crit√®re 2]
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#66d9ef"&gt;-&lt;/span&gt; [Crit√®re 3]
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#66d9ef"&gt;-&lt;/span&gt; [Crit√®re 4]
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="font-weight:bold"&gt;**Temps estim√©**&lt;/span&gt; : [X minutes/heures]
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;‚Üí &lt;span style="font-weight:bold"&gt;**Aller au Chapitre X**&lt;/span&gt; ([Titre du chapitre])
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;---
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#75715e"&gt;### üü° Option B : [Titre court et accrocheur]
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#75715e"&gt;&lt;/span&gt;*[Description d√©taill√©e du contexte et de la situation]*
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="font-weight:bold"&gt;**Crit√®res**&lt;/span&gt; :
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#66d9ef"&gt;-&lt;/span&gt; [Crit√®re 1]
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#66d9ef"&gt;-&lt;/span&gt; [Crit√®re 2]
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#66d9ef"&gt;-&lt;/span&gt; [Crit√®re 3]
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#66d9ef"&gt;-&lt;/span&gt; [Crit√®re 4]
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="font-weight:bold"&gt;**Temps estim√©**&lt;/span&gt; : [X minutes/heures]
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;‚Üí &lt;span style="font-weight:bold"&gt;**Aller au Chapitre Y**&lt;/span&gt; ([Titre du chapitre])
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;---
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#75715e"&gt;### üî¥ Option C : [Titre court et accrocheur]
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#75715e"&gt;&lt;/span&gt;*[Description d√©taill√©e du contexte et de la situation]*
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="font-weight:bold"&gt;**Crit√®res**&lt;/span&gt; :
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#66d9ef"&gt;-&lt;/span&gt; [Crit√®re 1]
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#66d9ef"&gt;-&lt;/span&gt; [Crit√®re 2]
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#66d9ef"&gt;-&lt;/span&gt; [Crit√®re 3]
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#66d9ef"&gt;-&lt;/span&gt; [Crit√®re 4]
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="font-weight:bold"&gt;**Temps estim√©**&lt;/span&gt; : [X minutes/heures]
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;‚Üí &lt;span style="font-weight:bold"&gt;**Aller au Chapitre Z**&lt;/span&gt; ([Titre du chapitre])
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;---
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="font-style:italic"&gt;**&lt;/span&gt;üí° Conseil** : Si vous n&amp;#39;√™tes pas s√ªr, choisissez l&amp;#39;option qui correspond le mieux √† votre situation actuelle. Vous pourrez toujours revenir en arri√®re ou explorer d&amp;#39;autres options plus tard.
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="font-style:italic"&gt;**&lt;/span&gt;üîÑ Alternative** : Si aucune option ne correspond parfaitement, vous pouvez [description de l&amp;#39;alternative].
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h2 id="template-pour-les-choix-de-complexit√©"&gt;Template pour les Choix de Complexit√©&lt;/h2&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"&gt;&lt;code class="language-markdown" data-lang="markdown"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#75715e"&gt;## üéØ Votre Prochaine √âtape
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#75715e"&gt;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;Maintenant que vous comprenez [concept], √©valuez votre niveau de complexit√© :
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#75715e"&gt;### üü¢ Option A : Approche Simple
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#75715e"&gt;&lt;/span&gt;*Votre √©quipe est junior ou vous d√©veloppez une application simple*
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="font-weight:bold"&gt;**Caract√©ristiques**&lt;/span&gt; :
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#66d9ef"&gt;-&lt;/span&gt; √âquipe de 1-3 d√©veloppeurs
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#66d9ef"&gt;-&lt;/span&gt; Application monolithique
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#66d9ef"&gt;-&lt;/span&gt; Peu d&amp;#39;int√©grations externes
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#66d9ef"&gt;-&lt;/span&gt; D√©veloppement rapide requis
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="font-weight:bold"&gt;**Avantages**&lt;/span&gt; : D√©veloppement rapide, maintenance simple
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="font-weight:bold"&gt;**Inconv√©nients**&lt;/span&gt; : Limit√© pour les √©volutions complexes
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;‚Üí &lt;span style="font-weight:bold"&gt;**Aller au Chapitre X**&lt;/span&gt; ([Titre du chapitre])
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;---
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#75715e"&gt;### üü° Option B : Approche Interm√©diaire
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#75715e"&gt;&lt;/span&gt;*Votre √©quipe est exp√©riment√©e et vous avez des besoins mod√©r√©s*
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="font-weight:bold"&gt;**Caract√©ristiques**&lt;/span&gt; :
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#66d9ef"&gt;-&lt;/span&gt; √âquipe de 3-8 d√©veloppeurs
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#66d9ef"&gt;-&lt;/span&gt; Quelques int√©grations externes
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#66d9ef"&gt;-&lt;/span&gt; Besoin de performance
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#66d9ef"&gt;-&lt;/span&gt; √âvolutivit√© importante
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="font-weight:bold"&gt;**Avantages**&lt;/span&gt; : Bon √©quilibre complexit√©/b√©n√©fice
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="font-weight:bold"&gt;**Inconv√©nients**&lt;/span&gt; : Courbe d&amp;#39;apprentissage mod√©r√©e
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;‚Üí &lt;span style="font-weight:bold"&gt;**Aller au Chapitre Y**&lt;/span&gt; ([Titre du chapitre])
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;---
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#75715e"&gt;### üî¥ Option C : Approche Avanc√©e
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#75715e"&gt;&lt;/span&gt;*Votre √©quipe est tr√®s exp√©riment√©e et vous avez des besoins complexes*
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="font-weight:bold"&gt;**Caract√©ristiques**&lt;/span&gt; :
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#66d9ef"&gt;-&lt;/span&gt; √âquipe de 8+ d√©veloppeurs
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#66d9ef"&gt;-&lt;/span&gt; Nombreuses int√©grations
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#66d9ef"&gt;-&lt;/span&gt; Performance critique
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#66d9ef"&gt;-&lt;/span&gt; Audit trail important
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#66d9ef"&gt;-&lt;/span&gt; Budget et temps importants
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="font-weight:bold"&gt;**Avantages**&lt;/span&gt; : Maximum de flexibilit√© et de performance
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="font-weight:bold"&gt;**Inconv√©nients**&lt;/span&gt; : Complexit√© √©lev√©e, courbe d&amp;#39;apprentissage importante
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;‚Üí &lt;span style="font-weight:bold"&gt;**Aller au Chapitre Z**&lt;/span&gt; ([Titre du chapitre])
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h2 id="template-pour-les-choix-de-stockage"&gt;Template pour les Choix de Stockage&lt;/h2&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"&gt;&lt;code class="language-markdown" data-lang="markdown"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#75715e"&gt;## üéØ Votre Prochaine √âtape
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#75715e"&gt;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;Maintenant que vous ma√Ætrisez les patterns de repository, quel type de stockage utilisez-vous ?
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#75715e"&gt;### üóÑÔ∏è Option A : Base de Donn√©es SQL
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#75715e"&gt;&lt;/span&gt;*PostgreSQL, MySQL, SQLite, etc.*
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="font-weight:bold"&gt;**Caract√©ristiques**&lt;/span&gt; :
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#66d9ef"&gt;-&lt;/span&gt; Donn√©es relationnelles
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#66d9ef"&gt;-&lt;/span&gt; ACID transactions
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#66d9ef"&gt;-&lt;/span&gt; Requ√™tes SQL complexes
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#66d9ef"&gt;-&lt;/span&gt; Performance pr√©visible
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="font-weight:bold"&gt;**Avantages**&lt;/span&gt; : Mature, fiable, SQL puissant
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="font-weight:bold"&gt;**Inconv√©nients**&lt;/span&gt; : Scaling horizontal limit√©
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;‚Üí &lt;span style="font-weight:bold"&gt;**Aller au Chapitre X**&lt;/span&gt; (Stockage SQL Classique)
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;---
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#75715e"&gt;### üåê Option B : APIs Externes
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#75715e"&gt;&lt;/span&gt;*Keycloak, services tiers, microservices*
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="font-weight:bold"&gt;**Caract√©ristiques**&lt;/span&gt; :
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#66d9ef"&gt;-&lt;/span&gt; Donn√©es distribu√©es
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#66d9ef"&gt;-&lt;/span&gt; Int√©grations multiples
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#66d9ef"&gt;-&lt;/span&gt; Services sp√©cialis√©s
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#66d9ef"&gt;-&lt;/span&gt; Latence r√©seau
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="font-weight:bold"&gt;**Avantages**&lt;/span&gt; : Services sp√©cialis√©s, pas de duplication
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="font-weight:bold"&gt;**Inconv√©nients**&lt;/span&gt; : D√©pendance externe, latence
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;‚Üí &lt;span style="font-weight:bold"&gt;**Aller au Chapitre Y**&lt;/span&gt; (Stockage API Classique)
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;---
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#75715e"&gt;### üîç Option C : ElasticSearch
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#75715e"&gt;&lt;/span&gt;*Recherche full-text, analytics*
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="font-weight:bold"&gt;**Caract√©ristiques**&lt;/span&gt; :
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#66d9ef"&gt;-&lt;/span&gt; Recherche complexe
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#66d9ef"&gt;-&lt;/span&gt; Analytics et reporting
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#66d9ef"&gt;-&lt;/span&gt; Grandes volumes de donn√©es
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#66d9ef"&gt;-&lt;/span&gt; Requ√™tes non-SQL
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="font-weight:bold"&gt;**Avantages**&lt;/span&gt; : Recherche puissante, analytics
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="font-weight:bold"&gt;**Inconv√©nients**&lt;/span&gt; : Complexit√©, co√ªt
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;‚Üí &lt;span style="font-weight:bold"&gt;**Aller au Chapitre Z**&lt;/span&gt; (Stockage ElasticSearch Classique)
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;---
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#75715e"&gt;### üçÉ Option D : MongoDB avec ODM Doctrine
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#75715e"&gt;&lt;/span&gt;*Base de donn√©es document NoSQL*
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="font-weight:bold"&gt;**Caract√©ristiques**&lt;/span&gt; :
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#66d9ef"&gt;-&lt;/span&gt; Donn√©es semi-structur√©es
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#66d9ef"&gt;-&lt;/span&gt; Flexibilit√© du sch√©ma
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#66d9ef"&gt;-&lt;/span&gt; Requ√™tes sur documents
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#66d9ef"&gt;-&lt;/span&gt; Performance de lecture √©lev√©e
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#66d9ef"&gt;-&lt;/span&gt; Donn√©es g√©ospatiales/temporelles
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="font-weight:bold"&gt;**Avantages**&lt;/span&gt; : Flexibilit√©, performance, scaling horizontal
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="font-weight:bold"&gt;**Inconv√©nients**&lt;/span&gt; : Pas de transactions ACID compl√®tes, courbe d&amp;#39;apprentissage
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;‚Üí &lt;span style="font-weight:bold"&gt;**Aller au Chapitre W**&lt;/span&gt; (Stockage MongoDB Classique)
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;---
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#75715e"&gt;### üíæ Option E : Stockage In-Memory
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#75715e"&gt;&lt;/span&gt;*Donn√©es en m√©moire, lecture seule*
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="font-weight:bold"&gt;**Caract√©ristiques**&lt;/span&gt; :
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#66d9ef"&gt;-&lt;/span&gt; Donn√©es l√©g√®res et en lecture seule
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#66d9ef"&gt;-&lt;/span&gt; Mise √† jour uniquement lors des d√©ploiements
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#66d9ef"&gt;-&lt;/span&gt; Performance de lecture critique
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#66d9ef"&gt;-&lt;/span&gt; Donn√©es de configuration ou de r√©f√©rence
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#66d9ef"&gt;-&lt;/span&gt; Cache de donn√©es fr√©quemment consult√©es
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="font-weight:bold"&gt;**Avantages**&lt;/span&gt; : Performance maximale, simplicit√©, pas de persistance
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="font-weight:bold"&gt;**Inconv√©nients**&lt;/span&gt; : Donn√©es perdues au red√©marrage, m√©moire limit√©e
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;‚Üí &lt;span style="font-weight:bold"&gt;**Aller au Chapitre V**&lt;/span&gt; (Stockage In-Memory Classique)
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;---
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#75715e"&gt;### ‚ö° Option F : Syst√®mes Multiples
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#75715e"&gt;&lt;/span&gt;*Transactions distribu√©es complexes*
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="font-weight:bold"&gt;**Caract√©ristiques**&lt;/span&gt; :
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#66d9ef"&gt;-&lt;/span&gt; Plusieurs syst√®mes
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#66d9ef"&gt;-&lt;/span&gt; Transactions complexes
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#66d9ef"&gt;-&lt;/span&gt; Orchestration n√©cessaire
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#66d9ef"&gt;-&lt;/span&gt; Tol√©rance aux pannes
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="font-weight:bold"&gt;**Avantages**&lt;/span&gt; : Flexibilit√© maximale
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="font-weight:bold"&gt;**Inconv√©nients**&lt;/span&gt; : Tr√®s complexe
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;‚Üí &lt;span style="font-weight:bold"&gt;**Aller au Chapitre W**&lt;/span&gt; (Stockage Complexe Temporal)
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h2 id="template-pour-les-choix-darchitecture"&gt;Template pour les Choix d&amp;rsquo;Architecture&lt;/h2&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"&gt;&lt;code class="language-markdown" data-lang="markdown"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#75715e"&gt;## üéØ Votre Prochaine √âtape
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#75715e"&gt;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;Maintenant que vous ma√Ætrisez [concept], quelle architecture choisissez-vous ?
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#75715e"&gt;### üü¢ Option A : Architecture Classique
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#75715e"&gt;&lt;/span&gt;*Approche traditionnelle sans CQRS/Event Sourcing*
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="font-weight:bold"&gt;**Caract√©ristiques**&lt;/span&gt; :
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#66d9ef"&gt;-&lt;/span&gt; Repository unique par entit√©
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#66d9ef"&gt;-&lt;/span&gt; Mod√®les de lecture/√©criture identiques
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#66d9ef"&gt;-&lt;/span&gt; Transactions classiques
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#66d9ef"&gt;-&lt;/span&gt; D√©veloppement rapide
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="font-weight:bold"&gt;**Crit√®res d&amp;#39;adoption**&lt;/span&gt; :
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#66d9ef"&gt;-&lt;/span&gt; Application simple
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#66d9ef"&gt;-&lt;/span&gt; √âquipe junior
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#66d9ef"&gt;-&lt;/span&gt; D√©veloppement rapide requis
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#66d9ef"&gt;-&lt;/span&gt; Coh√©rence forte requise
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;‚Üí &lt;span style="font-weight:bold"&gt;**Continuer avec l&amp;#39;approche classique**&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;---
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#75715e"&gt;### üü° Option B : Architecture CQRS
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#75715e"&gt;&lt;/span&gt;*S√©paration Command/Query sans Event Sourcing*
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="font-weight:bold"&gt;**Caract√©ristiques**&lt;/span&gt; :
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#66d9ef"&gt;-&lt;/span&gt; Repositories s√©par√©s Command/Query
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#66d9ef"&gt;-&lt;/span&gt; Mod√®les optimis√©s par usage
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#66d9ef"&gt;-&lt;/span&gt; Eventual consistency
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#66d9ef"&gt;-&lt;/span&gt; Performance optimis√©e
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="font-weight:bold"&gt;**Crit√®res d&amp;#39;adoption**&lt;/span&gt; :
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#66d9ef"&gt;-&lt;/span&gt; Lectures/√©critures tr√®s diff√©rentes
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#66d9ef"&gt;-&lt;/span&gt; Performance critique
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#66d9ef"&gt;-&lt;/span&gt; √âquipe exp√©riment√©e
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#66d9ef"&gt;-&lt;/span&gt; √âvolutivit√© importante
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;‚Üí &lt;span style="font-weight:bold"&gt;**Aller au Chapitre X**&lt;/span&gt; (Architecture CQRS)
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;---
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#75715e"&gt;### üî¥ Option C : Architecture Event Sourcing + CQRS
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#75715e"&gt;&lt;/span&gt;*Approche compl√®te avec Event Sourcing*
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="font-weight:bold"&gt;**Caract√©ristiques**&lt;/span&gt; :
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#66d9ef"&gt;-&lt;/span&gt; √âv√©nements comme source de v√©rit√©
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#66d9ef"&gt;-&lt;/span&gt; Audit trail complet
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#66d9ef"&gt;-&lt;/span&gt; Projections de lecture
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#66d9ef"&gt;-&lt;/span&gt; Reconstruction d&amp;#39;√©tat
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="font-weight:bold"&gt;**Crit√®res d&amp;#39;adoption**&lt;/span&gt; :
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#66d9ef"&gt;-&lt;/span&gt; Audit trail critique
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#66d9ef"&gt;-&lt;/span&gt; Debugging complexe
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#66d9ef"&gt;-&lt;/span&gt; √âquipe tr√®s exp√©riment√©e
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#66d9ef"&gt;-&lt;/span&gt; Budget important
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;‚Üí &lt;span style="font-weight:bold"&gt;**Aller au Chapitre Y**&lt;/span&gt; (Event Sourcing + CQRS)
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h2 id="template-pour-les-choix-de-granularit√©"&gt;Template pour les Choix de Granularit√©&lt;/h2&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"&gt;&lt;code class="language-markdown" data-lang="markdown"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#75715e"&gt;## üéØ Votre Prochaine √âtape
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#75715e"&gt;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;Maintenant que vous comprenez la granularit√© des choix architecturaux, √† quel niveau voulez-vous faire vos choix ?
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#75715e"&gt;### üåê Option A : Choix Global (Application)
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#75715e"&gt;&lt;/span&gt;*Architecture unique pour toute l&amp;#39;application*
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="font-weight:bold"&gt;**Crit√®res**&lt;/span&gt; :
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#66d9ef"&gt;-&lt;/span&gt; √âquipe petite √† moyenne (2-8 d√©veloppeurs)
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#66d9ef"&gt;-&lt;/span&gt; Application coh√©rente et homog√®ne
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#66d9ef"&gt;-&lt;/span&gt; Budget et temps limit√©s
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#66d9ef"&gt;-&lt;/span&gt; Maintenance simplifi√©e
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="font-weight:bold"&gt;**Avantages**&lt;/span&gt; :
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#66d9ef"&gt;-&lt;/span&gt; Coh√©rence maximale
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#66d9ef"&gt;-&lt;/span&gt; Charge mentale minimale
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#66d9ef"&gt;-&lt;/span&gt; Formation simplifi√©e
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#66d9ef"&gt;-&lt;/span&gt; Maintenance facilit√©e
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="font-weight:bold"&gt;**Inconv√©nients**&lt;/span&gt; :
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#66d9ef"&gt;-&lt;/span&gt; Performance non optimale partout
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#66d9ef"&gt;-&lt;/span&gt; Flexibilit√© limit√©e
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#66d9ef"&gt;-&lt;/span&gt; √âvolution co√ªteuse
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="font-weight:bold"&gt;**Temps estim√©**&lt;/span&gt; : 1-2 semaines de d√©cision
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;‚Üí &lt;span style="font-weight:bold"&gt;**Aller au Chapitre 3**&lt;/span&gt; (Complexit√© Accidentelle vs Essentielle)
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;---
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#75715e"&gt;### üè¢ Option B : Choix par Bounded Context (Domaine)
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#75715e"&gt;&lt;/span&gt;*Architecture sp√©cifique par domaine m√©tier*
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="font-weight:bold"&gt;**Crit√®res**&lt;/span&gt; :
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#66d9ef"&gt;-&lt;/span&gt; √âquipe moyenne √† grande (5-15 d√©veloppeurs)
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#66d9ef"&gt;-&lt;/span&gt; Domaines m√©tier distincts
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#66d9ef"&gt;-&lt;/span&gt; Besoins diff√©rents par contexte
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#66d9ef"&gt;-&lt;/span&gt; √âquipes d√©di√©es par domaine
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="font-weight:bold"&gt;**Avantages**&lt;/span&gt; :
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#66d9ef"&gt;-&lt;/span&gt; Optimisation par domaine
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#66d9ef"&gt;-&lt;/span&gt; √âquipes autonomes
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#66d9ef"&gt;-&lt;/span&gt; √âvolution ind√©pendante
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#66d9ef"&gt;-&lt;/span&gt; Performance adapt√©e
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="font-weight:bold"&gt;**Inconv√©nients**&lt;/span&gt; :
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#66d9ef"&gt;-&lt;/span&gt; Charge mentale mod√©r√©e
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#66d9ef"&gt;-&lt;/span&gt; Interfaces √† d√©finir
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#66d9ef"&gt;-&lt;/span&gt; Coordination n√©cessaire
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="font-weight:bold"&gt;**Temps estim√©**&lt;/span&gt; : 2-4 semaines de d√©cision
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;‚Üí &lt;span style="font-weight:bold"&gt;**Aller au Chapitre 4**&lt;/span&gt; (Mod√®les Riches vs An√©miques) puis choisir par contexte
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;---
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#75715e"&gt;### üîß Option C : Choix par Agr√©gat (Entit√©)
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#75715e"&gt;&lt;/span&gt;*Architecture fine pour des entit√©s sp√©cifiques*
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="font-weight:bold"&gt;**Crit√®res**&lt;/span&gt; :
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#66d9ef"&gt;-&lt;/span&gt; √âquipe exp√©riment√©e (8+ d√©veloppeurs)
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#66d9ef"&gt;-&lt;/span&gt; Entit√©s avec besoins tr√®s sp√©cifiques
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#66d9ef"&gt;-&lt;/span&gt; Performance critique sur certaines entit√©s
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#66d9ef"&gt;-&lt;/span&gt; Audit trail n√©cessaire sur certaines entit√©s
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="font-weight:bold"&gt;**Avantages**&lt;/span&gt; :
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#66d9ef"&gt;-&lt;/span&gt; Optimisation maximale
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#66d9ef"&gt;-&lt;/span&gt; Flexibilit√© totale
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#66d9ef"&gt;-&lt;/span&gt; Performance adapt√©e
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#66d9ef"&gt;-&lt;/span&gt; Audit trail cibl√©
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="font-weight:bold"&gt;**Inconv√©nients**&lt;/span&gt; :
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#66d9ef"&gt;-&lt;/span&gt; Charge mentale √©lev√©e
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#66d9ef"&gt;-&lt;/span&gt; Complexit√© de maintenance
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#66d9ef"&gt;-&lt;/span&gt; Formation approfondie n√©cessaire
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#66d9ef"&gt;-&lt;/span&gt; Coordination complexe
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="font-weight:bold"&gt;**Temps estim√©**&lt;/span&gt; : 4-8 semaines de d√©cision
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;‚Üí &lt;span style="font-weight:bold"&gt;**Aller au Chapitre 4**&lt;/span&gt; (Mod√®les Riches vs An√©miques) puis choisir par agr√©gat
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;---
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#75715e"&gt;### ‚ö†Ô∏è Option D : Je veux d&amp;#39;abord comprendre les implications
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#75715e"&gt;&lt;/span&gt;*Comprendre les impacts avant de choisir*
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="font-weight:bold"&gt;**Crit√®res**&lt;/span&gt; :
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#66d9ef"&gt;-&lt;/span&gt; √âquipe peu exp√©riment√©e
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#66d9ef"&gt;-&lt;/span&gt; Projet complexe
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#66d9ef"&gt;-&lt;/span&gt; Besoin de formation
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#66d9ef"&gt;-&lt;/span&gt; D√©cision critique
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="font-weight:bold"&gt;**Temps estim√©**&lt;/span&gt; : 1-2 semaines de formation
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;‚Üí &lt;span style="font-weight:bold"&gt;**Aller au Chapitre 6**&lt;/span&gt; (Repositories et Persistance) pour voir les impl√©mentations
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h2 id="template-pour-les-choix-de-priorit√©"&gt;Template pour les Choix de Priorit√©&lt;/h2&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"&gt;&lt;code class="language-markdown" data-lang="markdown"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#75715e"&gt;## üéØ Votre Prochaine √âtape
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#75715e"&gt;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;Maintenant que vous comprenez [concept], quelle est votre priorit√© ?
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#75715e"&gt;### üöÄ Option A : Performance et Scalabilit√©
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#75715e"&gt;&lt;/span&gt;*Votre application doit g√©rer de gros volumes*
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="font-weight:bold"&gt;**Crit√®res**&lt;/span&gt; :
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#66d9ef"&gt;-&lt;/span&gt; Plus de 1000 utilisateurs simultan√©s
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#66d9ef"&gt;-&lt;/span&gt; Plus de 1M de requ√™tes par jour
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#66d9ef"&gt;-&lt;/span&gt; Temps de r√©ponse &amp;lt; 100ms
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#66d9ef"&gt;-&lt;/span&gt; √âquipe exp√©riment√©e
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="font-weight:bold"&gt;**Temps estim√©**&lt;/span&gt; : 2-3 semaines
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;‚Üí &lt;span style="font-weight:bold"&gt;**Aller au Chapitre X**&lt;/span&gt; (Pagination et Performance)
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;---
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#75715e"&gt;### üîí Option B : S√©curit√© et Conformit√©
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#75715e"&gt;&lt;/span&gt;*Votre application g√®re des donn√©es sensibles*
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="font-weight:bold"&gt;**Crit√®res**&lt;/span&gt; :
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#66d9ef"&gt;-&lt;/span&gt; Donn√©es personnelles (RGPD)
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#66d9ef"&gt;-&lt;/span&gt; Donn√©es financi√®res
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#66d9ef"&gt;-&lt;/span&gt; Audit trail obligatoire
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#66d9ef"&gt;-&lt;/span&gt; Conformit√© r√©glementaire
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="font-weight:bold"&gt;**Temps estim√©**&lt;/span&gt; : 2-3 semaines
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;‚Üí &lt;span style="font-weight:bold"&gt;**Aller au Chapitre Y**&lt;/span&gt; (S√©curit√© et Autorisation)
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;---
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#75715e"&gt;### üé® Option C : Interface Utilisateur
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#75715e"&gt;&lt;/span&gt;*Votre application a besoin d&amp;#39;une interface moderne*
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="font-weight:bold"&gt;**Crit√®res**&lt;/span&gt; :
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#66d9ef"&gt;-&lt;/span&gt; Interface utilisateur importante
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#66d9ef"&gt;-&lt;/span&gt; Exp√©rience utilisateur critique
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#66d9ef"&gt;-&lt;/span&gt; D√©veloppement frontend
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#66d9ef"&gt;-&lt;/span&gt; Int√©gration API
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="font-weight:bold"&gt;**Temps estim√©**&lt;/span&gt; : 1-2 semaines
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;‚Üí &lt;span style="font-weight:bold"&gt;**Aller au Chapitre Z**&lt;/span&gt; (Frontend et Int√©gration)
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;---
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#75715e"&gt;### üß™ Option D : Qualit√© et Tests
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#75715e"&gt;&lt;/span&gt;*Votre application doit √™tre robuste et fiable*
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="font-weight:bold"&gt;**Crit√®res**&lt;/span&gt; :
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#66d9ef"&gt;-&lt;/span&gt; Taux de disponibilit√© &amp;gt; 99.9%
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#66d9ef"&gt;-&lt;/span&gt; Tests automatis√©s
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#66d9ef"&gt;-&lt;/span&gt; Qualit√© de code
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#66d9ef"&gt;-&lt;/span&gt; Maintenance facilit√©e
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="font-weight:bold"&gt;**Temps estim√©**&lt;/span&gt; : 1-2 semaines
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;‚Üí &lt;span style="font-weight:bold"&gt;**Aller au Chapitre W**&lt;/span&gt; (Tests et Qualit√©)
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h2 id="√©l√©ments-visuels-pour-les-choix"&gt;√âl√©ments Visuels pour les Choix&lt;/h2&gt;
&lt;h3 id="emojis-par-cat√©gorie"&gt;Emojis par Cat√©gorie&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;üü¢&lt;/strong&gt; : Option simple/recommand√©e&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;üü°&lt;/strong&gt; : Option interm√©diaire&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;üî¥&lt;/strong&gt; : Option complexe/avanc√©e&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;üîµ&lt;/strong&gt; : Option alternative&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;üü£&lt;/strong&gt; : Option sp√©cialis√©e&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;‚ö°&lt;/strong&gt; : Option performante&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;üîí&lt;/strong&gt; : Option s√©curis√©e&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;üé®&lt;/strong&gt; : Option interface&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;üß™&lt;/strong&gt; : Option qualit√©&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;üåê&lt;/strong&gt; : Option globale&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;üè¢&lt;/strong&gt; : Option domaine&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;üîß&lt;/strong&gt; : Option technique&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="couleurs-par-niveau"&gt;Couleurs par Niveau&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;Vert&lt;/strong&gt; : Simple, recommand√©&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Orange&lt;/strong&gt; : Interm√©diaire, √©quilibr√©&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Rouge&lt;/strong&gt; : Complexe, avanc√©&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Bleu&lt;/strong&gt; : Alternative, sp√©cialis√©&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Violet&lt;/strong&gt; : Technique, expert&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="ic√¥nes-par-type"&gt;Ic√¥nes par Type&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;üóÑÔ∏è&lt;/strong&gt; : Base de donn√©es&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;üåê&lt;/strong&gt; : API/Web&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;üîç&lt;/strong&gt; : Recherche&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;üçÉ&lt;/strong&gt; : NoSQL&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;üíæ&lt;/strong&gt; : M√©moire&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;‚ö°&lt;/strong&gt; : Performance&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;üîí&lt;/strong&gt; : S√©curit√©&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;üé®&lt;/strong&gt; : Interface&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;üß™&lt;/strong&gt; : Tests&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;üìä&lt;/strong&gt; : Analytics&lt;/li&gt;
&lt;/ul&gt;</description></item><item><title/><link>http://localhost:1313/templates/guide-redaction/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>http://localhost:1313/templates/guide-redaction/</guid><description>&lt;h1 id="guide-de-r√©daction---chapitres-api-platform-ddd"&gt;Guide de R√©daction - Chapitres API Platform DDD&lt;/h1&gt;
&lt;h2 id="structure-standard-dun-chapitre"&gt;Structure Standard d&amp;rsquo;un Chapitre&lt;/h2&gt;
&lt;h3 id="1-en-t√™te-hugo"&gt;1. En-t√™te Hugo&lt;/h3&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"&gt;&lt;code class="language-yaml" data-lang="yaml"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;---
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#f92672"&gt;title&lt;/span&gt;: &lt;span style="color:#e6db74"&gt;&amp;#34;Chapitre X : [Titre du Chapitre]&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#f92672"&gt;description&lt;/span&gt;: &lt;span style="color:#e6db74"&gt;&amp;#34;[Description courte et accrocheuse]&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#f92672"&gt;date&lt;/span&gt;: &lt;span style="color:#e6db74"&gt;2024-12-19&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#f92672"&gt;draft&lt;/span&gt;: &lt;span style="color:#66d9ef"&gt;true&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#f92672"&gt;type&lt;/span&gt;: &lt;span style="color:#e6db74"&gt;&amp;#34;docs&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#f92672"&gt;weight&lt;/span&gt;: &lt;span style="color:#ae81ff"&gt;X&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;---
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h3 id="2-objectif-du-chapitre"&gt;2. Objectif du Chapitre&lt;/h3&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"&gt;&lt;code class="language-markdown" data-lang="markdown"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#75715e"&gt;## üéØ Objectif de ce Chapitre
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#75715e"&gt;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#75715e"&gt;### Mon Probl√®me : [Question ou situation probl√©matique]
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#75715e"&gt;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="font-weight:bold"&gt;**Voici ce qui s&amp;#39;est pass√© avec Gyroscops**&lt;/span&gt; : [Contexte personnel et exp√©rience]
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="font-weight:bold"&gt;**Mais attendez...**&lt;/span&gt; [R√©alisation du probl√®me]
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="font-weight:bold"&gt;**Soudain, je r√©alisais que [insight cl√©] !**&lt;/span&gt; [Solution ou approche]
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#75715e"&gt;### [Concept Principal] : Mon Guide [Adjectif]
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#75715e"&gt;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;[Concept] m&amp;#39;a permis de :
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#66d9ef"&gt;-&lt;/span&gt; **[B√©n√©fice 1]**
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#66d9ef"&gt;-&lt;/span&gt; **[B√©n√©fice 2]**
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#66d9ef"&gt;-&lt;/span&gt; **[B√©n√©fice 3]**
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#66d9ef"&gt;-&lt;/span&gt; **[B√©n√©fice 4]**
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h3 id="3-explication-du-concept"&gt;3. Explication du Concept&lt;/h3&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"&gt;&lt;code class="language-markdown" data-lang="markdown"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#75715e"&gt;## Qu&amp;#39;est-ce que [Concept] ?
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#75715e"&gt;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#75715e"&gt;### Le Concept Fondamental
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#75715e"&gt;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;[Concept] consiste √† [d√©finition claire]. &lt;span style="font-weight:bold"&gt;**L&amp;#39;id√©e**&lt;/span&gt; : [Principe cl√©].
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="font-weight:bold"&gt;**Avec Gyroscops, voici comment j&amp;#39;ai [appliqu√© le concept]**&lt;/span&gt; :
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#75715e"&gt;### Les [X] Piliers de [Concept]
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#75715e"&gt;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#75715e"&gt;#### 1. **[Pilier 1]** - [Description]
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#75715e"&gt;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="font-weight:bold"&gt;**Voici comment j&amp;#39;ai [impl√©ment√© le pilier] avec Gyroscops**&lt;/span&gt; :
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="font-style:italic"&gt;**&lt;/span&gt;[Sous-concept]** :
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#66d9ef"&gt;-&lt;/span&gt; [Point 1]
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#66d9ef"&gt;-&lt;/span&gt; [Point 2]
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#66d9ef"&gt;-&lt;/span&gt; [Point 3]
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="font-style:italic"&gt;**&lt;/span&gt;[Impl√©mentation]** :
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#66d9ef"&gt;-&lt;/span&gt; [D√©tail 1]
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#66d9ef"&gt;-&lt;/span&gt; [D√©tail 2]
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#66d9ef"&gt;-&lt;/span&gt; [D√©tail 3]
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="font-weight:bold"&gt;**R√©sultat**&lt;/span&gt; : [R√©sultat obtenu].
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h3 id="4-impl√©mentation-pratique"&gt;4. Impl√©mentation Pratique&lt;/h3&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"&gt;&lt;code class="language-markdown" data-lang="markdown"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#75715e"&gt;## Comment Impl√©menter [Concept]
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#75715e"&gt;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#75715e"&gt;### 1. **[√âtape 1]**
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#75715e"&gt;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="font-weight:bold"&gt;**Avec Gyroscops**&lt;/span&gt; : J&amp;#39;ai [action r√©alis√©e] :
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;```php
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;// ‚úÖ [Description du code] (Projet Gyroscops Cloud)
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;[Code d&amp;#39;exemple]
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;&lt;strong&gt;R√©sultat&lt;/strong&gt; : [R√©sultat obtenu].&lt;/p&gt;</description></item></channel></rss>